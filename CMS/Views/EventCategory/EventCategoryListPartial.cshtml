@model IEnumerable<CMS.Models.EventCategory>
<div class="col-md-12 mt10 nopad">
    <table id="tabCategory" width="100%">
        <tbody>
            @{
                int i = 0;
                int j = 0;
                foreach (var itemCat in Model)
                {
                    i = i + 1;
                    <tr class="col-sm-12 catbg">
                        <td class="col-sm-12">
                            <label id="lblEvntCatName-@i">@itemCat.EventCategory1</label>
                            <input type="text" id="txtEventcatname-@i" value="@itemCat.EventCategory1" style="display:none;" />
                        </td>
                        <td class="pl5">
                            <button id="btnEditcatfinal-@i" class="btn btn-primary br2 btn-xs fs12" style="display:none;" onclick="EditCategoryfinal(this.id)" type="button"><i class="fa fa-edit"></i></button>
                            <button id="btnEditcat-@i" class="btn btn-success br2 btn-xs fs12" onclick="EditCategory('@itemCat.EventCategoryID',this.id)" type="button"><i class="fa fa-edit"></i></button>
                        </td>
                        <td class="pl5">
@if (!itemCat.CategoryPresent)
{
                            <a class="btn btn-danger br2 btn-xs fs12" onclick="ConfirmDelete('@itemCat.EventCategoryID');" type="button" href="#confirm-delete-ok" data-toggle="modal" id="btnDeleteCat-@i">
                                <i class="fa fa-remove"></i>
                            </a>
}
                            @*<button id="btnDeleteCat-@i" type="button" onclick="DeleteCatgry('@itemCat.EventCategoryID');" class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>*@
                        </td>
                    </tr>


                                                <tr class="col-sm-11 mt10 catbg col-sm-offset-1 mb10">
                                                    <td style="width: 100%; float: left;">
                                                        <table width="100%">
                                                            <tr class="col-sm-12 crt-subcat">
                                                                <td>
                                                                    <div class="col-md-12">
                                                                        <ul class="nav add-cat-nav">
                                                                            <li class="dropdown">
                                                                                <a href="#" class="dropdown-toggle add-cat-pop" data-toggle="dropdown" role="button" aria-expanded="false">
                                                                                    + Add Subcategory
                                                                                    <span class="caret caret-tp"></span>
                                                                                </a>
                                                                                <div class="col-sm-12 dropdown-menu dropdown-menu-cus catbg">
                                                                                    <div class="col-md-12 nopad">
                                                                                        <div class="col-md-9">
                                                                                            <input type="text" id="txtEventSubCategory-@i" placeholder="Enter Sub Category Name" class="form-control" />
                                                                                        </div>
                                                                                        <div class="col-md-3 ">
                                                                                            <button class="btn btn-primary" name="submit" value="Add" id="btnAddSubCat" onclick="AddSubCat('@itemCat.EventCategoryID',document.getElementById('txtEventSubCategory-@i').value);" type="button">+ Add </button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </li>
                                                                            @*<li class="dropdown">
                                                                                <a id="dropdownMenu1" href="#" class="add-cat-pop">
                                                                                    + Add Subcategory
                                                                                    <span class="caret caret-tp"></span>
                                                                                </a>
                                                                                <div id="dropdownMenu1-Div" class="col-sm-12 dropdown-menu dropdown-menu-cus catbg">
                                                                                    <div class="col-md-12 nopad">
                                                                                        <div class="col-md-9">
                                                                                            <input type="text" id="txtEventSubCategory-@i" placeholder="Enter Sub Category Name" class="form-control" />
                                                                                        </div>
                                                                                        <div class="col-md-3 ">
                                                                                            <button class="btn btn-primary" name="submit" value="Add" id="btnAddSubCat" onclick="AddSubCat('@itemCat.EventCategoryID',document.getElementById('txtEventSubCategory-@i').value);" type="button">+ Add </button>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </li>*@
                                                                        </ul>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            @{
                                                                foreach (var itemSubCat in itemCat.ESubCat)
                                                                {
                                                                    j = j + 1;
                                                                    <tr class="col-sm-12 crt-subcat2">
                                                                        <td class="col-sm-12">
                                                                            <label id="lblEvntSubCatName-@j">@itemSubCat.EventSubCategory1 </label>
                                                                            <input type="text" id="txtEvntSubCatName-@j" style="display:none;" value="@itemSubCat.EventSubCategory1" />
                                                                        </td>
                                                                        <td class="pl5">
                                                                            <button id="btnEditSubfinalCat-@j" onclick="EditSubCatFinal(this.id);" type="button" class="btn btn-primary br2 btn-xs fs12" style="display:none;"><i class="fa fa-edit"></i></button>

                                                                            <button id="btnEditSubCat-@j" onclick="EditSubCat('@itemCat.EventCategoryID','@itemSubCat.EventSubCategoryID',this.id);" type="button" class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        </td>
                                                                        <td class="pl5">
@if (!itemSubCat.EvntSubCatPresent)
{
                                                                            <a class="btn btn-danger br2 btn-xs fs12" onclick="ConfirmDeletesubcat('@itemCat.EventCategoryID','@itemSubCat.EventSubCategoryID');" type="button" href="#confirm-delete-ok" data-toggle="modal" id="btnDeleteSubCat-@i">
                                                                                <i class="fa fa-remove"></i>
                                                                            </a>
}
                                                                            @*<button id="btnDeleteSubCat-@j" onclick="DeleteSubCat('@itemCat.EventCategoryID','@itemSubCat.EventSubCategoryID');" type="button" class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>*@
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }
                                                        </table>
                                                    </td>
                                                </tr>
                                                                }
            }
        </tbody>
    </table>
    @*<div class="col-sm-12 catbg">
            <div class="col-sm-10">
                @Html.Label("Community/Cultural")
            </div>
            <div class="col-sm-2 text-right">
                <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
            </div>
        </div>*@

    @*<div class="col-sm-11 mt10 catbg col-sm-offset-1 mb10">
            <div class="col-md-12 crt-subcat">
                <ul class="nav add-cat-nav">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle add-cat-pop" data-toggle="dropdown" role="button" aria-expanded="false">
                            + Add Subcategory
                            <span class="caret caret-tp"></span>
                        </a>
                        <div class="col-sm-12 dropdown-menu dropdown-menu-cus catbg">
                            <div class="col-md-12 nopad">
                                <div class="col-md-7">
                                    <input type="text" class="form-control" placeholder="Enter category name">
                                </div>
                                <div class="col-md-5 ">
                                    <button class="btn btn-primary" type="submit">+ Add </button>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="col-md-12 nopad sub-cat-main-cont">
                <div class="col-sm-12 sub-cat-mar">
                    <div class="col-sm-10"> Sub-Community/Cultural </div>
                    <div class="col-sm-2 text-right">
                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                    </div>
                </div>
                <div class="col-sm-12 sub-cat-mar">
                    <div class="col-sm-10"> Sub-Community/Cultural </div>
                    <div class="col-sm-2 text-right">
                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                    </div>
                </div>
                <div class="col-sm-12 sub-cat-mar">
                    <div class="col-sm-10"> Sub-Community/Cultural </div>
                    <div class="col-sm-2 text-right">
                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                    </div>
                </div>
                <div class="col-sm-12 sub-cat-mar">
                    <div class="col-sm-10"> Sub-Community/Cultural </div>
                    <div class="col-sm-2 text-right">
                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                    </div>
                </div>
                <div class="col-sm-12 sub-cat-mar">
                    <div class="col-sm-10">Sub- Community/Cultural </div>
                    <div class="col-sm-2 text-right">
                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                    </div>
                </div>
            </div>

        </div>*@

</div>
<script>
    $(document).ready(function () {
        //$("#dropdownMenu1").on("click", function (event) {
        //    event.stopPropagation();
        //    $("#dropdownMenu1-Div").toggle();
        //});
        //$("#dropdownMenu1-Div").on("click", function (event) {
        //    event.stopPropagation();
        //});
        //$(document).on("click", function () {
        //    $("#dropdownMenu1-Div").hide();
        //});
        $('.dropdown-menu').on('click', function (e) {
            e.stopPropagation();
            var Target = $(e.target);
            var TargetGroup = Target.parents('.btn-group');
            var SiblingGroup = Target.parents('.dropdown-menu').find('.btn-group');

            // closes all open multiselect menus. Creates Toggle like functionality
            if (Target.hasClass('multiselect') || Target.parent().hasClass('multiselect')) {
                SiblingGroup.removeClass('open');
                TargetGroup.addClass('open');
            }
            else { SiblingGroup.removeClass('open'); }

        });
    });

</script>
