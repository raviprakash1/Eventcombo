@model CMS.Models.EventCategory
@{
    ViewBag.Title = "EventCategory";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



            <section id="content_wrapper">
                @using (Html.BeginForm())
                {
                    if (TempData["SuccessMessage"] != null)
                    {
                        <div class="alert alert-micro alert-border-left alert-success pastel alert-dismissable mn mb5" id="divsuccc">
                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                            <i class="fa fa-info pr10"></i> <span id="spanid"> @TempData["SuccessMessage"]</span>
                        </div>
                    }
                    <div class="row" id="modal-content">
                        <div class="col-md-12 mt10">
                            <div class="panel ">                              
                                    <div class="col-md-12 admin-grid animated-delay" data-animate='["400","fadeIn"]'>
                                        <div class="panel">
                                            <div class="panel-heading">
                                                <span class="view_evnt fs26">Event Category</span>
                                            </div>

                                            <div class="panel-body">
                                                <div class="col-md-12">
                                                    <div class="col-md-12 nopad">
                                                        <ul class="nav add-cat-nav">
                                                            <li class="dropdown">
                                                                <a href="#" class="dropdown-toggle add-cat-pop" data-toggle="dropdown" role="button" aria-expanded="false">
                                                                    + Add Category
                                                                    <span class="caret caret-tp"></span>
                                                                </a>
                                                                <div class="col-sm-12 dropdown-menu dropdown-menu-cus catbg">
                                                                    <div class="col-md-12 nopad">
                                                                        <div class="col-md-7">
                                                                            <input type="text" class="form-control" placeholder="Enter category name">
                                                                        </div>
                                                                        <div class="col-md-5 ">
                                                                            <button class="btn btn-primary" type="submit">+ Add </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <div class="col-md-12 mt10 nopad">

                                                        <div class="col-sm-12 catbg">
                                                            <div class="col-sm-10">Community/Cultural </div>
                                                            <div class="col-sm-2 text-right">
                                                                <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-11 mt10 catbg col-sm-offset-1 mb10">
                                                            <div class="col-md-12 crt-subcat">
                                                                <ul class="nav add-cat-nav">
                                                                    <li class="dropdown">
                                                                        <a href="#" class="dropdown-toggle add-cat-pop" data-toggle="dropdown" role="button" aria-expanded="false">
                                                                            + Add Subcategory
                                                                            <span class="caret caret-tp"></span>
                                                                        </a>
                                                                        <div class="col-sm-12 dropdown-menu dropdown-menu-cus catbg">
                                                                            <div class="col-md-12 nopad">
                                                                                <div class="col-md-7">
                                                                                    <input type="text" class="form-control" placeholder="Enter category name">
                                                                                </div>
                                                                                <div class="col-md-5 ">
                                                                                    <button class="btn btn-primary" type="submit">+ Add </button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="col-md-12 nopad sub-cat-main-cont">
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>

                                                    <div class="col-md-12 mt10 nopad">

                                                        <div class="col-sm-12 catbg">
                                                            <div class="col-sm-10">Community/Cultural </div>
                                                            <div class="col-sm-2 text-right">
                                                                <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-11 mt10 catbg col-sm-offset-1 mb10">
                                                            <div class="col-md-12 crt-subcat">
                                                                <ul class="nav add-cat-nav">
                                                                    <li class="dropdown">
                                                                        <a href="#" class="dropdown-toggle add-cat-pop" data-toggle="dropdown" role="button" aria-expanded="false">
                                                                            + Add Subcategory
                                                                            <span class="caret caret-tp"></span>
                                                                        </a>
                                                                        <div class="col-sm-12 dropdown-menu dropdown-menu-cus catbg">
                                                                            <div class="col-md-12 nopad">
                                                                                <div class="col-md-7">
                                                                                    <input type="text" class="form-control" placeholder="Enter category name">
                                                                                </div>
                                                                                <div class="col-md-5 ">
                                                                                    <button class="btn btn-primary" type="submit">+ Add </button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="col-md-12 nopad sub-cat-main-cont">
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-12 sub-cat-mar">
                                                                    <div class="col-sm-10"> Community/Cultural </div>
                                                                    <div class="col-sm-2 text-right">
                                                                        <button class="btn btn-success br2 btn-xs fs12"><i class="fa fa-edit"></i></button>
                                                                        <button class="btn btn-danger br2 btn-xs fs12"><i class="fa fa-remove"></i></button>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>   
                            </div>
                        </div>
                    </div>                    
                }
            </section>
<script src="~/Scripts/jquery.masked.js"></script>
            <script type="text/javascript">

                $(window).load(function () {
                    debugger;
                    $("#EventSubCategoryListBox").hide();
                    $("#lblSubCatList").hide();
                    $("#btnReset").hide();
                    $("#btnEdit").hide();
                    $("#btnDelete").hide();
                });

                $(document).ready(function () {                    
                    $('#btnReset').click(function () {                        
                        $("#btnCreate").show();
                        $("#btnAddSub").show();
                        $("#lblSubCat").show();
                        $("#EventSubCategory1").show();
                        $("#EventSubCategoryListBox").hide();
                        $("#lblSubCatList").hide();
                        $("#EventCategory1").val('');
                        $("#btnReset").hide();
                        $("#btnEdit").hide();
                        $("#btnDelete").hide();                        
                        $("#EventSubCategoryListBox").empty();
                        
                    });

                    $('#btnAddSub').click(function () {                        
                        $("#EventSubCategoryListBox").show();
                        $("#lblSubCatList").show();
                        var newListValue = $('#EventSubCategory1').val();
                        if ($.trim(newListValue) != '') {
                            $('#EventSubCategoryListBox').append('<option>' + newListValue + '</option>');
                            vval = $("#hdESCat").val();
                            if (vval == "")
                                $("#hdESCat").val(newListValue);
                            else
                                $("#hdESCat").val(vval + ',' + newListValue);
                        }
                    });

                    //$('#EventSubCategoryListBox option').live('click',function () {
                    //    alert('hi');
                    //    //$("#lblSubCat").show();
                    //    //$("#EventSubCategory1").show();
                    //    //var _this = $(this);
                    //    //$("#EventSubCategory1").val($(_this).text());
                    //});
                    //$('#EventSubCategoryListBox option').on('dblclick', function () {
                    //    debugger;
                    //    alert('HI');
                    //})


                    

                    //$('#EventSubCategoryListBox').find('option').each(function () {
                    //    $(this).live('click', function () {
                    //           alert('HI');
                    //    });
                    //});

                    $("#EventCategoryListBox option").click(function () {                        
                        $("#EventSubCategoryListBox").show();
                        $("#lblSubCatList").show();
                        $("#EventSubCategory1").hide();
                        $("#btnAddSub").hide();
                        $("#lblSubCat").hide();
                        $("#btnCreate").hide();
                        $("#btnReset").show();
                        $("#btnEdit").show();
                        $("#btnDelete").show();
                        $("#divsuccc").hide();
                        var _this = $(this);
                        $("#EventCategory1").val($(_this).text());
                        $("#EventSubCategoryListBox").empty();
                        var eid = $('#EventCategory1').val();
                        $.ajax({
                            url: '@Url.Action("GetSubCategories", "EventCategory")',
                            data: { EvntCtgry: eid },
                            type: "Post",
                            success: function (data) {
                                var strary = data.split(',');
                                for (var i = 0; i < strary.length; i++) {
                                    $('#EventSubCategoryListBox').append('<option>' + strary[i] + '</option>');
                                    
                                }
                                $("#EventSubCategoryListBox option").click(function () {
                                    $("#lblSubCat").show();
                                        $("#EventSubCategory1").show();
                                        var _this = $(this);
                                        $("#EventSubCategory1").val($(_this).text());
                                    
                                });
                            },
                            error: function (data) {
                                alert("Sorry! there is some problem.");
                                return false
                            }
                        });

                    });                                      
                });
            </script>

