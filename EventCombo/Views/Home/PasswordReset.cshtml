@model EventCombo.Models.ResetPasswordViewModel

@{
    ViewBag.Title = "PasswordReset";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid cont_margin">
   
        <div class="col-sm-12">
            <div class="forget_container">
                <h3 class="acnt_title">Reset your password?</h3>
               
                <div class="forget_con_inner">
                    @using (Html.BeginForm("PasswordReset", "Home", FormMethod.Post, new { role = "form", id = "formfrgt", @class = "form-horizontal acnt_form col-md-offset-1" }))
                    {    @Html.AntiForgeryToken()

                        if (ViewData["Message"] != null)
                        {
                            <div class="er_suc_main" id="dvrstsucc">
                                <div class="er_suc_img"></div>
                                <div class="er_suc">@ViewData["Message"] </div>
                            </div>

                        }
                        <div class="err_main">
                            <div class="er_UI_main" id="diverrorst" style="display :none;width:100%">
                                <div class="er_UI_img"></div>
                                <div class="er_suc" id="dvrstsuc">  </div>
                            </div>
                        </div>

                        if (ViewData["Error"]!=null)
                        {

                        <div class="err_main">
                            <div class="er_UI_main" id="diverro1rst" style="width:100%">
                                <div class="er_sys_img"></div>
                                <div class="er_suc" id="dvrstmsg"> @ViewData["Error"] </div>
                            </div>
                        </div>
                        }
                        <div class="clearfix"></div>
                        <div class="form-group ">
                            <label class="col-md-4 control-label acnt_form_label">Password</label>
                            <div class="col-md-8">
                                <div class="row">
                                    <div class="col-xs-12 add_form_bot">
                                        @Html.PasswordFor(m => m.Password, new { @class = "form-control" ,id="txtPaswordrst" })
                                      

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group ">
                            <label class="col-md-4 control-label acnt_form_label">Confirm Password</label>
                            <div class="col-md-8">
                                <div class="row">
                                    <div class="col-xs-12 add_form_bot">
                                        @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", id = "txtPaswordrstconfirm" })


                                    </div>
                                </div>
                            </div>
                        </div>
                        <input type="submit" class="btn btn-info  acnt_btn" value="Reset" id="btnreset" disabled="disabled"  />


                    }
                </div>
            </div>
        </div>

</div>



<script type="text/javascript">
    $(document).ready(function () {

        $('#txtPaswordrst').keyup(function () {

            if ($(this).val() != '' && $('#txtPaswordrstconfirm').val() != '') {
                $('#btnreset').removeAttr("disabled");

            } else {

                $('#btnreset').attr("disabled", true);
            }

        })
        $('#txtPaswordrstconfirm').keyup(function () {
            if ($(this).val() != '' && $('#txtPaswordrst').val() != '') {

                $('#btnreset').removeAttr("disabled");

            } else {

                $('#btnreset').attr("disabled", true);
            }

        })

    });
    function validationReset() {

        var msglogin = "";
        var Password = $("#Password").val();
        var ConfirmPassword = $("#ConfirmPassword").val();
        if (Password.length < 4) {
            $('#Password').focus();
            $('#Password').css("border", "red solid 1px");
            msg += "Password cannot be less than 4! </br>"
              }
     
            if (ConfirmPassword.length < 4) {
                $('#ConfirmPassword').focus();
                $('#ConfirmPassword').css("border", "red solid 1px");
                msg += "Confirm Password cannot be less than 4! </br>"
            }

            if (msg == "") {
                $('#diverrorst').css("display", "none");
                return true;
            }
            else {

                $('.er_suc').html(msg);
                $('#diverrorst').css("display", "block");
                return false;
            }
    }
    $("#btnreset").click(function () {

        var msgloginn = validationReset();

        var flag1login = true;
        if (msgloginn == "") {
            $('#diverrorst').css("display", "none");
            flag1 = true;
        }
        else {
            $('#diverro1rst').css('display', 'none');
            $('.er_suc').html(msgloginn);
            $('#diverrorst').css("display", "block");

            return false;
        }
    });
    </script>