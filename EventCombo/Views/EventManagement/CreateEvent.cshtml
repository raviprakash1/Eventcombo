@using System.Collections.Generic
@using EventCombo.Models
@using EventCombo.Service
@model EventViewModel
@{
  ViewBag.ngApp = "CreateEventApp";
  Layout = "~/Views/Shared/_AngularLayout.cshtml";
}

<style type="text/css">
  md-input-container:not(.md-input-invalid).md-input-has-value label {
    color: rgb(0, 202, 253) !important;
  }

  .gallery-close-btn {
    position: absolute;
    top: 2%;
    right: 2%;
    background: none;
    color: #fff;
    border: none;
    left: auto;
  }

    .gallery-close-btn i {
      font-size: 30px;
    }

  .gallery-prev-next-container {
    top: 50%;
  }

  .gallery-prev-btn {
    position: absolute;
    left: 2%;
    top: 0px;
    background: none;
    color: #fff;
    border: none;
  }

  .gallery-next-btn {
    position: absolute;
    right: 2%;
    top: 0px;
    background: none;
    color: #fff;
    border: none;
  }

  .gallery-prev-next-container i {
    font-size: 45px;
  }
</style>

<script type="text/javascript">
  var link_publish = "@Url.Action("EventConfirmation", "EventConfirmation", new { })";
</script>

<div id="createEventContainer" class="grid" ng-controller="CreateEventController" ng-cloak>
  <form name="MainForm">
    <div>
      <div class="createEvent">Create Event</div>
      <div class="headerCEHeadBtn topButtons row">
        <a href="javascript:void(0);" class="btnSaveHeadCE" ng-click="saveEvent()">SAVE</a>
        <a href="javascript:void(0);" class="btnPreviewHeadCE" ng-click="previewEvent()">PREVIEW</a>
        <a href="javascript:void(0);" class="btnMakeLiveHeadCE" ng-click="publishEvent()">MAKE LIVE NOW</a>
      </div>
      <div ng-show="eventInfo.ErrorEvent">
        <div ng-repeat="message in eventInfo.ErrorMessages">
          <span>{{message}}</span>
        </div>
      </div>
      <div class="eventDetailContainer" style="background-image: url({{eventInfo.BGImage.ImageUrl}}); background-color: {{eventInfo.BackgroundColor}};">
        <div class="EDConInner">
          <div class="c12 EDWebsiteUrlHead">
            <div class="color_pick" style="float:right; margin-right: 15px;">
              <color-picker ng-model="eventInfo.BackgroundColor"
                            color-picker-disabled="false"
                            color-picker-format="'hex'"
                            color-picker-alpha="true"
                            color-picker-swatch="true"
                            color-picker-swatch-pos="left"
                            color-picker-swatch-bootstrap="true"
                            color-picker-swatch-only="true"
                            color-picker-pos="'bottom'"
                            color-picker-case="'lower'"
                            color-picker-inline="false"
                            color-picker-on-change="onBGColorChange()"></color-picker>
            </div>
            <span style="float: right;margin-right: 10px; cursor: pointer;" ng-click="callImageClick('bannerImage'); $event.stopPropagation();" class="noOutline">Design your Banner<i class="material-icons" style="margin-left: 10px;color: #858585;">add_a_photo</i><input type="file" name="bannerimage" id="bannerImage" accept="image/*" style="display: none;" custom-on-change="uploadBGImage" /></span>

            <div class="c6" style="display:inline; ">
              <md-input-container>
                <label class="websiteURLTxtLblCls">Enter Unique URL</label>
                <input class="websiteURLTxtboxCls" ng-model="eventInfo.EventUrl" />
              </md-input-container>
              <span class="websiteUrlEnd">.eventcombo.com</span>

            </div>

          </div>

          <div class="eventDetailTxtFields" style="opacity: 0.8;">
            <div class="eventDtkHeadCon">
              <div class="EDTxtEventName">
                <textarea ng-model="eventInfo.EventTitle" placeholder="Enter the name of your event here" class="EDTxtENTxtBox textAreaHeight"></textarea>
              </div>

              <div class="EDTxtVenueName">
                <textarea ng-model="eventInfo.VenueName" placeholder="Enter the venue name here" class="EDTxtVNTxtBox textAreaHeight"></textarea>
              </div>

              <div class="EDTxtVenueAddress">
                <i class="material-icons" style="position:absolute;">place</i>
                <input type="text" ng-model="eventInfo.Address" placeholder="Enter venue address" class="EDTxtVATxtBox" googleplace />
              </div>

              <div class="EDTxtEventDateTime">
                <i class="material-icons" style="position:absolute;">query_builder</i>
                <span class="pickuptimeTxt noOutline" ng-click="showDateTimeDialog = true">{{selectedDateTimeText}}</span>
              </div>
            </div>

            <div class="eventDtkBodyCon">
              <div class="EDTxtEventChkBxCon">
                <md-checkbox ng-model="eventInfo.ShowMap" ng-true-value="'Y'" ng-false-value="'N'" class="blue">
                  Show map on event page
                </md-checkbox>
                <md-checkbox ng-model="eventInfo.OnlineEvent" class="blue onlineEventConChkBox">
                  Online Event
                </md-checkbox>
              </div>
            </div>
          </div>

          <div aria-label="Pick the date here" class="pickupDateContainer" ng-show="showDateTimeDialog">
            <md-toolbar>
              <div class="md-toolbar-tools dialogheader">
                <h2>
                  <i class="material-icons" style="position: absolute; top: 20px;">query_builder</i>
                  <span style="padding-left: 30px;">Pick the date here</span>
                </h2>
                <span flex></span>
                <md-button class="md-icon-button" ng-click="showDateTimeDialog = false;">
                  <md-icon md-svg-src="img/icons/ic_close_24px.svg" aria-label="Close dialog"></md-icon>
                </md-button>
              </div>
            </md-toolbar>
            <div>
              <md-tabs md-dynamic-height md-border-bottom md-selected="dateTab">
                <md-tab label="SINGLE EVENT">
                  <md-content class="md-padding">
                    <div class="firstdiv">
                      <div class="datediv">
                        <div class="date-picker-row" flex-gt-sm>
                          <label>Start Date</label>
                          <md-datepicker name="singleStartDate" ng-model="startingDate"
                                         ng-change="startDateChange();" md-min-date="minDate"></md-datepicker>
                          <div class="validation-datepicker-messages" ng-messages="MainForm.singleStartDate.$error">
                            <div ng-message="mindate">Date is too early.</div>
                          </div>
                        </div>
                        <md-input-container style="margin-right: 10px; margin-left: 20px;">
                          <md-select ng-model="selectedstartTime">
                            <md-option ng-repeat="startTime in eventInfo.DateInfo.TimeList" ng-value="startTime">{{startTime.TimeString}}</md-option>
                          </md-select>
                        </md-input-container>
                      </div>
                    </div>
                    <div class="seconddiv">
                      <div class="date-picker-row" flex-gt-sm>
                        <label>End Date</label>
                        <md-datepicker name="singleEndDate" ng-model="endingDate"
                                       ng-change="endDateChange();" md-min-date="minDate"></md-datepicker>
                        <div class="validation-datepicker-messages" ng-messages="MainForm.singleEndDate.$error">
                          <div ng-message="mindate">Date is too early.</div>
                        </div>
                      </div>
                      <md-input-container style="margin-right: 10px; margin-left: 20px;">
                        <md-select ng-model="selectedendTime">
                          <md-option ng-repeat="endTime in eventInfo.DateInfo.TimeList" ng-value="endTime">{{endTime.TimeString}}</md-option>
                        </md-select>
                      </md-input-container>
                    </div>
                    <div class="thirddiv" style="float: left;">
                      <md-input-container style="margin-right: 10px;">
                        <label>Time Zone</label>
                        <md-select ng-model="eventInfo.TimeZone">
                          <md-option ng-repeat="tzone1 in eventInfo.TimeZones" ng-value="tzone1.TimeZoneId">{{tzone1.TimeZoneName}}</md-option>
                        </md-select>
                      </md-input-container>
                    </div>
                  </md-content>

                  <div layout="row">

                    <span flex></span>
                    <md-button ng-click="showDateTimeDialog = false;" style="color: #888; font-weight: bold;">
                      CANCEL
                    </md-button>
                    <md-button ng-click="showDates();" style="margin-right:20px; color: rgb(63,81,181); font-weight: bold;">
                      DONE
                    </md-button>
                  </div>
                </md-tab>
                <md-tab label="MULTIPLE EVENT">
                  <md-content class="md-padding">
                    <div class="firstdiv second-tab" style="padding: 0px 30px;width: 200px;">
                      <md-input-container style="margin-right: 10px;">
                        <label>Occurence</label>
                        <md-select ng-model="occurence">
                          <md-option ng-repeat="occ in occurences" ng-value="occ">{{occ}}</md-option>
                        </md-select>
                      </md-input-container>

                    </div>
                    <div class="seconddiv second-tab">
                      <div class="datediv" style="margin-top: 13px;margin-left: 30px" ng-show="occurence == 'Monthly'">
                        <div class="date-picker-row" flex-gt-sm>
                          <label>Start Date</label>
                          <md-datepicker name="multiStartDate" ng-model="startingDate"
                                         ng-change="startDateChange();" md-min-date="minDate"></md-datepicker>
                          <div class="validation-datepicker-messages" ng-messages="MainForm.multiStartDate.$error">
                            <div ng-message="mindate">Date is too early.</div>
                          </div>
                        </div>
                        <div class="date-picker-row" flex-gt-sm>
                          <label>End Date</label>
                          <md-datepicker name="multiEndDate" ng-model="endingDate"
                                         ng-change="endDateChange();" md-min-date="minDate"></md-datepicker>
                          <div class="validation-datepicker-messages" ng-messages="MainForm.multiEndDate.$error">
                            <div ng-message="mindate">Date is too early.</div>
                          </div>
                        </div>
                      </div>

                      <div class="weekdiv" style="margin-left:57px;" ng-show="occurence == 'Weekly'">
                        <md-input-container style=" margin-right 10px;">
                          <label>Week Days</label>
                          <md-select multiple ng-model="eventInfo.Weekdays">
                            <md-option ng-repeat="day in weekdays" value="{{day}}">{{day}}</md-option>
                          </md-select>
                        </md-input-container>
                      </div>
                      <div class="time-div" ng-show="occurence != 'Single'">
                        <md-input-container flex-gt-md=" 30">
                          <label>Start time</label>
                          <md-select ng-model="selectedstartTime">
                            <md-option ng-repeat="starttime in eventInfo.DateInfo.TimeList" ng-value="starttime">{{starttime.TimeString}}</md-option>
                          </md-select>
                        </md-input-container>
                        <md-input-container style="margin-left: 80px;">
                          <label>End time</label>
                          <md-select ng-model="selectedendTime">
                            <md-option ng-repeat="time in eventInfo.DateInfo.TimeList" ng-value="time">{{time.TimeString}}</md-option>
                          </md-select>
                        </md-input-container>
                      </div>
                      <div class="time-zone" ng-show="occurence != 'Single'">
                        <md-input-container style=" margin-right:10px;">
                          <label>Time Zone</label>
                          <md-select ng-model="eventInfo.TimeZone">
                            <md-option ng-repeat="tzone2 in eventInfo.TimeZones" ng-value="tzone2.TimeZoneId">{{tzone2.TimeZoneName}}</md-option>
                          </md-select>
                        </md-input-container>
                      </div>
                    </div>

                  </md-content>

                  <div layout="row">

                    <span flex></span>
                    <md-button ng-click="showDateTimeDialog = false;" style="color: #888; font-weight: bold;">
                      CANCEL
                    </md-button>
                    <md-button ng-click="showMultipleDates();" style="margin-right:20px; color: rgb(63,81,181); font-weight: bold;">
                      DONE
                    </md-button>
                  </div>
                </md-tab>

              </md-tabs>
            </div>
          </div>
        </div>
      </div>

      <div class="TellUs">
        <div class="eDBitMoreHead">
          <div class="eDBitMoreInnerHead">
            Tell us a bitmore...
          </div>
        </div>
        <div class="OrganizerBody">

          <div class="organiserDiv md-padding">

            <md-input-container style="margin-right: 10px;">
              <label>Type Of event</label>
              <md-select ng-model="eventInfo.EventTypeID">
                <md-option ng-repeat="etype in eventInfo.EventTypeList" value="{{etype.EventTypeId}}">{{etype.EventType}}</md-option>
              </md-select>
            </md-input-container>

            <md-input-container style="margin-right: 10px;">
              <label>Category</label>
              <md-select ng-model="eventInfo.EventCategoryID" class="paras" ng-change="onCategoryChange();">
                <md-option ng-repeat="category in eventInfo.EventCategoryList" value="{{category.EventCategoryId}}">{{category.EventCategory}}</md-option>
              </md-select>
            </md-input-container>

            <md-input-container style="margin-right: 10px;">
              <label>Subcategory</label>
              <md-select ng-model="eventInfo.EventSubCategoryID" class="paras">
                <md-option ng-repeat="subcat in subCategories" value="{{subcat.EventSubCategoryId}}">{{subcat.EventSubCategory}}</md-option>
              </md-select>
            </md-input-container>

            <span style="float: right; text-transform:uppercase; cursor: pointer;" ng-click="callImageClick('tellusImage'); $event.stopPropagation();" class="noOutline">
              <span style="display: inline-block;float: left;padding-right: 15px;">Have a filter?upload it here</span>
              <i class="material-icons" style="margin-left: -10px;color: #858585;display: inline-block;position: absolute;margin-top: -5px;">add_a_photo</i>
              <input type="file" name="tellusimage" id="tellusImage" accept="image/*" style="display: none;" custom-on-change="uploadEventImage" />
            </span>

          </div>
          <div class="More">
            <textarea class="textArea" ui-tinymce="tinymceOptions" ng-model="eventInfo.EventDescription">
              <span> Tell us about yourself</span>
            </textarea>
          </div>
          <div style="height: 150px;">
            <div style="margin-top: 10px;">
              <span style="float: right">
                <span style="display: inline-block;float: left;padding-right: 31px;">A Whole Gallery? Sure!</span>
                <i data-ng-click='openGallery()' class="material-icons" style="cursor:pointer;margin-left: -25px;color: #858585;display: inline-block;position: absolute;margin-top: -5px;">collections</i>
              </span>
            </div>
            <div class="imageGallery" style="clear: both; padding-top: 5px;">
              <div style="float: right;">
                <div class="tellus_pics" ng-repeat="img in eventInfo.EventImages">
                  <i class="material-icons closeIconImage" ng-click="deleteEventImage(img)" style="cursor:pointer;">clear</i>
                  <img src="{{img.ImageUrl}}" style="height:100px; width: 100px" />
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
      <div class="Organiser">
        <div class="eDBitMoreHead">
          <div class="eDBitMoreInnerHead">
            Who is the Organizer?
          </div>
        </div>
        <div class="OrganizerBody">
          <div>
            <md-button class="md-raised addTicketBtnCls" style="float:unset !important;" ng-click="organizerAdd()">
              Add Organizer
            </md-button>
          </div>

          <div class="organiserDiv md-padding">
            <md-input-container style="margin-right: 10px;">
              <label>Select Organizer</label>
              <md-select ng-model="eventInfo.InternalOrganizerId">
                <md-option ng-repeat="org in eventInfo.OrganizerList" value="{{org.InternalId}}">{{org.Orgnizer_Name}}</md-option>
              </md-select>
            </md-input-container>
            <md-button class="md-raised addTicketBtnCls" style="float:unset !important;" ng-click="editOrganiser();">
              Edit
            </md-button>
          </div>

          <div class="newOrganizer" ng-show="(organizerEditState == 'Edit') || (organizerEditState == 'Add')">
            <ng-form name="OrganizerForm">
              <md-input-container>
                <label class="organizerText">Organizer Name</label>
                <input class="websiteURLTxtboxCls1" name="organizerName" ng-model="eventInfo.CurrentOrganizer.Orgnizer_Name" required />
                <div ng-messages="OrganizerForm.organizerName.$error" ng-show="OrganizerForm.organizerName.$touched">
                  <div ng-message="required">Organizer name is required.</div>
                </div>
              </md-input-container>

              <md-input-container>
                <label class="organizerText">Organizer Email</label>
                <input type="email" name="organizerEmail" class="btn-text" ng-model="eventInfo.CurrentOrganizer.Organizer_Email" required="Organizer e-mail is required" />
                <div ng-messages="OrganizerForm.organizerEmail.$error"
                     ng-show="(OrganizerForm.organizerEmail.$error.email || OrganizerForm.organizerEmail.$error.required) && OrganizerForm.organizerEmail.$touched">
                  <div ng-message="required">Organizer email is required.</div>
                  <div ng-message="email">This field must be a valid email address.</div>
                </div>
              </md-input-container>

              <div class="tellus_pics" style="float: right;" ng-show="eventInfo.CurrentOrganizer.Image.ImageUrl">
                <i class="material-icons closeIconImage" ng-click="deleteOrganizerImage()" style="cursor:pointer;">clear</i>
                <img src="{{eventInfo.CurrentOrganizer.Image.ImageUrl}}" style="height:100px; width: 100px" />
              </div>

              <textarea class="textArea" ui-tinymce="tinymceOptions" ng-model="eventInfo.CurrentOrganizer.Organizer_Desc">
                <span> Organizer Info</span>
              </textarea>
              <span class="newOrganiserBottomText noOutline" style="float: right;  margin-top: 15px; cursor: pointer;" ng-click="callImageClick('organiserImage'); $event.stopPropagation();">
                <span style="display: inline-block;float: left;padding-right: 31px;">Have a logo or picture?</span>
                <i class="material-icons" style="margin-left: -25px;color: #858585;display: inline-block;position: absolute;margin-top: -5px;">add_a_photo</i>
                <input type="file" name="image" id="organiserImage" accept="image/*" style="display: none;" custom-on-change="uploadOrganizerImage" />
              </span>

              <div class="organiserbottomDiv" style="margin-top:10px">
                <md-checkbox class="blue" ng-model="eventInfo.CurrentOrganizer.IncludeSocialLinks" ng-true-value="true" ng-false-value="false">
                  Include organizer link to social media
                </md-checkbox>
                <div ng-show="eventInfo.CurrentOrganizer.IncludeSocialLinks">
                  <div class="socialMediaIcon" style="margin-left: 15px">
                    <img src="~/Images/AMaterial/facebook.svg" style="height: 25px;" />
                    <md-input-container>
                      <label class="organizerText">Facebook link</label>
                      <input class="btn-text" ng-model="eventInfo.CurrentOrganizer.Organizer_FBLink" style="width: 250px;" />
                    </md-input-container>
                  </div>
                  <div class="socialMediaIcon" style="margin-left: 15px">
                    <img src="~/Images/AMaterial/twitter.svg" style="height: 25px;" />
                    <md-input-container>
                      <label class="organizerText">Twitter link</label>
                      <input class="btn-text" ng-model="eventInfo.CurrentOrganizer.Organizer_Twitter" style="width: 250px;" />
                    </md-input-container>
                  </div>
                  <div class="socialMediaIcon" style="margin-left: 15px">
                    <img src="~/Images/AMaterial/linkedin.svg" style="height: 25px;" />
                    <md-input-container>
                      <label class="organizerText">LinkedIn link</label>
                      <input class="btn-text" ng-model="eventInfo.CurrentOrganizer.Organizer_Linkedin" style="width: 250px;" />
                    </md-input-container>
                  </div>
                </div>
              </div>

              <div class="ticketButtonDiv" style="margin-bottom: 10px;">
                <md-button class="md-raised addTicketBtnCls" style="float:unset !important;" ng-show="organizerEditState == 'Add'" ng-click="saveNewOrganizer()">
                  Save Organizer
                </md-button>
                <md-button class="md-raised addTicketBtnCls" style="float:unset !important;" ng-show="organizerEditState == 'Edit'" ng-click="saveEditedOrganizer()">
                  Update Organizer
                </md-button>
              </div>
            </ng-form>
          </div>
        </div>
      </div>

      <div class="eventDtlBody">
        <div class="eDAddTicketHead">
          <div class="eDAddTicketInnerHead">Let's add some tickets!</div>
        </div>
        <div class="eDAddTicketBody">

          <div class="ticketSubDivContainer">

            <div class="paidTicketContentCo" drag-drop-elements ng-repeat="ticket in eventInfo.TicketList">
              <ng-form name="TicketForm">
                <div class="paidTicketContentCoHeader">
                  <div layout="row" layout-xs="column">
                    <span class="iconDragItem" draggable="true">
                      <i class="material-icons">reorder</i>
                    </span>
                    <div flex>
                      <md-input-container class="ticketContTxtBox">
                        <label class="ticketNameLbl">Enter Ticket Name</label>
                        <input class="ticketNameLblTxtboxCls" ng-model="ticket.T_name" required />
                      </md-input-container>
                    </div>
                    <div flex>
                      <md-input-container class="ticketContTxtBox qualityMdCon">
                        <label class="ticketQualityLbl">Quantity</label>
                        <input input value=0 type="text" ng-model="ticket.Qty_Available" class="ticketQualityLblTxtboxCls" required check-quantity numbers-only />
                      </md-input-container>
                    </div>
                    <div flex ng-show="ticket.TicketTypeID == 2">
                      <md-input-container class="ticketContTxtBox qualityMdCon">
                        <label class="ticketPriceLbl">$ Price</label>
                        <input type="number" class="ticketPriceLblTxtboxCls" required ng-model="ticket.Price" ng-change="onPriceChange(ticket)" ng-blur="onPriceBlur(ticket)" input />
                      </md-input-container>
                    </div>
                    <div flex ng-show="ticket.TicketTypeID == 2">
                      <md-input-container class="ticketContTxtBox qualityMdCon">
                        <label class="ticketDiscountLbl">$ Discount</label>
                        <input input type="number" class="ticketDiscountLblTxtboxCls" required ng-model="ticket.T_Discount" ng-change="onPriceChange(ticket)" ng-blur="onPriceBlur(ticket)" />
                      </md-input-container>
                    </div>
                    <div flex ng-show="ticket.TicketTypeID != 2">
                      <div class="donationTxtCls">{{ticket.TicketType.TicketType}}</div>
                    </div>
                    <div flex class="trashIconConCls">
                      <span style="cursor: pointer;" class="trashIconCls" ng-click="deleteTicket(ticket)">
                        <i class="material-icons">delete</i>
                      </span>
                    </div>
                  </div>
                  <div layout="row">
                    <div flex>
                      <a class="showHideOptionCls" href="javascript:void(0)" ng-click="ticket.expandedOptions = !ticket.expandedOptions" ng-init="ticket.expandedOptions = false">
                        <span class="arrowDownOptions">
                          <i class="material-icons moreOptionright" ng-show="!ticket.expandedOptions">keyboard_arrow_right</i>
                          <i class="material-icons moreOptiondown" ng-show="ticket.expandedOptions">keyboard_arrow_down</i>
                        </span>
                        <span class="moreOptionTxt">More Options</span>
                      </a>
                    </div>
                    <div flex style="position: relative;" ng-show="ticket.TicketTypeID == 2">
                      <span class="buyerTotalTxt">Buyer total: ${{ticket.TotalPrice.toFixed(2)}}</span>
                      <span class="infoOptionIcon" ng-mouseenter="ticket.showBuyerInfo = true" ng-mouseleave="ticket.showBuyerInfo = false" ng-init="ticket.showBuyerInfo = false">
                        <i class="material-icons">info</i>
                      </span>
                      <div class="buyerInfo" ng-show="ticket.showBuyerInfo">
                        <div>Ticket Price: ${{ticket.Price.toFixed(2)}} </div>
                        <div>Fee: ${{ticket.Price > 0 ? ticket.EC_Fee.toFixed(2) : '0.00'}}</div>
                        <div>Discount: ${{ticket.Price > 0 ? ticket.T_Discount.toFixed(2) : '0.00'}} </div>
                        <div>Total: ${{ticket.TotalPrice.toFixed(2)}}</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="paidTicketContentCoBody" ng-show="ticket.expandedOptions">
                  <div class="pTCBTxt" ng-show="ticket.TicketTypeID != 3">Tickets allowed per order</div>
                  <div class="minMaxTxtBox" ng-show="ticket.TicketTypeID != 3">
                    <md-input-container class="ticketMinTxtBoxCon">
                      <label class="ticketMinTxtBoxLbl">Minimum</label>
                      <input type="text" ng-model="ticket.Min_T_Qty" class="ticketMinTxtBoxCls" numbers-only />
                    </md-input-container>
                    <md-input-container class="ticketMaxTxtBoxCon">
                      <label class="ticketMaxTxtBoxLbl">Maximum</label>
                      <input type="text" ng-model="ticket.Max_T_Qty" class="ticketMaxTxtBoxCls" numbers-only />
                    </md-input-container>
                  </div>
                  <div class="ticketChkBoxCon" ng-show="ticket.TicketTypeID == 2">
                    <md-input-container>
                      <label class="ticketDespTxtBoxLbl">Fee</label>
                      <md-select style="width: 300px;" ng-model="ticket.Fees_Type" ng-change="onPriceChange(ticket)">
                        <md-option value="0">Customer pays the fees</md-option>
                        <md-option value="1">I absorb the fee</md-option>
                      </md-select>
                    </md-input-container>
                  </div>
                  <div class="ticketDespCon">
                    <md-input-container class="ticketDespTxtBoxCon">
                      <label class="ticketDespTxtBoxLbl">Enter Ticket Description</label>
                      <input ng-model="ticket.T_Desc" class="ticketDespTxtBoxCls" />
                    </md-input-container>
                  </div>
                  <div class="ticketChkBoxCon">
                    <md-checkbox class="blue" ng-model="ticket.Show_T_Desc" ng-true-value="'1'" ng-false-value="'0'">Show ticket description on the event page</md-checkbox>
                  </div>
                  <div class="ticketStartEndDate">
                    <div class="date-picker-row" flex-gt-sm>
                      <label>Sales start date</label>
                      <md-datepicker name="ticketStartDate" ng-model="ticket.localSaleStartDate" md-min-date="minDate"></md-datepicker>
                      <div class="validation-datepicker-messages" ng-messages="TicketForm.ticketStartDate.$error">
                        <div ng-message="mindate">Date is too early.</div>
                      </div>
                    </div>
                    <div class="date-picker-row" flex-gt-sm>
                      <label>Sales end date</label>
                      <md-datepicker name="ticketEndDate" ng-model="ticket.localSaleEndDate" md-min-date="minDate"></md-datepicker>
                      <div class="validation-datepicker-messages" ng-messages="TicketForm.ticketEndDate.$error">
                        <div ng-message="mindate">Date is too early.</div>
                      </div>
                    </div>
                  </div>
                  <div class="ticketChkBoxCon">
                    <md-checkbox class="blue" ng-model="ticket.Hide_Ticket" ng-true-value="'1'" ng-false-value="'0'">Hide this ticket type</md-checkbox>
                  </div>
                  <div class="ticketChkBoxCon">
                    <md-radio-group ng-model="ticket.T_AutoSechduleType">
                      <md-radio-button value="0" class="md-primary">When ticket is not on sale</md-radio-button>
                      <md-radio-button value="1" class="md-primary">At custom date and time</md-radio-button>
                    </md-radio-group>
                  </div>
                  <div class="hideUntilAfterCon" ng-show="ticket.T_AutoSechduleType == 1">
                    <md-checkbox class="blue" style="width: 300px !important;" ng-model="ticket.useUntilDate" ng-true-value="'1'" ng-false-value="'0'" ng-init="ticket.useUntilDate = '0'">
                      <md-datepicker ng-model="ticket.localHideUntillDate" md-placeholder="Hide until date" style="width: 300px !important;"></md-datepicker>
                    </md-checkbox>
                    <md-checkbox class="blue" ng-model="ticket.useAfterDate" ng-true-value="'1'" ng-false-value="'0'" ng-init="ticket.useAfterDate = '0'">
                      <md-datepicker ng-model="ticket.localHideAfterDate" md-placeholder="Hide after date"></md-datepicker>
                    </md-checkbox>
                  </div>
                  <div class="markSoldCon">
                    <md-checkbox class="blue" ng-model="ticket.T_Mark_SoldOut" ng-true-value="'1'" ng-false-value="'0'">Mark as sold out</md-checkbox>
                  </div>
                  <div class="displayRemCon" ng-show="ticket.TicketTypeID != 3">
                    <md-checkbox class="blue" ng-model="ticket.T_Displayremaining" ng-true-value="'1'" ng-false-value="'0'">Display remaining tickets</md-checkbox>
                  </div>
                </div>
              </ng-form>
            </div>
          </div>
        </div>

        <div class="totalCapacity">
          Total capacity: <span>{{getTotalTickets()}}</span>
        </div>


        <div class="addTicketsButtons">
          <div class="ticketButtonDiv">
            <md-button ng-click="addTicket(2)" class="md-raised addTicketBtnCls">
              <img src="~/Images/AMaterial/plusIcon.png" />
              ADD PAID TICKET
            </md-button>
          </div>

          <div class="ticketButtonDiv">
            <md-button ng-click="addTicket(1)" class="md-raised addTicketBtnCls">
              <img src="~/Images/AMaterial/plusIcon.png" />
              ADD FREE TICKET
            </md-button>
          </div>

          <div class="ticketButtonDiv">
            <md-button ng-click="addTicket(3)" class="md-raised addTicketBtnCls">
              <img src="~/Images/AMaterial/plusIcon.png" />
              ADD DONATION
            </md-button>
          </div>

        </div>
      </div>

      <md-checkbox class="blue" style="font-weight: unset !important;display:block; margin-left: 134px; margin-top: 60px" ng-model="eventInfo.Ticket_DAdress" ng-true-value="'Y'" ng-false-value="'N'">
        Ticket Delivery Address
      </md-checkbox>
      <md-checkbox class="blue" style="font-weight: unset !important; display:block;margin-left: 134px;" ng-model="eventInfo.Ticket_showremain" ng-true-value="'Y'" ng-false-value="'N'">
        Show remianing tickets
      </md-checkbox>
      <md-checkbox class="blue" style="font-weight: unset !important; margin-left: 134px;" ng-model="eventInfo.Ticket_showvariable" ng-true-value="'Y'" ng-false-value="'N'">
        Variable charges
      </md-checkbox>


      <div class="variabeDetails" style="max-width: 1100px;margin: 0px auto;padding: 5px 0px;" ng-show="eventInfo.Ticket_showvariable == 'Y'">
        <md-button class="md-raised addTicketBtnCls" ng-click="addVarCharge()">
          ADD
        </md-button>
        <div class="variableOptions">
          <div ng-repeat="varCharge in eventInfo.VariableChargesList">
            <md-input-container class="ticketDespTxtBoxCon" style="margin-left: 20px; width: 250px;">
              <label class="ticketDespTxtBoxLbl">Variable charge description</label>
              <input class="ticketDespTxtBoxCls" name="variableChargeDescription" ng-model="varCharge.VariableDesc" required />
              <div ng-messages="MainForm.variableChargeDescription.$error">
                <div ng-message="required">Variable charge description is required.</div>
              </div>
            </md-input-container>
            <span style="margin-left: 20px">  $</span>
            <md-input-container class="ticketDespTxtBoxCon variableType" style="margin-left: 20px; width:150px">
              <label class="ticketDespTxtBoxLbl">Type</label>
              <md-select class="ticketDespTxtBoxCls" ng-model="varCharge.Optional">
                <md-option ng-repeat="type in vartypes" value="{{type.varId}}">{{type.varName}}</md-option>
              </md-select>
            </md-input-container>
            <span style="margin-left: 20px">  $</span>
            <md-input-container class="ticketDespTxtBoxCon" style="margin-left: 20px; width: 100px;">
              <label class="ticketDespTxtBoxLbl variableAmount">Amount</label>
              <input class="ticketDespTxtBoxCls" type="number" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="1.00" ng-model="varCharge.Price" required />
            </md-input-container>
            <i class="material-icons" style="float: right;margin-right: 20px; margin-top: 13px; cursor: pointer;" ng-click="deleteVarCharge(varCharge)">clear</i>
          </div>
        </div>
      </div>
    </div>

    <div class="Organiser" style="margin-top: 40px;">
      <div class="eDBitMoreHead">
        <div class="eDBitMoreInnerHead">
          Get Them Talking about it!
        </div>
      </div>
      <div class="OrganizerBody">
        <md-checkbox class="blue" style="font-weight: unset !important; display: block;" ng-model="eventInfo.EnableFBDiscussion" ng-true-value="'Y'" ng-false-value="'N'">
          Enable Discussion
        </md-checkbox>

        <md-checkbox class="blue" style="font-weight: unset !important" ng-model="eventInfo.PublishOnFB" ng-true-value="'Y'" ng-false-value="'N'">
          Publish Event on facebook
        </md-checkbox>

        <md-radio-group ng-model="eventInfo.EventPrivacy">
          <md-radio-button ng-value="'Public'" class="md-primary" style="width: 120px;">Public Event</md-radio-button>
          <md-radio-button ng-value="'Private'" class="md-primary" style="width: 120px;">Private Event</md-radio-button>
        </md-radio-group>

        <div class="privateEvents" ng-show="eventInfo.EventPrivacy == 'Private'">
          <md-checkbox class="blue block" style="font-weight: unset !important" ng-model="eventInfo.Private_ShareOnFB" ng-true-value="'Y'" ng-false-value="'N'">
            Attendees can share this on facebook,linkedin and twitter
          </md-checkbox>
          <md-checkbox class="blue block" style="font-weight: unset !important" ng-model="eventInfo.Private_GuestOnly" ng-true-value="'Y'" ng-false-value="'N'">
            This event is for invite only
          </md-checkbox>
          <md-checkbox class="blue block" style="font-weight: unset !important" ng-model="eventInfo.isPasswordRequired" ng-true-value="'Y'" ng-false-value="'N'" ng-init="eventInfo.isPasswordRequired = 'N'">
            Requires password to view the event page
          </md-checkbox>
          <md-input-container class="ticketEndDateTxtBoxCon block" style="width: 200px;" ng-show="eventInfo.isPasswordRequired == 'Y'">
            <label class="ticketEndDateTxtBoxLbl">Enter Password</label>
            <input type="password" class="ticketEndDateTxtBoxCls" ng-model="eventInfo.Private_Password" />
          </md-input-container>
        </div>
      </div>
    </div>



    <div class="headerCEHeadBtn">
      <a href="javascript:void(0);" class="btnSaveHeadCE" ng-click="saveEvent()">SAVE</a>
      <a href="javascript:void(0);" class="btnPreviewHeadCE" ng-click="previewEvent()">PREVIEW</a>
      <a href="javascript:void(0);" class="btnMakeLiveHeadCE" ng-click="publishEvent()">MAKE LIVE NOW</a>
    </div>
    <div ng-show="eventInfo.ErrorEvent">
      <div ng-repeat="message in eventInfo.ErrorMessages">
        <span>{{message}}</span>
      </div>
    </div>
  </form>
</div>

@section ScriptSection
{
  <script src="@Url.Content("~/Scripts/AMaterial/main.js")"></script>
  <script type="text/javascript">

    function changeBackgroundImage() {
      $('.eventDetailContainer').css({ 'background-image': 'url(~/Images/AMaterial/pic1.jpg)' });
    }
  </script>
}
