<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="javascript:void(0)">
    <title>eventcombo</title>
    <!-- Bootstrap core CSS -->
    <link href="~/Content/bootstrap.css" rel="stylesheet" />


    <link href="~/Content/jquery.timepicker.css" rel="stylesheet" />


    <link href="~/Content/ec-select.css" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="~/Content/eventcombo.css" rel="stylesheet" />
    <!--  <link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"> -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/main.js"></script>

    <script src="~/Scripts/jquery.timepicker.js"></script>

    <script src="~/Scripts/jquery.cookie.js"></script>

    <script src="~/Scripts/ec-select.js"></script>

    <style type="text/css">
        html {
            overflow-x: hidden;
            overflow-y: auto;
        }
    </style>
</head>

<body>


    <div id="fb-root"></div>
    <!-- Header -->
    <div class="home_fixed_header" id="divmain">
        <div class="container-fluid headr_main " id="divsecmain">
            <div class="row">
                <div class="col-sm-6">
                    <a class="logo" href="/Home/Index"><img src=" ~/Images/EventCombo_Red.jpg" /></a>
                </div>
                @if (HttpContext.Current.Session["AppId"] != null)
                {
                    <div class="col-sm-5 head_left_nav">
                        <ul class="navbar-right frnt-top-header  xs-signup-height">




                            <li class="msg_icn"><span>12</span> </li>

                            <li><a href="#">Welcome @{Html.RenderAction("UserName", "Home");}!</a> </li>
                            <li>
                                @Html.ActionLink("My Account", "MyAccount", "Account", routeValues: null, htmlAttributes: new { title = "Account" })
                            </li>
                            <li>
                                @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
                                {
                                    <a href="javascript:document.getElementById('logoutForm').submit()">Log Out </a>
                                }
                            </li>






                        </ul>

                    </div>

                                }
                                else
                                {
                                    <div class="col-sm-5 head_left_nav clearfix">
                                        <ul class="navbar-right frnt-top-header xs-signup-height">

                                            <li><a href="javascript:void(0)" data-toggle="modal" data-target="#myModal" id="loginPopup">LogIn | SignUp </a>  </li>

                                        </ul>

                                    </div>

                                }

                <div class="col-sm-1 text-right">
                    <div class="social_icn ">
                        <a href="http://www.facebook.com/Eventcombo" target="_blank"><img src="~/Images/fb.png" /></a>
                        <a href="http://www.twitter.com/Eventcombo" target="_blank"><img src="~/Images/tw.png" /></a>
                    </div>
                </div>
                <div class="Fix_Head" title="Turn on to fix header">
                    <label class="switch">
                        <input type="checkbox" class="switch-input" checked id="idchecked" onchange="changeheader(this.id);">
                        <span class="switch-label" data-on="On" data-off="Off"></span>
                        <span class="switch-handle"></span>
                    </label>
                </div>
            </div>
        </div>

        @if (HttpContext.Current.Session["Fromname"] == null)
        {
     <!-- Sub Header -->
            <div class="container-fluid cont_margin2" id="divcontmain">
                <div class="row cyan-line-new">
                    <div class="col-sm-3">
                        <form>
                            <div class="input-group stylish-input-group">
                                <input type="text" class="form-control place_hold" onfocus="javascript:this.value=''" placeholder="Search for Event">
                                <span class="input-group-addon">
                                    <button type="submit">
                                        <span class="glyphicon glyphicon-search"></span>
                                    </button>
                                </span>
                            </div>
                        </form>
                    </div>
                    <div class="col-sm-2 disc_title_head">
                        @*@Html.ActionLink("Discover Events", "DiscoverEvents", "Home")*@
                        <a href="javascript:void(0)" onclick="setsession(this.id);" id='discover'>Discover Events</a>
                    </div>
                    <div class="col-sm-2 disc_title_head"><a href="#" onclick="setsession(this.id);" id='GetBuzz'>Get the Buzz</a>@*@Html.ActionLink("", "GetBuzz", "Home")*@  </div>
                    <div class="col-sm-5 frnt_cret_evnt">
                        <div class="psst">
                            <a href="javascript:void(0)" onclick="checksession();">Create Event</a>
                        </div>


                    </div>

                </div>
            </div>
        <!-- Body Section -->
        }
        else
        {

            if (HttpContext.Current.Session["Fromname"].ToString() == "events")
            {

                <div class="col-sm-12 filter_sep cont_margin">
                    <img src="~/Images/desi-events-logo.gif">
                    <div class="cus_left_kick"><</div>
                    @if (HttpContext.Current.Session["logo"] != null)
                    {
                        if (HttpContext.Current.Session["logo"].ToString() == "Organizer")
                        {
                            <div class="crt_inn_event"><a href="javascript:void(0)" onclick="checksession();">Create an Event</a></div>
                        }
                    }
                </div>

            }
            else
            {

     <!-- Sub Header -->
                <div class="container-fluid cont_margin2" id="divcontmain">
                    <div class="row cyan-line-new">
                        <div class="col-sm-3">
                            <form>
                                <div class="input-group stylish-input-group">
                                    <input type="text" class="form-control place_hold" id="txtSearch" onfocus="javascript:this.value=''" placeholder="Search for Event">
                                    <span class="input-group-addon">
                                        <button type="button" id="btSearchEvent">
                                            <span class="glyphicon glyphicon-search"></span>
                                        </button>
                                    </span>
                                </div>
                            </form>
                        </div>
                        <div class="col-sm-2 disc_title_head">
                            @*@Html.ActionLink("Discover Events", "DiscoverEvents", "Home")*@
                            <a href="javascript:void(0)" onclick="setsession(this.id);" id='discover'>Discover Events</a>
                        </div>
                        <div class="col-sm-2 disc_title_head"><a href="javascript:void(0)" onclick="setsession(this.id);" id='GetBuzz'>Get the Buzz</a>@*@Html.ActionLink("", "GetBuzz", "Home")*@  </div>
                        <div class="col-sm-5 frnt_cret_evnt">
                            <div class="psst">
                                <a href="javascript:void(0)" onclick="checksession();">Create Event</a>
                            </div>


                        </div>

                    </div>
                </div>
        <!-- Body Section -->

            }

        }



    </div>
    <div>
        @RenderBody()
    </div>

    @if (HttpContext.Current.Session["Fromname"] == null)
    {

        <!--Footer Section-->
        <div class="container-fluid foot_bg">
            <div class="col-sm-12 no-padding">
                <div class="col-sm-12 foot_logo">
                    <a class="" href="javascript:void(0)"><img src="~/Images/logo_small.png" /></a>
                </div>

                <div class="row fot_cont">
                    <div class="col-sm-4">
                        <a href="javascript:void(0)">About Us</a>
                        <br>
                        <a href="javascript:void(0)">Contact Us</a>
                        <br>
                        <a href="javascript:void(0)">Terms Of Service</a>
                    </div>
                    <div class="col-sm-4">
                        <a href="javascript:void(0)">Ticket Purchase FAQ </a>
                        <br>
                        <a href="javascript:void(0)">Ticket Fulfillment Policy</a>
                        <br>
                        <a href="javascript:void(0)">Privacy Policy</a>
                    </div>
                    <div class="col-sm-4">
                        <a href="javascript:void(0)">Facebook</a>
                        <br>
                        <a href="javascript:void(0)">Twitter</a>
                    </div>
                </div>
            </div>
        </div>

    }
    else
    {

        if (HttpContext.Current.Session["Fromname"].ToString() == "events")
        {
        }
        else
        {

            <div class="container-fluid foot_bg">
                <div class="col-sm-12 no-padding">
                    <div class="col-sm-12 foot_logo">
                        <a class="" href="javascript:void(0)"><img src="~/Images/logo_small.png" /></a>
                    </div>

                    <div class="row fot_cont">
                        <div class="col-sm-4">
                            <a href="javascript:void(0)">About Us</a>
                            <br>
                            <a href="javascript:void(0)">Contact Us</a>
                            <br>
                            <a href="javascript:void(0)">Terms Of Service</a>
                        </div>
                        <div class="col-sm-4">
                            <a href="javascript:void(0)">Ticket Purchase FAQ </a>
                            <br>
                            <a href="javascript:void(0)">Ticket Fulfillment Policy</a>
                            <br>
                            <a href="javascript:void(0)">Privacy Policy</a>
                        </div>
                        <div class="col-sm-4">
                            <a href="javascript:void(0)">Facebook</a>
                            <br>
                            <a href="javascript:void(0)">Twitter</a>
                        </div>
                    </div>
                </div>
            </div>

        }
    }

    <!-- Dialouge Box Start -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content login_pop" id="login_up">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title " id="myModalLabel">LogIn | SignUp</h3>
                </div>
                <div class="modal-body">
                    <div class="col-md-12">
                        @using (Html.BeginForm("Login", "Account", new { ReturnUrl = Session["ReturnUrl"] }, FormMethod.Post, new { role = "form", id = "formlogin", @class = "form-horizontal acnt_form" }))
                        {




                            <div class="er_UI_main" id="diverrologin" style="display :none;">
                                <button class="close closebtn" aria-hidden="true" data-dismiss="alert" type="button" id="btndiverrologin">&#215;</button>
                                <div class="er_UI_img"></div>
                                <div class="er_suc" id="dverrui">  </div>
                            </div>

                                    <div class="er_UI_main" id="diverro1login" style="display :none;">
                                        <div class="er_sys_img"></div>
                                        <div class="er_suc" id="dverrsys">  </div>
                                        <button class="close closebtn" aria-hidden="true" data-dismiss="alert" type="button" id="btndiverro1login">&#215;</button>
                                    </div>

                                    <div class="clearfix"></div>

                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <div class="row">
                                                <div class="col-sm-5 login_form_bot">
                                                    <input type="text" id="loginemail" name="Email" placeholder="Email" class="form-control login_place" maxlength="256" autocomplete="off" />
                                                    @*@Html.TextBoxFor(m => m.Email, new { @placeholder = "Email", @class = "form-control login_place", @id = "loginemail", @maxlength = 256 })*@
                                                </div>
                                                <div class="col-sm-5 login_form_bot">
                                                    <input type="password" id="loginpassword" name="Password" placeholder="Password" class="form-control login_place" maxlength="15" autocomplete="off" />

                                                    @*@Html.PasswordFor(m => m.Password, new { @placeholder = "Password", @class = "form-control login_place", @id = "loginpassword", @maxlength = 15 })*@
                                                </div>
                                                <div class="col-sm-2 login_form_bot">
                                                    <input type="hidden" id="hderror" />
                                                    <input type="button" value="LogIn" class="btn btn-primary login_btn_sub" id="btnSavelogin" disabled="disabled" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>




                        }

                        @*@RenderPage("~/Views/Shared/_login1partial.cshtml",new { })*@
                    </div>
                    <div class="col-md-12">
                        @*forgt_pass*@
                        @Html.ActionLink("forgot password?", "ForgetPassword", "Home", null, null)

                    </div>
                    <div class="col-md-12">
                        <span class="social_net_log">Use your social network login below or &nbsp;</span> <a href="javascript:void(0)" id="signUpPopup" class="btn btn-primary login_btn_sub">SignUp</a>
                    </div>
                    <div class="col-md-12 social-buttons text-center ">
                        <div class="col-xs-6">
                            <button type="button" onclick="return fb_login();" class="btn btn-block btn-social btn-facebook" id="Facebook" name="provider" value="Facebook" title="Log in using your Facebook account"><i class="fa fa-facebook"></i>Facebook</button>

                        </div>

                        <form id="login-launch" action="@Url.Action("ExternalLogin", "Account")" method="POST" target="login-popup" onsubmit="invokeLogin();">
                            @*@using (Html.BeginForm("ExternalLogin", "Account", new { ReturnUrl = ViewBag.ReturnUrl }))
                                {*@
                            <input type="hidden" id="provider" name="provider" />
                            <input type="hidden" name="returnUrl" value="@ViewBag.ReturnUrl" />



                            <div class="col-xs-6">
                                <button type="submit" onclick="$('#provider').attr('value', 'Google'); $('#login-launch').submit(); " class="btn btn-block btn-social btn-google-plus" id="Google" name="provider" value="Google" title="Log in using your Google account"><i class="fa fa-google-plus"></i>Google</button>
                            </div>

                            @*}*@
                        </form>
                        @*@RenderPage("~/Views/Shared/_ExternalLoginsListPartial.cshtml")*@
                    </div>
                </div>
            </div>

            <div id="sign_up" class="modal-content login_pop sign_up" style="display:none;">
                <div class="modal-header">
                    <button type="button" class="close closefrgt" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title ">Sign-up</h3>
                </div>
                <div class="modal-body">
                    <div class="col-md-12">

                        @using (Html.BeginForm("Signup", "Home", FormMethod.Post, new { role = "form", id = "form", @class = "form-horizontal acnt_form" }))
                        {

                            if (ViewData["Message"] != null)
                            {<div class="err_main">
                                <div class="er_suc_main">
                                    <div class="er_suc_img"></div>
                                    <div class="er_suc">ViewData["Message"] </div>
                                </div>
                            </div>
                            }
                            <div class="err_main" id="diverro" style="display :none;">
                                <div class="er_UI_main alert-danger">
                                    <button class="close closebtn" aria-hidden="true" data-dismiss="alert" type="button" id="btndiverro">&#215;</button>
                                    <div class="er_UI_img"></div>
                                    <div class="er_suc" id="dverrsignui">  </div>
                                </div>



                            </div>


                            <div class="err_main" id="diverro1" style="display :none;">
                                <div class="er_UI_main alert-danger">
                                    <button class="close closebtn" aria-hidden="true" data-dismiss="alert" type="button" id="btndiverro1">&#215;</button>
                                    <div class="er_sys_img"></div>
                                    <div class="er_suc" id="dverrsignsys">  </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="form-group">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-sm-5 login_form_bot">
                                            <input type="text" id="SignupEmail" name="Email" placeholder="Email" class="form-control login_place" maxlength="256" autocomplete="off" />

                                            @*@Html.TextBoxFor(m => m.Email, new { @maxlength = 256, @placeholder = "Email", @class = "form-control login_place", @id = "SignupEmail" })*@
                                        </div>
                                        <div class="col-sm-5 login_form_bot">
                                            <input type="password" id="SignupPassword" name="Password" placeholder="Password" class="form-control login_place" maxlength="15" autocomplete="off" />

                                            @*@Html.PasswordFor(m => m.Password, new { @maxlength = 15, @placeholder = "Password", @class = "form-control login_place", @id = "SignupPassword" })*@

                                        </div>
                                        <div class="col-sm-2 login_form_bot">
                                            @*<button type="button" class="btn btn-primary login_btn_sub" id="btnsave">SignUp</button>*@
                                            <input type="button" value="SignUp" class="btn btn-primary login_btn_sub" id="btnsave" disabled="disabled" />
                                        </div>


                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="display:none" id="divsignupfrgt">

                                @Html.ActionLink("forgot password?", "ForgetPassword", "Home", null, new { id = "ASignupfrgt" })

                            </div>

                        }


                        @*@RenderPage("~/Views/Shared/_signuppartial.cshtml")*@
                    </div>
                </div>
            </div>
            <input type="hidden" id="url" />
        </div>
    </div>
</body>
</html>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places"></script>
<script type="text/javascript">
    //function SearchEvents() {

        
    //}
    $('body').on('keyup keypress', function (e) {

        var keyCode = e.keyCode || e.which;
        if (keyCode === 13) {
            if ($("#myModal").css('display') == 'block') {
                if ($('#login_up').css('display') == 'block') {

                    $("#btnSavelogin").click();
                }


                if ($('#sign_up').css('display') == 'block') {
                    $("#btnsave").click();
                }
            }
        }
    });

    var WindowObjectReference;
    function invokeLogin() {
        debugger;
        var chrome = 100;
        var width = 600;
        var height = 500;
        var left = (screen.width - width) / 2;
        var top = (screen.height - height - chrome) / 2;


        var options = "location=0, menubar=0, status=0, toolbar=0, scrollbars=0, resizable=0,left=" + left + ",top=" + top + ",width=" + width + ",height=" + height;
        WindowObjectReference = window.open("about:blank", "login-popup", options);

    }
</script>
<script type="text/javascript">


    //Fb login
    window.fbAsyncInit = function () {
        FB.init({
            appId: '1956731254551382',
            oauth: true,
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true // parse XFBML
        });

    };
    function fb_login() {
        debugger;
        var access_token = "";
        FB.login(function (response) {

            if (response.authResponse) {

                console.log(response); // dump complete info
                access_token = response.authResponse.accessToken; //get access token
                user_id = response.authResponse.userID; //get FB UID
                console.log(user_id);
                console.log(access_token);


                FB.api('/me?fields=email,first_name,last_name', function (response) {
                    var name = response.name;
                    var email = response.email;
                    $.ajax({
                        url: '@Url.Action("FacebookLogin", "Home")',
                        data: { id: access_token, email: email },
                        type: "Post",
                        success: function (data) {

                            if (data.indexOf('~') > -1) {
                                urlarray = data.split('~');
                                data = urlarray[1];
                            }
                            if (data) {
                                window.location.href = data;
                            }
                        },
                        error: function (data) {
                            //alert("Sorry there is some problem.");
                            return false;
                        }
                    });
                    //get user email
                    // you can store this data into your database


                });

            } else {
                return false;
                //user hit cancel button
                //alert('User cancelled login or did not fully authorize.');

            }
        }, {
            scope: 'email'
        });
    }
    (function () {
        var e = document.createElement('script');
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
    }());

    //Fb Login

    function loginCallback(success, returnUrl) {
        if (returnUrl.indexOf('~') > -1) {
            urlarray = returnUrl.split('~');
            returnUrl = urlarray[1];
        }
        if (returnUrl) {
            window.location.href = returnUrl;
        } else {
            @*$.ajax({
                url: '@Url.Action("LoginPartial", "Account")',
                success: function (result) {
                    $('#login').html(result);
                }
            });*@
        }
    }

    function changeheader(e) {
        if ($('#idchecked').is(":checked") == true) {
            $('#divmain').addClass('home_fixed_header');
            $('#eventtopscoll').addClass('event_top');
            $('#scrollhome').addClass('con_scr0l_home');
            $('#divcontmain').addClass('mt15');

            $('#eventtopscoll').addClass('viewevent_container');
        } else {
            $('#eventtopscoll').removeClass('event_top');
            $('#scrollhome').removeClass('con_scr0l_home');
            $('#divmain').removeClass('home_fixed_header');

            $('#divcontmain').removeClass('mt15');

            $('#eventtopscoll').removeClass('viewevent_container');
        }
    }
    function setsession(e) {
        $.ajax({
            url: '@Url.Action("setsessid", "Home")',
            data: { id: e },
            type: "Post",
            success: function (data) {

            },
            error: function (data) {
                alert("Sorry there is some problem.");
                return false
            }
        });

        if (e == "discover") {


            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (p) {
                    var LatLng = new google.maps.LatLng(p.coords.latitude, p.coords.longitude);
                    var geocoder = new google.maps.Geocoder;
                    var infowindow = new google.maps.InfoWindow;

                    var mapOptions = {
                        center: { lat: p.coords.latitude, lng: p.coords.longitude },
                        zoom: 13,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    var vLat = p.coords.latitude;
                    var vLong = p.coords.longitude;



                    var vUrl = '@Url.RouteUrl("EvType",new { strEt = "evt", strEc = "evc", strPrice = "all", strPageIndex = "page", strLat = "lat", strLong = "long", strSort="rel", strDateFilter="none" })';


                    vUrl = vUrl.replace("lat", vLat);
                    vUrl = vUrl.replace("long", vLong);
                    window.location.href = vUrl;
                }, function (p) {
                    alert("error");
                    navigator.geolocation.getCurrentPosition(onPositionUpdate);

                    //var watchID = navigator.geolocation.watchPosition(gotPos, gotErr, options);
                    //alert(watchID);
                    //var geo = google.gears.factory.create('beta.geolocation');
                    //geo.getCurrentPosition(function (position) {
                    //    alert(position.latitude);
                    //}, function () {
                    //    alert("Again Error");
                    //});
                    //var LatLng = new google.maps.LatLng(p.coords.latitude, p.coords.longitude);


                });

            } else {
                alert('Geo Location feature is not supported in this browser.');
            }


            function onPositionUpdate(position) {
                var lat = position.coords.latitude;
                var lng = position.coords.longitude;
                alert("Current position: " + lat + " " + lng);
            }
            @*window.location.href = '@Url.Action("DiscoverEvents", "Home")';*@



        }

        if (e == "GetBuzz") {
            window.location.href = '@Url.Action("GetBuzz", "Home")';




        }
    }
    $("#signUpPopup").on('click', function () {
        $('#SignupEmail').css("border", "black solid 1px");
        $('#SignupPassword').css("border", "black solid 1px");
        $('#diverro1').css('display', 'none');
        $('#diverro').css("display", "none");
        $("#login_up").css({ "display": "none" });
        $("#sign_up").css({ "display": "block" });
        $('#divsignupfrgt').css({ "display": "none" });

    });

    $("#loginPopup").on('click', function () {
        if (loginemail != '' || loginpwd != '') {
            $('#btnSavelogin').removeAttr("disabled");
        }
        $('#loginemail').css("border", "black solid 1px");
        $('#loginpassword').css("border", "black solid 1px");
        $('#diverro1login').css('display', 'none');
        $('#diverrologin').css("display", "none");
        $("#login_up").css({ "display": "block" });
        $("#sign_up").css({ "display": "none" });

    });


   


    function checksession() {
        $.ajax({
            url: '@Url.Action("checkid", "Home")',
            type: "Post",
            success: function (data) {

                if (data == "Y") {
                    $("#loginPopup").click();
                    // url.val('@Url.Action("CreateEvent", "CreateEvent")');
                    return false;
                } else {
                    window.location.href = '@Url.Action("CreateEvent", "CreateEvent")';
                    return true;
                }
            },
            error: function (data) {
                alert("Sorry there is some problem.");
                return false
            }
        });

    }
</script>


@*//Login*@
<script type="text/javascript">


    $(document).click(function () {



        $('#diverrologin').css('display', 'none');
        $('#diverro1login').css('display', 'none');


        $("input").removeClass('err-bor');
    });
    $('#btndiverrologin').click(function () {
        $('#diverrologin').css('display', 'none');
        $('#diverro1login').css('display', 'none');

        $("input").removeClass('err-bor');
    })
    $('#btndiverro1login').click(function () {
        $('#diverrologin').css('display', 'none');
        $('#diverro1login').css('display', 'none');

        $("input").removeClass('err-bor');
    })
    $(window).load(function () {


        var loginemail = $('#loginemail').val();
        var loginpwd = $('#loginpassword').val();
        var signupemail = $('#SignupEmail').val();
        var signuppwd = $('#SignupPassword').val();

        if (loginemail != '' || loginpwd != '') {
            $('#btnSavelogin').removeAttr("disabled");

        }
        if (signupemail != ' ' || signuppwd != ' ') {
            $('#btnsave').removeAttr("disabled");

        }


    });

    $(document).ready(function () {
        $("#btSearchEvent").on('click', function () {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (p) {
                   
                    var LatLng = new google.maps.LatLng(p.coords.latitude, p.coords.longitude);

                    var geocoder = new google.maps.Geocoder;
                    var infowindow = new google.maps.InfoWindow;

                    var mapOptions = {
                        center: { lat: p.coords.latitude, lng: p.coords.longitude },
                        zoom: 13,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    var vLat = p.coords.latitude;
                    var vLong = p.coords.longitude;
                    var vTextSrh = $("#txtSearch").val();
                    //alert(vTextSrh);
                    var vUrl = '@Url.RouteUrl("EvType",new { strEt = "evt", strEc = "evc", strPrice = "all", strPageIndex = "page", strLat = "lat", strLong = "long", strSort="rel", strDateFilter="none", strTextSearch="search" })';

                    vUrl = vUrl.replace("lat", vLat);
                    vUrl = vUrl.replace("long", vLong);
                    vUrl = vUrl.replace("search", vTextSrh);
                    //alert(vUrl);

                    window.location.href = vUrl;
                }, function (p) {
                    alert("error");
                    navigator.geolocation.getCurrentPosition(onPositionUpdate);
                });

            } else {
                alert('Geo Location feature is not supported in this browser.');
            }

        });


        var loginemail = $('#loginemail').val();
        var loginpwd = $('#loginpassword').val();
        var signupemail = $('#SignupEmail').val();
        var signuppwd = $('#SignupPassword').val();

        if (loginemail != '' || loginpwd != '') {
            $('#btnSavelogin').removeAttr("disabled");

        }
        if (signupemail != ' ' || signuppwd != ' ') {
            $('#btnsave').removeAttr("disabled");

        }


        $('#loginemail').removeClass('err-bor');
        $('#loginpassword').removeClass('err-bor');

        $('#diverro1login').css('display', 'none');
        $('#diverrologin').css("display", "none");


        $('#loginemail').keyup(function () {

            if ($(this).val() != '' && $('#loginpassword').val() != '') {
                $('#btnSavelogin').removeAttr("disabled");

            } else {

                $('#btnSavelogin').attr("disabled", true);
            }

        })
        $('#loginpassword').keyup(function () {
            if ($(this).val() != '' && $('#loginemail').val() != '') {

                $('#btnSavelogin').removeAttr("disabled");

            } else {

                $('#btnSavelogin').attr("disabled", true);
            }

        })


    });

    function validationLogin() {
        var msglogin = "";
        var Emaillogin = $("#loginemail").val();

        var Passowrdlogin = $("#loginpassword").val();
        if (!validateEmail(Emaillogin)) {
            $('#loginemail').focus();
            $('#loginemail').addClass('err-bor');
            msglogin += ajaxsetup('Login', 'LoginEmailValidationUI');


        } else {

            msglogin = "";
            $('#loginemail').focus();
            $('#loginemail').removeClass('err-bor');
        }

        if (Passowrdlogin.length < 4) {
            $('#loginpassword').focus();
            $('#loginpassword').addClass('err-bor');
            if (msglogin.trim() == "")
                msglogin = ajaxsetup('Login', 'LoginPasswordValidationUI');
            else
                msglogin += "<br />" + ajaxsetup('Login', 'LoginPasswordValidationUI');


        } else {
            if (msglogin == "") {
                msglogin = "";
            }
            $('#loginpassword').focus();
            $('#loginpassword').removeClass('err-bor');


        }
        return msglogin;
    }


    function ajaxsetup(strname, strFormTag) {
        var msgnew = "";
        $.ajax({
            url: '@Url.Action("geterrorMessage", "ValidationMessage")',
            data: { formname: strname, errortype: strFormTag },
            async: false,
            type: 'Post',
            success: function (data) {
                msgnew = data;
            }
        });

        return msgnew;

        @*var msgnew = "";

                    var request = $.ajax({
                        url: '@Url.Action("Index", "ValidationMessage")',
                        async: false,
                        data: { strFormName: strname, strFormTag: strFormTag },
                        type: 'Post'
                    });
                    request.done(function (msg) {
                        msgnew += msg;
                    });

                    request.fail(function (jqXHR, textStatus) {
                        msgnew += "Some Error occur!!";
                    });
                    return msgnew;*@
    }
    function validateEmail(sEmail) {
        var filter = /^[\w\-\.\+]+\@@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;

        if (filter.test(sEmail)) {

            return true;
        }
        else {


            return false;
        }
    }

    $("#btnSavelogin").click(function () {
        this.disabled = true;

        var msgloginn = validationLogin();

        var flag1login = true;
        if (msgloginn == "") {
            $('#diverrologin').css("display", "none");
            flag1 = true;
        }
        else {
            $('#diverro1login').css('display', 'none');
            $('#dverrui').html(msgloginn);
            $('#diverrologin').css("display", "block");
            this.disabled = false;
            return false;
        }
        if (flag1login) {

            var flaglogin = false;
            var Emaillogin = $("#loginemail").val();
            var Emailpassword = $("#loginpassword").val();


            $.ajax({
                url: "/Home/IsValidID",
                data: { Email: Emaillogin, Password: Emailpassword },
                dataType: "text",
                type: 'Post',
                success: function (data, textStatus, xhr) {
                    if (data != '') {
                        if (data == "NotFound") {
                            $('#loginemail').focus();
                            $('#loginemail').addClass('err-bor');

                            $('#diverrologin').css("display", "none");
                            $('#diverro1login').css('display', 'block');
                            var msg = ajaxsetup('Login', 'LoginEmailNotExistSy');
                            $('#dverrsys').html(msg);

                            return false;

                        } else if (data == "PasswordNotMatch") {
                            $('#loginemail').focus();
                            $('#loginemail').addClass('err-bor');
                            $('#loginpassword').addClass('err-bor');

                            $('#diverrologin').css("display", "none");
                            $('#diverro1login').css('display', 'block');
                            var msg = ajaxsetup('Login', 'LoginPwdNotExistSy');
                            $('#dverrsys').html(msg);

                        }
                        else if (data == "PasswordMatch") {
                            $('#formlogin').submit();

                        }


                    }
                },
                error: function (xhr, textStatus, errorThrown) {
                    this.disabled = false;
                    alert("Req " + xhr + " status " + textStatus + "  Error " + errorThrown);
                }
            });



        }
    });
</script>


@*//Signup*@
<script type="text/javascript">
    $(document).click(function () {
        $('#diverro').css('display', 'none');
        $('#diverro1').css('display', 'none');


        $("input").removeClass('err-bor');
    });
    $('#btndiverro').click(function () {
        $('#diverro').css('display', 'none');
        $('#diverro1').css('display', 'none');


        $("input").removeClass('err-bor');
    })
    $('#btndiverro1').click(function () {
        $('#diverro').css('display', 'none');
        $('#diverro1').css('display', 'none');


        $("input").removeClass('err-bor');
    })
    $(document).ready(function () {

        $('#SignupEmail').removeClass('err-bor');
        $('#SignupPassword').removeClass('err-bor');

        $('#diverro1').css('display', 'none');
        $('#diverro').css("display", "none");
        $('#SignupEmail').keyup(function () {

            if ($(this).val() != '' && $('#SignupPassword').val() != '') {
                $('#btnsave').removeAttr("disabled");

            } else {
                $('#btnsave').attr("disabled", true);
            }
            if ($(this).val() == '' && $('#SignupPassword').val() == '')
            { $('#divsignupfrgt').css('display', 'none'); }
        })
        $('#SignupPassword').keyup(function () {
            if ($(this).val() != '' && $('#SignupEmail').val() != '') {

                $('#btnsave').removeAttr("disabled");

            } else {

                $('#btnsave').attr("disabled", true);
            }
            if ($(this).val() == '' && $('#SignupEmail').val() == '')
            { $('#divsignupfrgt').css('display', 'none'); }
        })
    });

</script>
<script type="text/javascript">

    function validation() {
        var msg = "";
        var Email = $("#SignupEmail").val();

        var Passowrdw = $("#SignupPassword").val();

        if (!validateEmail(Email)) {
            $('#SignupEmail').focus();
            $('#SignupEmail').addClass('err-bor');
            if (msg.trim() == "")
                msg = ajaxsetup('Signup', 'SignupEmailValidationUI');
            else
                msg += ajaxsetup('Signup', 'SignupEmailValidationUI');

        } else {
            msg = "";
            $('#SignupEmail').focus();
            $('#SignupEmail').removeClass('err-bor');
        }
        //console.log(Passowrdw.length);
        if (Passowrdw.length < 4) {
            $('#SignupPassword').focus();
            $('#SignupPassword').addClass('err-bor');
            if (msg.trim() == "")
                msg = ajaxsetup('Signup', 'SignupPasswordValidationUI');
            else
                msg += "</br>" + ajaxsetup('Signup', 'SignupPasswordValidationUI');


        } else {
            if (msg == "") {
                msg = "";
            }
            $('#SignupPassword').focus();
            $('#SignupPassword').removeClass('err-bor');

        }
        return msg;
    }


    $("#btnsave").click(function (event) {
        this.disabled = true;
        var msg = validation();
        var flag1 = true;
        if (msg == "") {
            $('#diverro').css("display", "none");
            flag1 = true;
        }
        else {
            $('#diverro1').css('display', 'none');
            $('#dverrsignui').html(msg);
            $('#diverro').css("display", "block");
            this.disabled = false;
            return false;
        }
        if (flag1) {
            var flag = false;
            var Emailsignin = $("#SignupEmail").val();

            $.ajax({
                url: "/Home/IsValid",
                data: 'Email=' + Emailsignin,
                dataType: "text",
                success: function (data, textStatus, xhr) {

                    if (data != '') {
                        if (data == "NotFound") {
                            flag = true;
                            $('#divsignupfrgt').css('display', 'none');
                            $('#form').submit();

                        } else if (data == "Found") {
                            $("#btnsave").attr('disabled', false);
                            $('#SignupEmail').focus();
                            $('#SignupEmail').addClass('err-bor');
                            $('#diverro').css("display", "none");
                            $('#diverro1').css('display', 'block');
                            var msg = ajaxsetup('Signup', 'SignupEmailAlreadyExistSY');

                            $('#dverrsignsys').html(msg);
                            $('#divsignupfrgt').css('display', 'block');
                            flag = false;
                            return false;
                        }
                    }
                },
                error: function (xhr, textStatus, errorThrown) {
                    $('#diverro').css("display", "none");
                    $('#diverro1').css('display', 'block');
                    $('#dverrsignsys').html("Some Problem in system contact your admin!!");
                }
            });



        }
    });




    $('.closefrgt').click(function () {
        $('#divsignupfrgt').css('display', 'none');

    });



    function validateEmail(sEmail) {
        var filter = /^[\w\-\.\+]+\@@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;

        if (filter.test(sEmail)) {

            return true;
        }
        else {


            return false;
        }
    }





</script>