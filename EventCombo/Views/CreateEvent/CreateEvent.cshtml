@model EventCombo.Models.EventCreation
@{
    ViewBag.Title = "CreateEvent";
    Layout = "~/Views/Shared/_AccountLayout.cshtml";
}
<link href="~/Content/Filer/jquery.filer.css" rel="stylesheet" />
<script src="~/Scripts/jquery.masked.js"></script>
<link href="~/Content/Filer/jquery.filer-dragdropbox-theme.css" rel="stylesheet" />
<script src="~/Scripts/filer/jquery.filer.js"></script>
<link href="~/Content/jquery-ui.css" rel="stylesheet" />
<link href="~/Content/summernote.css" rel="stylesheet" />

<link href="~/Content/eventcombo-new.css" rel="stylesheet" />
<link href="~/Content/MapPlaces.css" rel="stylesheet" />

<script>
    $(document).ready(function () {
       
       

        $('#input2').filer({
            limit: 5,
            extensions: ['jpg', 'jpeg', 'png'],
            changeInput: '<div class="jFiler-input-dragDrop" id="drag-drop"><div class="jFiler-input-inner"><div class="jFiler-input-icon"><i class="icon-jfi-cloud-up-o"></i></div><div class="jFiler-input-text"><h3>Drop Images here to upload or click here</h3></br><h4>Upto 5 Images,900X600</h4> </div></div></div>',
            showThumbs: true,
            appendTo: "#drag-drop",
            theme: "dragdropbox",
            templates: {
                box: '<ul class="jFiler-item-list clearfix"></ul>',

                item: '<li class="jFiler-item">\
                                    <div class="">\
                                            {{fi-image}}\
                                             <div class="jFiler-item-container">\
                                <div class="jFiler-item-inner">\
                                     <div class="jFiler-item-assets jFiler-row">\
                                        <ul class="list-inline pull-left">\
                                            <li>{{fi-progressBar}}</li>\
                                        </ul>\
                                    </div>\
                                    </div>\
                            </div>\
                                            <span></span>\
                                             <button class="btn  jFiler-item-trash-action can_btn" type="button">\
                                                <i class="glyphicon glyphicon-remove-circle"></i>\
                                             </button>\
                                       </div>\
                        </li>',

                itemAppend: '<li class="jFiler-item">\
                                    <div class="">\
                                            {{fi-image}}\
                                             <button class="btn  jFiler-item-trash-action can_btn" type="button">\
                                                <i class="glyphicon glyphicon-remove-circle"></i>\
                                             </button>\
                                       </div>\
                        </li>',
                progressBar: '<div class="bar"></div>',
                itemAppendToEnd: true,
                removeConfirmation: false,
                _selectors: {
                    list: '.jFiler-item-list',
                    item: '.jFiler-item',
                    progressBar: '.bar',
                    remove: '.jFiler-item-trash-action',
                }
            },
            uploadFile: {
                url: "/Event/SaveUploadedFile",
                data: { 'Uniqueid': $('#hdUniqueguid').val() },
                type: 'POST',
                enctype: 'multipart/form-data',
                beforeSend: function () { },
                //console.log(el[0].className);
                //var x = el[0].parentElement;
                //var len=el[0].parentElement.childNodes.length;


                //var input = document.getElementById("input2");


                //if (input.files && input.files.length == 1) {
                //    if (input.files[0].size > 2097152) {
                //        alert("The file must be less than " + (2097152 / 1024 / 1024) + "MB");

                //        var dragdrop = document.getElementById("drag-drop");
                //        var filer = dragdrop.find($(".jFiler-items"));
                //        dragdrop.remove(el[0]);
                //        console.log(filer);
                //       // if (len==1)
                //       //{

                //       //   var div=  document.getElementById("drag-drop");
                //       //   console.log(el[0].parentElement.parentElement.parentElement);
                //       //   var u = document.getElementsByClassName("jFiler-items");
                //       //   var y = document.getElementsByClassName("jFiler-input-inner");
                //       //  console.log( el[0].parentElement.parentElement.parentElement.childNodes[0].style.display="block");
                //       //  console.log(  el[0].parentElement.parentElement.parentElement.childNodes[0])
                //       //   console.log(y);



                //       // }
                //        x.removeChild(el[0]);
                //        return false;



                success: function (data, el) {
                    console.log(data);
                    var parent = el.find(".jFiler-jProgressBar").parent();
                    el.find(".jFiler-jProgressBar").fadeOut("slow", function () {
                        $("<div class=\"jFiler-item-others text-success\"><i class=\"icon-jfi-check-circle\"></i> Success</div>").hide().appendTo(parent).fadeIn("slow").remove();
                    });

                    var image_count = $("#image_count").val();
                    var imagejson = jQuery.parseJSON(JSON.stringify(data));
                    var imgdata = imagejson.image_name + '####' + imagejson.image_type;

                    $("#image_count").val(el[0].jfiler_id)
                    $('<input>').attr({
                        type: 'hidden',
                        id: 'image_hidden_' + el[0].jfiler_id,
                        name: 'Eventpicture[' + imgdata + ']',
                        value: imgdata
                    }).appendTo('form');

                    $('#ImagePresent').val("Yes");

                    if ($.trim(image_count) == '') {
                        $("#image_count").val('1');
                    } else {
                        image_count = parseInt(image_count) + 1;
                        $("#image_count").val(image_count);
                    }



                },

                error: function (el) {
                    var input = document.getElementById("input2");

                    var parent = el.find(".jFiler-jProgressBar").parent();

                    el.find(".jFiler-jProgressBar").fadeOut("slow", function () {
                        $("<div class=\"jFiler-item-others text-error\"><i class=\"icon-jfi-minus-circle\"></i> Error</div>").hide().appendTo(parent).fadeIn("slow");
                    });
                },
                statusCode: {},
                onProgress: function () { },
            },
            dragDrop: {
                dragEnter: function () { },
                dragLeave: function () { },
                drop: function () { },
            },
            addMore: true,
            clipBoardPaste: true,
            excludeName: null,
            beforeShow: function () { $(".jFiler-input-inner").hide(); return true },
            onSelect: function () { $(".jFiler-input-inner").hide(); },
            afterShow: function () { $(".jFiler-input-inner").hide(); $(".fi-progressBar").hide(); },

            onRemove: function (el) {
                var image_count = $("#image_count").val();
                image_count = parseInt(image_count) - 1;
                var id_div = el[0].jfiler_id;
                var hidden_image_element = 'image_hidden_' + id_div;
                if (image_count == 0) {
                    $("#image_count").val('');
                } else {
                    $("#image_count").val(image_count);
                }
                $("#" + hidden_image_element).remove();
                $('#input2').click(function (e) {
                    e.preventDefault();

                })

                var count = 0;
                $("input[id^='image_hidden']").each(function () {

                    var id = $(this).attr('id');
                    ////console.log(id);
                    var idn = 'image_hidden_' + (count);
                    $(this).attr("id", idn);

                    count = count + 1;

                });
                $('#ImagePresent').val("NO");


            },
            onEmpty: function (el) {
             

                if ($("#imageeror").val() == 0) {
                    if ($(".jFiler-items ul li").length == 2) { setTimeout(function () { $(".jFiler-input-inner").css('display', 'block'); $('#input2').unbind('click'); }, 200); };
                }
            },
            captions: {
                button: "Choose Files",
                feedback: "Choose files To Upload",
                feedback2: "files were chosen",
                drop: "Drop file here to Upload",
                removeConfirmation: "Are you sure you want to remove this file?",
                errors: {
                    filesLimit: ajaxsetup('CreateEvent', 'CreateEventImagecountUI'),
                    filesType: ajaxsetup('CreateEvent', 'CreateEventImageTypeUI'),
                    filesSize: ajaxsetup('CreateEvent', 'CreateEventImageSizeUI'),
                    filesSizeAll: ajaxsetup('CreateEvent', 'CreateEventImageSizeUI')
                }
            }
        });
    });
</script>
@*<script src="~/Scripts/jquery.numberformatter-1.2.4.jsmin.js"></script>*@
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "CreateEvent" }))
{
    <div class="event_container">
        <div class="event_inner_container event_top createeventtop" id="eventtopscoll">
            <div class="col-sm-12 pt10 bggrey clearfix"  >
                <div class="Moderor" style="display: none;" id="diverroacc" tabindex="-1">
                    <div class="er_UI_main" >
                        <div class="er_UI_img"></div>
                        <div class="er_suc" id="erraccmsg"></div>
                        <button class="close" type="button" id="btndiverrsuc">&#215;</button>
                       
                    </div>
                </div>
                <div class="Moderor" id="divaccsuc" style="display: none;" tabindex="-1">
                    <div class="er_suc_main">

                        <div class="er_suc_img"></div>
                        <div class="er_suc" id="succaccmsg"> </div>
                        <button class="close" type="button" id="btndivaccsuc">&#215;</button>
             
                    </div>
                </div>
            </div>

            <div class="col-sm-12 bggrey clearfix" >
                <div class="col-sm-3 col-xs-12 pt10 text-left no_pad" >
                    <label class="btn ev_live_sub_btn yelw_live_btn"  style="display:none;" id="dvdraft"> DRAFT </label>


                </div>
                <div class="col-sm-9 col-xs-12 pt10 text-right no_pad">
                    <button class="cbtSave btn ev_live_sub_btn mb5 cdisable"  type="button" disabled="disabled">
                        SAVE &#10;
                        <span> > </span>
                    </button>
                    <button id="btPreview" class="cbtPreview btn ev_live_sub_btn mb5 cdisable" type="button"  disabled="disabled">
                        PREVIEW &#10;
                        <span> > </span>
                    </button>
                    <button class="cbtMakeLive btn ev_live_sub_btn mb5 grn_live_btn cdisable" type="button"  disabled="disabled">
                        MAKE EVENT LIVE NOW&#10;
                        <span> > </span>
                    </button>
                    <div class="clearfix"></div>
                    @*<div class="col-sm-12 ">
                        ( Last saved at MM/DD/YYYY 00:00pm )
                    </div>*@
                </div>
            </div>

            <div class="event-upload-container">
                <input type="file" name="image" id="input2" multiple data-jfiler-maxSize="2">
                <div class="evnt_title_bg evnt_title_top">
                    <div class="form-group mb5">
                        <input id="txtEventTitle" maxlength="256" class="form-control evnt_title_control evnt_placehold chkvalidation" placeholder="Click here to enter the name of the event*" value="" />
                    </div>
                    <div class="col-sm-3 no_pad ev_loca_check_main">
                        <div class="form-group mb0">
                            <label class="label-control evnt_title_date evnt_title_online fs24"><input id="btOnlineEvent" type="checkbox"> Online Event</label>
                        </div>
                    </div>
                    <div class="col-sm-9 text-right no_pad">
                        <div class="form-group mb0 ">
                            <div class="ev_date_icn StartDate"></div>
                            <label id="btEnterDates" class="StartDate label-control evnt_title_date fs24">Click here to enter the start and end date*</label>
                            <div class="form-group mb5">
                                <label class="Timezone label-control evnt_title_timezone mb0" id="lblTimeZone">Timezone & date setting</label>
                                <div class="TmezoneSet col-sm-12 ev_time_zone_model_main">
                                    <div class="ev_time_zone_model">
                                        <div class="modal-content ev_tm_zon_cont">
                                            <div class="modal-header">
                                                <button class="close closetimemodal" type="button">
                                                    <span>&#215;</span>
                                                </button>
                                                <h4 class="modal-title ev_modal_header_title" id="myModalLabel">Timezone & date setting</h4>
                                            </div>
                                            <div class="modal-body">
                                                <div class="col-sm-12 no_pad dropheight">
                                                    <div class="form-group mb5 ">
                                                        @Html.DropDownList("dllTimeZone", ViewBag.Timezonelist as List<SelectListItem>, new { @class = "form-control selectpicker evnt_inp_cont wd600" })
                                                      
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <div class="form-group mb5 ">
                                                        <h4 class="ev_timezone_lebel">Event Page Settings</h4>
                                                    </div>
                                                    <div class="form-group mb5 ">
                                                        <label class="col-sm-12 no_pad label-control ev_timezone_lebel">
                                                            <input id="chkDisplayStartTime" type="checkbox" checked="checked" /> Display start time on event page
                                                        </label>
                                                        <label class="col-sm-12 no_pad label-control ev_timezone_lebel">
                                                            <input id="chkDisplayEndTime" type="checkbox" checked="checked" /> Display end time on event page
                                                        </label>
                                                        <label class="col-sm-12 no_pad label-control ev_timezone_lebel">
                                                            <input id="chkTimeZone" type="checkbox" checked="checked" />  Display time zone on event page
                                                        </label>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="modal-footer">
                                                @*<button type="button" id="btSaveTimeZone" class="closetimemodal btn btn-primary  ev_add_sub_btn">Save</button>*@
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="col-sm-12 no_pad" id="dvAddress">
                                <div class="form-group mb5">
                                    <div class="EntVenAdd col-sm-12 no_pad">
                                        <div class="ev_loc_icn"></div>
                                        <div class="col-sm-10 no_pad mb5 pull-right">
                                            <input id="txtEventLocation" onkeypress="txtEventLocation_KeyPress(event);" class="form-control evnt_title_control evnt_title_location evnt_placehold" placeholder="Click here to enter venue address" />
                                        </div>
                                    </div>
                                    <div class="PastLocat col-sm-12 no_pad">
                                        <div class="ev_loc_icn"></div>
                                        <div class="col-sm-10 pull-right mb10 no_pad">
                                            <select id="dllPastLocation" class="form-control evnt_inp_cont "></select>
                                        </div>
                                        <div class="clearfix"></div>

                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="col-sm-6 ">
                                    <label class="label-control evnt_title_multi">
                                        <a data-target="#myModal" id="btMultiVenue" data-toggle="modal" href="#" draggable="false">
                                            Multiple Venue
                                        </a>
                                    </label>
                                </div>
                                <div class="col-sm-6 text-left">
                                    <label class="label-control evnt_title_multi pl0">
                                        <input class="" id="chkShowMap" type="checkbox">
                                        Show map on event page
                                    </label>
                                    <label class="label-control evnt_title_multi pl0" id="lblusePast">

                                        <input id="UsepastLoc" class="" type="checkbox">
                                        Use Past Location
                                    </label>
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="StartDatemodal col-sm-12 ev_time_zone_model_main ev_date_time_model" id="datemodel">
                        <div class="ev_time_zone_model">
                            <div class="modal-content ev_tm_zon_cont">
                                <div class="modal-header">
                                    <button class="close closemodal" type="button" id="btnAddSch">
                                        <span>&#215;</span>
                                    </button><h4 class="modal-title ev_modal_header_title" id="myModalLabel">Schedule dates</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="SchDivtop col-sm-12 sch_date_modal_resp">
                                        <div class="form-group">
                                            <div class="col-sm-12 no_pad ev_ven_mod_sch_mul mb10">
                                                <label class="label-control ev_ven_mod_lebel ">
                                                    <strong>Schedule single event</strong>
                                                </label>
                                            </div>
                                            <div class="col-sm-6 no_pad">
                                                <div class="col-sm-12 no_pad"><label class="label-control ev_ven_mod_lebel">Start</label></div>
                                                <div class="col-sm-6 no_pad xs_mb10">
                                                    <input id="txtStartDate" class="datecheck date_picker form-control" placeholder="MM/DD/YYYY" onchange="ValEventdate(this.id)" />
                                                </div>
                                                <div class="col-sm-6 no_pad_res">
                                                    <input id="txtStartTime" type="text" class="timecheck time_picker form-control" placeholder="00:00 AM" onchange="ValEventTime(this.id,event)" />
                                                </div>

                                            </div>
                                            <div class="col-sm-6 no_pad">
                                                <div class="col-sm-12 no_pad"><label class="label-control ev_ven_mod_lebel">End</label></div>
                                                <div class="col-sm-6 no_pad xs_mb10">
                                                    <input id="txtEndDate" class="datecheck date_picker form-control" placeholder="MM/DD/YYYY" onchange="ValEventdate(this.id)" />
                                                </div>
                                                <div class="col-sm-6 no_pad_res">
                                                    <input id="txtEndTime" type="text" class="timecheck time_picker form-control" placeholder="00:00 AM" onchange="ValEventTime(this.id,event)" />
                                                </div>

                                            </div>
                                            <div class="col-sm-12 no_pad mt10 ">
                                                <label id="btSchMultipleEv" class="SchmultiEvnt label-control lbl_bot_text" draggable="false">Schedule multiple events</label>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-sm-12 mt10 ">
                                        <label id="btSchSingleEv" class="Schmultisingle label-control lbl_bot_text" draggable="false">Schedule single event</label>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="SchmultiDetail col-sm-12 mt10">
                                        <div class="form-group">
                                            <div class="col-sm-12 no_pad">
                                                <div class="col-sm-12 no_pad ev_ven_mod_sch_mul mb10">
                                                    <label class="label-control ev_ven_mod_lebel ">
                                                        <strong>Schedule multiple events</strong>
                                                    </label>
                                                </div>
                                                <div class="col-sm-12 no_pad"><label class="label-control ev_ven_mod_lebel">How often does this event occur?</label></div>
                                                <div class="col-sm-8 no_pad">
                                                    <select id="dlSchOption" class="form-control evnt_inp_cont ">
                                                        <option>Daily</option>
                                                        <option>Weekly</option>
                                                        <option>Monthly</option>
                                                        <option>Custom</option>
                                                    </select>
                                                </div>


                                            </div>
                                        </div>
                                        <div class="form-group evnt_inp_sel_day">
                                            <div id="dvWeeklyDayChk" class="col-sm-12 mt10 no_pad">
                                                <select id="dllWeeklyDayChk" class="checkboxName" multiple="multiple">
                                                    <option value="1">Monday</option>
                                                    <option value="2">Tuesday</option>
                                                    <option value="3">Wednesday</option>
                                                    <option value="4">Thursday</option>
                                                    <option value="5">Friday</option>
                                                    <option value="6">Saturday</option>
                                                    <option value="7">Sunday</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div id="dvMonthly" class="form-group evnt_inp_sel_day">
                                            <div class="evt_time evnt_time_cont wd600 mt10">
                                                <label class="label-control evnt_ticket_label wd600">Repeating every</label>
                                                <div class="col-sm-12 no_pad">
                                                    <div class="col-sm-6 no_pad xs_mb10">
                                                        <select id="dllMonthlyWeek" class="form-control evnt_inp_cont wd200">
                                                            <option>First</option>
                                                            <option>Second</option>
                                                            <option>Third</option>
                                                            <option>Four</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-6 no_pad_res">
                                                        <select id="dllMonthlyWeekDay" class="checkboxName" multiple="multiple">
                                                            <option value="1">Monday</option>
                                                            <option value="2">Tuesday</option>
                                                            <option value="3">Wednesday</option>
                                                            <option value="4">Thursday</option>
                                                            <option value="5">Friday</option>
                                                            <option value="6">Saturday</option>
                                                            <option value="7">Sunday</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="clearfix"></div>
                                                <div class="col-sm-12 ev_tic_end no_pad">
                                                    <label id="btDayofMonth" class="label-control lbl_bot_text">Select by day of the month</label>
                                                </div>
                                            </div>
                                            <div class="evnt_doll_amnt col-sm-12 no_pad mt10">
                                                <div class="col-sm-12 no_pad">
                                                    <div class="col-sm-12 no_pad"><label class="label-control ev_ven_mod_lebel">It occurs every</label></div>
                                                    <div class="col-sm-6 no_pad dropheight">
                                                        <select id="dllMonth" class="selectpicker form-control evnt_inp_cont wd200">
                                                            <option value="1">1st</option>
                                                            <option value="2">2nd</option>
                                                            <option value="3">3rd</option>
                                                            <option value="4">4th</option>
                                                            <option value="5">5th</option>
                                                            <option value="6">6st</option>
                                                            <option value="7">7nd</option>
                                                            <option value="8">8rd</option>
                                                            <option value="9">9th</option>
                                                            <option value="10">10th</option>
                                                            <option value="11">11st</option>
                                                            <option value="12">12nd</option>
                                                            <option value="13">13rd</option>
                                                            <option value="14">14th</option>
                                                            <option value="15">15th</option>
                                                            <option value="16">16st</option>
                                                            <option value="17">17nd</option>
                                                            <option value="18">18rd</option>
                                                            <option value="19">19th</option>
                                                            <option value="20">20th</option>
                                                            <option value="21">21st</option>
                                                            <option value="22">22nd</option>
                                                            <option value="23">23rd</option>
                                                            <option value="24">24th</option>
                                                            <option value="25">25th</option>
                                                            <option value="26">26st</option>
                                                            <option value="27">27nd</option>
                                                            <option value="28">28rd</option>
                                                            <option value="29">29th</option>
                                                            <option value="30">30th</option>
                                                            <option value="31">31th</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12 no_pad">
                                                    <label class="label-control">day of the month.</label>
                                                </div>
                                                <div class="col-sm-12 no_pad">
                                                    <label id="btDayofWeek" class="ev_by_date label-control lbl_bot_text">Select by day of the week</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="form-group mt10">
                                            <div class="col-sm-6 no_pad">
                                                <div class="col-sm-12 no_pad"><label class="label-control ev_ven_mod_lebel">From</label></div>
                                                <div class="col-sm-6 pl0">
                                                    <input id="txtTimeStart" class="timecheck time_picker form-control" placeholder="00:00 AM" onchange="ValEventTime(this.id,event)" />
                                                </div>
                                            </div>
                                            <div class="col-sm-6 no_pad">
                                                <div class="col-sm-12 no_pad"><label class="label-control ev_ven_mod_lebel">To</label></div>
                                                <div class="col-sm-6 pl0">
                                                    <input id="txtTimeEnd" class="timecheck time_picker form-control" placeholder="00:00 AM" onchange="ValEventTime(this.id,event)" />
                                                </div>

                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="form-group mt10 ">
                                            <div class="col-sm-6 no_pad ">
                                                <div class="col-sm-12 no_pad"><label class="label-control ev_ven_mod_lebel">Occurs From</label></div>
                                                <div class="col-sm-12 pl0">
                                                    <input id="txtDateFrom" class="datecheck date_picker form-control" placeholder="MM/DD/YYYY" onchange="ValEventdate(this.id)" />
                                                </div>

                                            </div>
                                            <div class="col-sm-6 no_pad">
                                                <div class="col-sm-12 no_pad"><label class="label-control ev_ven_mod_lebel">Untill</label></div>
                                                <div class="col-sm-12 pl0">
                                                    <input id="txtDateTo" class="datecheck date_picker form-control" placeholder="MM/DD/YYYY" onchange="ValEventdate(this.id)" />
                                                </div>

                                            </div>


                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="modal-footer mt10">
                                    @*<button type="button" id="btnAddSch" class="closemodal btn btn-primary btn-lg ev_add_sub_btn">Save</button>*@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="event_detail_container">
                <div class="evnt_tile_head">
                    <div class="evnt_tile_bg_l"></div>
                    <div class="col-sm-12 col-xs-12 text-left no_pad">
                        <h2 class="fb_dis_head pt5">EVENT INFO</h2>
                    </div>

                    <div class="evnt_tile_bg_r evnt_tile_bg_r_call"></div>
                </div>
                <div class="evnt_details_body">
                    <div class="col-sm-12 mt20 no_pad">
                        <div class="col-sm-4 pl0">
                            <div class="form-group">
                                <label class="col-sm-3 control-label ev_tickt_lebel pl0">Type*</label>
                                <div class="col-sm-9 dropheight">
                                    @Html.DropDownList("EventType", ViewBag.EventTypes as List<SelectListItem>, new { @class = "form-control selectpicker wd600 chkvalidation" })
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 pl0 xs768-pl0">
                            <div class="form-group">
                                <label class="col-sm-3 control-label ev_tickt_lebel pl0">Category*</label>
                                <div class="col-sm-9 dropheight">
                                    @Html.DropDownList("ddlEventCategory", ViewBag.EventCategories as List<SelectListItem>, new { @class = "form-control selectpicker wd600 chkvalidation" })
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 pl0">
                            <div class="form-group">
                                <label class="col-sm-5 control-label ev_tickt_lebel no_pad">Sub Category</label>
                                <div class="col-sm-7 dropheight">

                                    <select id="ddlEventSubCategory" class="form-control  wd600"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 mt10 no_pad">
                        <div class="form-group ">
                            <label class="col-sm-12 control-label ev_tickt_lebel pl0">
                                Event Description
                            </label>
                            <div class="col-sm-8 no_pad">
                                <div id="edEventDesc" class="summernote"></div>
                                <span id="spEvDesc" style="display:block"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 no_pad">
                        <div class="clearfix"></div>
                        <div class="form-group">
                            <div class="col-sm-12 no_pad">
                                <label class="no_pad label-control ev_tickt_lebel pl0">
                                    Create a unique URL
                                </label>
                            </div>
                            <div class="clearfix"></div>
                            <div class="url-width">

                                <span class="url-filed">
                                    <input class="gui-input url-filed-border" id="txtEventUrl" type="text" placeholder="enter url name" onkeypress="return IsAlphaNumeric(event);">
                                </span>
                                <span class="url-name">.eventcombo.com</span>
                            </div>
                            <div class="gnrate-url mb10 fs13"> ( For eg: xyz.eventcombo.com )</div>
                        </div>
                    </div>
                    <div class="col-sm-12 no_pad" style="display:none">
                        <label class="label-control ev_tickt_lebel pl0">
                            <input id="chkDuplicateEvent" class="" type="checkbox">
                            &#10; Duplicate Event
                        </label>
                    </div>

                </div>
            </div>
            <div class="event_detail_container">
                <div class="evnt_tile_head">
                    <div class="evnt_tile_bg_l"></div>
                    <div class="col-sm-12 col-xs-12 text-left no_pad">
                        <h2 class="fb_dis_head pt5">ORGANIZER INFO</h2>
                    </div>
                    <div class="evnt_tile_bg_r evnt_tile_bg_r_call"></div>
                </div>
                <div class="clearfix"></div>
                <div class="evnt_details_body">
                    <div class="col-sm-12 no_pad">
                        <div class="form-group ">
                            <label class="col-sm-12 control-label ev_tickt_lebel pl0">Organizer Name*</label>
                            <div class="col-sm-8 no_pad">
                                <input id="txtOrgnizer" maxlength="200" class="form-control evnt_inp_cont" type="text" onkeypress="return onlyAlphabets(event,this);" >
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 mt10 no_pad">
                        <div class="form-group ">
                            <label class="col-sm-12 control-label ev_tickt_lebel pl0">
                                Description
                            </label>
                            <div class="col-sm-8 no_pad">
                                <div id="edOrgDes" class="summernote"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 no_pad">
                        <div class="form-group mb0">
                            <label class="control-label ev_tickt_lebel pl0 ">
                                <input id="Incsocial" type="checkbox">
                                Include links to Facebook , Twitter and Linkedin

                            </label>
                            <div id="dvOrgnizerFBTw" class="AddSocial add_social_cont">
                                <div class="add_social_input">
                                    <div class="col-sm-12 ">
                                        <label class="control-label ev_tickt_lebel pl0">
                                            <span class="fb"><i class="fa fa-facebook-square"></i></span> facebook.com/
                                        </label>
                                    </div>
                                    <div class="col-sm-8 ">
                                        <input class="form-control wd600" id="txtOrgFBlink" placeholder="" maxlength="256" />
                                    </div>
                                </div>
                                <div class="add_social_input mt10">
                                    <div class="col-sm-12 ">
                                        <label class="control-label ev_tickt_lebel pl0">
                                            <span class="tw"><i class="fa fa-twitter-square"></i></span> twitter.com/
                                        </label>
                                    </div>
                                    <div class="col-sm-8 ">
                                        <input id="txtOrgTWlink" class="form-control wd600" placeholder="" maxlength="256" />
                                    </div>
                                </div>
                                <div class="add_social_input mt10">
                                    <div class="col-sm-12 ">
                                        <label class="control-label ev_tickt_lebel pl0">
                                            <span class="ln"><i class="fa fa-linkedin-square"></i></span> linkedin.com/
                                        </label>
                                    </div>
                                    <div class="col-sm-8 ">
                                        <input id="txtOrgLNlink" class="form-control wd600" placeholder="" maxlength="256" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 mt10 no_pad">
                        <button type="button" id="btAddOrg" class="btn btn-primary btn-lg ev_add_sub_btn"> Add New Organizer </button>
                    </div>
                    <div class="col-sm-12 mt20 no_pad">
                        <div class="form-group">
                            <label class="col-sm-12 control-label ev_tickt_lebel pl0">Choose Existing Organizer</label>
                            @*<div class="col-sm-8 Orgz_dro_con">
                                    Organizer(s) List
                                    <span class="OrgIcn org_right pull-right">
                                        <i class="fa fa-angle-down"></i>
                                    </span>
                                </div>*@
                            <div class="col-sm-12 no_pad">
                                <div class="col-sm-8 no_pad col-xs-4">
                                    <select id="ddlOrgnizers" class="form-control evnt_inp_cont"></select>
                                </div>
                                <div class="col-sm-2 col-xs-4">
                                    <button type="button" onclick="editOrgnizer();" class="btn btn-primary ev_add_sub_btn org_dele_btn" id="btneditorg">Edit <i class="fa fa-pencil"></i></button>
                                </div>
                                <div class="col-sm-2 col-xs-4">
                                    <button type="button" id="btndeleteorg" class="btn btn-primary ev_add_sub_btn org_dele_btn">Delete <i class="fa fa-trash"></i></button>
                                </div>
                                <table style="display:none;" id="tblOrgnizer"></table>
                            </div>
                            @*<div  class="OrglistShow col-sm-8 no_pad ">
                                            <div id="dvOrganizer" class="list-group ev_orgz_group">
                                                <div id="dvOrg_0" class="list-group-item ev_orgz_list">

                                                    <div class="col-sm-8 no_pad">Organizer 1</div>
                                <div class="col-sm-4 no_pad text-right ev_org_edt_main">
                                    <a href="#"><i class="fa fa-pencil"></i> </a> |
                                    <a href="#"><i class="fa fa-trash"></i> </a>
                                </div>
                                                </div>

                                            </div>

                                        </div>*@
                        </div>
                    </div>

                </div>
            </div>
            <div class="clearfix"></div>

            <div class="event_detail_container">
                <div class="evnt_tile_head">
                    <div class="evnt_tile_bg_l"></div>
                    <div class="col-sm-6 col-xs-6 text-left no_pad">
                        <h2 class="fb_dis_head pt5">TICKETING INFORMATION</h2>
                    </div>
                    <div class="col-sm-6 col-xs-6 text-right">
                        <label class="ev_fb_lable">Will Call <input type="radio" id="id_willcall"  name="seating" checked="checked" /></label>
                        <label class="ev_fb_lable">Seating <input type="radio" id="id_reservedseating" name="seating"></label>
                    </div>

                    <div class="evnt_tile_bg_r evnt_tile_bg_r_call"></div>
                </div>
                <div class="evnt_details_body">

                    <div class="col-sm-12 no_pad text-left mt10 evnt_tct_btn ev_btn_type">
                        <label class="ev_add_tkt_tit col12">Add ticket type*</label>
                        <button type="button" class="btn btn-primary save_btnfree save_btn">FREE <i class="fa fa-plus"></i> </button>
                        <button type="button" class="btn btn-primary save_btnpaid save_btn">PAID <i class="fa fa-plus"></i></button>
                        <button type="button" class="btn btn-primary save_btndonation save_btn xsmr0 ">DONATE <i class="fa fa-plus"></i> </button>
                    </div>
                    <div class="col-sm-12 no_pad">
                        <div class="modal-content ticket_panel mt10">

                            <div id="MasterDiv" class="">

                            </div>
                            <div id="clonediv-n" class="ticket_haeding ev_ticket_haeding mt10 pb10" style="display:none;" tabindex="-1">
                               <div class="col-sm-10 col-xs-12 ">
                                        <div class="col-sm-1 text-center no_pad ev_row_mov">

                                            <span class="ev_row_icn"><i class="fa fa-ellipsis-v"></i></span>
                                            <input type="hidden" id="id_ticket_id-n" />
                                            <input type="hidden" id="id_order-n" />
                                            <input type="hidden" id="id_Tickettype-n" />
                                            <input type="hidden" id="id_fee-n" />
                                            <input type="hidden" id="id_total-n" />
                                            <input type="hidden" value="0" id="id_feetype-n" />
                                            <input type="text" value="0" id="id_totalamt-n" hidden />
                                            <input type="text" value="0" id="id_msg-n" hidden />
                                        </div>
                                        <div class="col-sm-3 no_pad">
                                            <div class="form-group">
                                                <label class="col-sm-4 control-label ev_tickt_lebel">Ticket*</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control evnt_inp_cont chkvalidation" id="id_ticket_type-n" placeholder="Early Bird, RSVP..." maxlength="256" onblur="checkvalidatetkt(this.id)" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-2 no_pad">
                                            <div class="form-group">
                                                <label class="col-sm-3 control-label ev_tickt_lebel">Qty*</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control evnt_inp_cont txtsum numbers chkvalidation" id="id_quantity_total-n" maxlength="6" placeholder="" onblur="changeqty(this.id)" onkeypress="allownumber(this,event,this.id)" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3 no_pad">
                                            <div class="form-group paidticket-n" id="id_paid-n">
                                                <label class="col-sm-5 no_pad control-label ev_tickt_lebel">Price* $</label>
                                                <div class="col-sm-7 ">
                                                    <input type="text" class="form-control evnt_inp_cont numbers" id="id_cost-n" onkeypress="validatenumdec(this, event, this.id)" onkeyup="changefee(this.id, event)" onblur="    tofixed(this.id)"   placeholder="0.00" maxlength="9" />
                                                </div>

                                            </div>
                                            <div class="form-group normalticket-n" style="display:none; text-align:center;" id="id_normal-n">
                                                <label class="col-sm-4 no_pad control-label ev_tickt_lebel" id="id_paymenttype-n" />

                                            </div>
                                            <div class="label-control lbl_bot_price paidticket-n" id="idlbuyertotal-n">
                                                <span class="buyer_tot">Buyer(s) total: </span>
                                                <span class="buyer_price" id="id_buyerprice-n">$0.00 </span>
                                                <span class="evnt_toltip"><i class="fa fa-info-circle"></i></span>

                                                <div class="tooltip" id="id_tooltip-n">Ticket Price &nbsp; &nbsp; &nbsp; $0.00 <br /> Fee &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  &nbsp;  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $0.00 <br /> Buyer(s) Total &nbsp;&nbsp; &nbsp;  $0.00</div>
                                                <label class="pull-right" style="color:red;display:none;" id="id_lblprice-n">Please enter valid number</label>
                                            </div>
                                            @*<div class="label-control lbl_bot_price  paidticket-n" id="idlbuyertotal-n">
                                                    <span class="buyer_tot">Buyer total: </span>
                                                    <span class="buyer_price" id="id_buyerprice-n">$0.00 </span>
                                                    <p title="Ticket Price  $0.00 &#013;        Fee $0.00 &#013;           Buyer(s) Total $0.00" id="id_tooltip-n" class="masterTooltip"><span ><i class="fa fa-info-circle"></i></span></p>
                                                    @*<span class="evnt_toltip"><i class="fa fa-info-circle"></i></span>
                                                    <div class="tooltip" id="id_tooltip-n" >Ticket Price  $0.00 <br /> Fee $0.00 <br /> Buyer's Total $0.00</div

                                                </div>*@
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="col-sm-3 no_pad xs768det-del">
                                            <div class="form-group paidticket-n" id="id_Disc-n">
                                                <label class="col-sm-4 control-label ev_tickt_lebel">Disc.$</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control evnt_inp_cont numbers" placeholder="0" id="id_Discount-n" onkeypress="validatenumdec(this, event, this.id)"  onblur="    tofixed(this.id)" maxlength="9"/>

                                                </div>
                                            </div>
                                        </div>
                                        
                                     <div class="clearfix"></div>
                                   
                                </div>
                                <div class="col-sm-2 col-xs-12 text-right">
                                    <div class="col-sm-1 no_pad evnt_sett_main xs768detail">
                                        <div class="nav evnt_setting">
                                            <span class="evnt_set ev_set_more" id="id_setting-n" onclick="showsettingdiv(this.id);"> Detail </span>
                                            <!--  <a href="#evnt_set" class="evnt_set">More </a> -->
                                            @*<button class="btn ev_set_del_btn evnt_set" id="btndelete-n" type="button" onclick="deletediv(this.id);"><i class="fa fa-trash"></i></button>*@
                                            <a class="btn ev_set_del_btn evnt_set" id="btndelete-n" type="button" href="#cnfrmdelete-n" data-toggle="modal">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                            @*<a href=""><i class="fa fa-trash"></i></a>*@


                                        </div>
                                    </div>
                                 </div>
                                    <div class="clearfix"></div>
                                    <!-- Event Setting Start  -->
                                    <div class="tab-content" id="evnt_set-n">
                                        <div class="col-sm-12 no_pad ">
                                            <div class="modal-content evnt_set_panel">
                                                <div class="modal-body pb0">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label ev_tickt_lebel pl0">Description</label>
                                                            <div class="col-sm-6">
                                                                <input type="text" class="form-control evnt_inp_cont" id="id_descriptionclass-n" placeholder="Ticket description" maxlength="1000" />
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="form-group">
                                                            <label class="label-control pl0 ev_tickt_lebel mt5">
                                                                <input type="checkbox" class="" id="id_show_description-n" />
                                                                Show ticket description on event page
                                                            </label>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="form-group" id="id_feestruct-n" style="display:none">
                                                            <label class="col-sm-1 control-label ev_tickt_lebel pl0">Fees</label>
                                                            <div class="col-sm-5">
                                                                <select class="form-control ev_drop_label " id="id_include_ticket_fees-n" onchange="feechange(this.id)">
                                                                    <option value="0">customer pays the fees</option>
                                                                    <option value="1">I absorb the fee</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="form-group mt20">
                                                            <div class="col-sm-6 ev_pad_l0">
                                                                <div class="col-sm-12 no_pad">
                                                                    <label class="label-control pl0 ev_tickt_lebel" >Ticket Sales Start
                                                                        <div class="upload_help_icn pull-right">
                                                                            <div class="tip">
                                                                                <img class="help_icon_hov" src="~/Images/icon-question.gif" id="hovstart-n" onmouseover="showhover(this.id);" onmouseout="showhoverout(this.id)" />
                                                                                <span class="upload_help_icn_inner" id="help_start_inner-n">
                                                                                    Your Event's date and time need to be
                                                                                    selected in order to update sales start date
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </label>
                                                                </div>
                                                                <div class="col-sm-8 ev_pad_l0 mb5 xs_pad_0">
                                                                    <input class="form-control event_time_str ev_tickt_input" placeholder="MM/DD/YYYY" id="id_salestart-n" onchange="changetext(this.id);" disabled="disabled"     />
                                                                </div>
                                                                <div class="col-sm-4 no_pad mb5 xs_pad_0">
                                                                    @*<input type="hidden" value="7:00pm" id="id_hdsaletimestart-n" />*@
                                                                    <input id="id_saletimestart-n" type="text" class="time_picker form-control ev_tickt_input mr0" placeholder="00:00am" onchange="checkvalidtime(this.id)" disabled="disabled"  />
                                                                </div>

                                                            </div>

                                                            <div class="col-sm-6 ev_pad_r0 xs_pad_0">
                                                                <div class="col-sm-12 no_pad">
                                                                    <label class="label-control pl0 ev_tickt_lebel">Ticket Sales End
                                                                        <div class="upload_help_icn pull-right">
                                                                            <div class="tip">
                                                                                <img class="help_icon_hov" src="~/Images/icon-question.gif" id="hovend-n" onmouseover="showhover(this.id);" onmouseout="showhoverout(this.id)" />
                                                                                <span class="upload_help_icn_inner" id="help_end_inner-n">
                                                                                    Your Event's date and time need to be selected in order to update sales
                                                                                    end date
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </label>
                                                                </div>
                                                                <div class="col-sm-8 ev_pad_l0 mb5">
                                                                    <input class="form-control event_time_str ev_tickt_input" placeholder="MM/DD/YYYY" id="id_saleend-n" onchange="checkvalidDate(this.id)" disabled="disabled"  />
                                                                </div>
                                                                <div class="col-sm-4 ev_pad_l0 mb5">
                                                                    @*<input type="hidden" value="7:00pm" id="id_hdsaletimeend-n" />*@
                                                                    <input id="id_saletimeend-n" type="text" class="time_picker form-control ev_tickt_input mr0" placeholder="00:00am" onchange="checkvalidtime(this.id)" disabled="disabled"  />
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="form-group">
                                                            <div class="col-sm-12 mt10 no_pad">
                                                                <label class="label-control pl0 ev_tickt_lebel mt5">
                                                                    <input type="checkbox" class="" id="id_ticketshidden-n" onclick="showdiv(this.id)" />
                                                                    Hide this ticket type
                                                                </label>
                                                            </div>
                                                            <label class="EvaddTkt lbl_bot_text " id="id_EvaddTkt-n" onclick="hideunhide(this.id);">Add ticket auto-hide schedule</label>
                                                            <label class="RemvTkt label-control lbl_bot_text wd600" id="id_RemvTkt-n" onclick="hideunhide(this.id);" style="display:none;">Remove ticket auto-hide schedule</label>
                                                            <div class="CusdateCont evnt_cus_date_cont" id="id_CusdateCont-n" style="display:none;">
                                                                <div class="col-sm-12">
                                                                    <label class="label-control ev_tickt_lebel fs-13" id="id_TktnotSale-n" onclick="hideunhide(this.id)">
                                                                        <input type="radio" id="id_auto_hide_type_0-n" checked="checked" />
                                                                        When ticket is not on sale
                                                                    </label>
                                                                </div>
                                                                <div class="clearfix"></div>
                                                                <div class="col-sm-12">
                                                                    <label class="label-control ev_tickt_lebel fs-13 mt5" id="id_CusdateTime-n" onclick="hideunhide(this.id)">
                                                                        <input type="radio" id="id_auto_hide_type_1-n" />
                                                                        For custom date and time
                                                                    </label>
                                                                </div>
                                                                <div class="hide_unt_aft" id="id_HideuntDiv-n" style="display:none;">

                                                                    <div class="form-group mt10">
                                                                        <div class="col-sm-6 ev_pad_l0">
                                                                            <div class="col-sm-12 no_pad">
                                                                                <input type="checkbox" id="id_hideuntil-n" onchange="enablehideafteruntil(this.id)" /> <label class="label-control ev_tickt_lebel">Hide Untill</label>
                                                                            </div>
                                                                            <div class="col-sm-8 ev_pad_l0">
                                                                                <input class="form-control event_time_str ev_tickt_input" placeholder="MM/DD/YYYY" id="id_auto_hide_until_Date-n" onchange="changetext(this.id); " readonly="readonly" />
                                                                            </div>
                                                                            <div class="col-sm-4 no_pad">
                                                                                <input type="hidden" value="7:00pm" id="id_hdautohideuntil-n" />
                                                                                <input id="id_auto_hide_until_time-n" type="text" class="time_picker form-control ev_tickt_input mr0" placeholder="00:00am" onchange="checkvalidtime(this.id) " readonly="readonly" />
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-sm-6 ev_pad_r0">
                                                                            <div class="col-sm-12 no_pad">
                                                                                <input type="checkbox" id="id_hideafter-n" onchange="enablehideafteruntil(this.id)"/><label class="label-control ev_tickt_lebel">Hide After</label>
                                                                            </div>
                                                                            <div class="col-sm-8 ev_pad_l0">
                                                                                <input class="form-control event_time_str ev_tickt_input" placeholder="MM/DD/YYYY" id="id_auto_hide_after_Date-n" onchange="checkvalidDate(this.id)" readonly="readonly" />
                                                                            </div>
                                                                            <div class="col-sm-4 no_pad">
                                                                                <input type="hidden" value="7:00pm" id="id_hdautohideafter-n" />
                                                                                <input id="id_auto_hide_after_Time-n" type="text" class="time_picker form-control ev_tickt_input mr0" placeholder="00:00am" onchange="checkvalidtime(this.id) " readonly="readonly" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <div class="clearfix donateshow-n" id="cleafix-n"></div>
                                                        <div class="form-group donateshow-n" id="maxmin-n">
                                                            <label class="label-control pl0 ev_tickt_lebel wd600">Tickets allowed per order</label>
                                                            <div class="evnt_time_cont wd280 mr5_p">
                                                                <input class="form-control evnt_inp_cont wd240 numbers " placeholder="0" id="id_min_ticket-n" onkeypress="allownumber(this,event,this.id)" maxlength="6" />
                                                                <label class="label-control lbl_bot_minim ">Minimum</label>

                                                            </div>
                                                            <div class="evnt_time_cont wd280">
                                                                <input class="form-control evnt_inp_cont wd240 numbers" placeholder="0" id="id_max_ticket-n" onkeypress="allownumber(this,event,this.id)" maxlength="6" />
                                                                <label class="label-control lbl_bot_minim ">Maximum</label>
                                                                <label class="col-sm-12 no_pad control-label" style="color:red;display:none" id="id_lblmax-n">Please enter valid number</label>

                                                            </div>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                        <div class="form-group">
                                                            @*<div class="col-sm-12 no_pad">
                                        <label class="label-control pl0 ev_tickt_lebel mt5">
                                            <input type="checkbox" class="" id="id_disableticket-n" />
                                            Disable Ticket
                                        </label>
                                    </div>*@
                                                            <div class="col-sm-12 no_pad">
                                                                <label class="label-control pl0 ev_tickt_lebel mt5">
                                                                    <input type="checkbox" class="" id="id_marksoldout-n" />
                                                                    Mark Sold Out
                                                                </label>
                                                            </div>
                                                            <div class="col-sm-12 no_pad donateshow-n" id="display-n">
                                                                <label class="label-control pl0 ev_tickt_lebel mt5">
                                                                    <input type="checkbox" class="" id="id_displayremaining-n" />
                                                                    Display Remaining Tickets
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <div class="modal-footer no_pad mt5">
                                                        <div class="col-sm-12 text-left mt10">
                                                            <button class="EvntMinim ev_set_del_btn btn " id="id_Minimize-n" onclick="minimize(this.id);" type="button">
                                                                <i class="fa fa-arrow-up"></i>
                                                                Minimize Setting
                                                            </button>
                                                            @*<label class="EvntMinim evnt_set_minimise">
                                        <i class="fa fa-arrow-up"></i>
                                        Minimize Ticket details
                                    </label>*@
                                                        </div>
                                                    </div>
                                                </div>



                                            </div>
                                        </div>
                                        <!-- Event Setting End  -->
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="modal fade" id="cnfrmdelete-n" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-sm confirm-msg ok-msg custom">
                                            <div class="modal-content">
                                                <!-- <div class="modal-header custom">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div> -->
                                                <form id="contactForm" class="fullw1 add">
                                                    <div class="modal-body text-center pv50 txt-msg">
                                                        <h4 class="msg">Are you sure you want to delete?</h4>
                                                    </div>
                                                    <div class="modal-footer msg-action-btn ok">
                                                        <button type="button" class="btn btn-primary yes ok" id="btnyes-n" onclick="deletediv(this.id);" data-dismiss="modal">Yes</button>
                                                        <button type="button" class="btn btn-primary no" data-dismiss="modal">No</button>

                                                    </div>
                                                </form>
                                            </div>
                                        </div><!-- confirm-msg -->
                                    </div>

                                </div>
                           <div class="clearfix"></div>
                            <div class="modal-footer ticket_footer mt10 text" id="id_ticket_footer">
                                <div class="col-sm-12 text-right">
                                    <label class="ev_tickt_lebel">Total Capacity:<span id="id_totalqty">0</span></label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 row mt10">

                        <div class="col-sm-12 no_pad">
                            <label class="label-control ev_tickt_lebel pl0">
                                <input type="hidden" value="0" id="id_cc" />
                                <input type="hidden" value="0" id="id_value" />
                                <input type="hidden" value="0" id="id_percentage" />
                                <input class="" type="checkbox" id="id_ticketdeliveryaddr">
                                &#10; Ticket Delivery Address
                            </label>
                        </div>
                        <div class="col-sm-12 no_pad">
                            <label class="label-control ev_tickt_lebel pl0">
                                <input class="" type="checkbox" id="id_showremaningticket">
                                &#10; Show the number of ticket(s) remaining on the registration page
                            </label>
                        </div>
                        <div class="col-sm-12 no_pad">
                            <label class="label-control ev_tickt_lebel pl0">
                                <input class="" type="checkbox" id="id_variablecharge" >
                                &#10; Variable Charge(s)
                            </label>
                        </div>



                        <div class="TicketFees col-sm-12 no_pad">
                            <div class="form-group">
                                <div class="col-sm-5 no_pad">
                                    <label class="col-sm-4 control-label ev_tickt_lebel">Description*</label>
                                    <div class="col-sm-8">
                                        <input class="form-control evnt_inp_cont chkvalidation" type="text" placeholder="" id="id_vardesc" maxlength="256">
                                    </div>
                                </div>
                                <div class="col-sm-5 no_pad">
                                    <label class="col-sm-2 control-label ev_tickt_lebel">Type</label>
                                    <div class="col-sm-10">
                                        <select class="form-control ev_drop_label" id="variabletype">
                                            <option value="O">Optional</option>
                                            <option value="R">Required </option>

                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-2 no_pad">
                                    <button class="btn btn-primary btn-lg  ev_add_sub_btn var_chg_btn" type="button">Add</button>
                                </div>
                            </div>
                            <div class="col-sm-12 mt20 no_pad">
                                <div class="list-group ev_var_chrg_group" id="id_Mainvariable" style="display:none;">




                                </div>
                                <div class="col-sm-12 no_pad" id="id_clonevariable-n" style="display:none;">
                                    <div class="list-group-item ev_var_chrg_list">
                                        <div class="form-group">
                                            <div class="col-sm-7 col-xs-7">
                                                <input class="form-control evnt_inp_cont" type="text" placeholder="Variable Charges Description n" id="id_varsubdesc-n" maxlength="256" onblur="checkvalidatetkt(this.id)">
                                            </div>
                                            <div class="col-sm-4 col-xs-4">
                                                <label class="col-sm-1 control-label ev_tickt_lebel">$</label>
                                                <div class="col-sm-10 no_pad">
                                                    <input class="form-control evnt_inp_cont" type="text" placeholder="0.00" id="id_varsubprice-n" maxlength="9" onkeypress="validatenumdec(this, event, this.id);" onblur="    tofixed(this.id); checkvalidatetkt(this.id);" >
                                                </div>
                                            </div>
                                            <div class="col-sm-1 col-xs-1 no_pad text-right var_chrg_edt_main">
                                                <a class="btn" id="btn_vardelete-n"  href="#cnfrmdeletevariable-n" data-toggle="modal">
                                                    <i class="fa fa-times"></i>
                                                </a>
                                                @*<button class="btn" type="button" id="btn_vardelete-n" onclick="deletevariable(this.id)"><i class="fa fa-times"></i></button>*@
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal fade" id="cnfrmdeletevariable-n" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-sm confirm-msg ok-msg custom">
                                            <div class="modal-content">
                                                <!-- <div class="modal-header custom">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div> -->
                                                <form id="contactForm" class="fullw1 add">
                                                    <div class="modal-body text-center pv50 txt-msg">
                                                        <h4 class="msg">Are you sure you want to delete?</h4>
                                                    </div>
                                                    <div class="modal-footer msg-action-btn ok">
                                                        <button type="button" class="btn btn-primary yes ok" id="btnyesvariable-n" onclick="deletevariable(this.id)" data-dismiss="modal">Yes</button>
                                                        <button type="button" class="btn btn-primary no" data-dismiss="modal">No</button>

                                                    </div>
                                                </form>
                                            </div>
                                        </div><!-- confirm-msg -->
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="clearfix"></div>
            <div class="event_detail_container">
                <div class="evnt_tile_head">
                    <div class="evnt_tile_bg_l"></div>
                    <div class="col-sm-12 col-xs-12 text-left no_pad">
                        <h2 class="fb_dis_head ">
                            <label class="ev_fb_lable"><img src="~/Images/fb.png"> ENABLE DISCUSSION <input id="chkAllowFBDis" type="checkbox" /></label>
                            <label class="ev_fb_lable">PUBLISH EVENT TO FACEBOOK <input id="chkPublishEventOnFB" type="checkbox" /></label>
                        </h2>
                    </div>
                    <div class="evnt_tile_bg_r evnt_tile_bg_r_call"></div>
                </div>
            </div>
            <div class="clearfix"></div>
            <div class="event_detail_container mt10">
                <div class="evnt_tile_head">
                    <div class="evnt_tile_bg_l"></div>
                    <div class="col-sm-12 col-xs-12 text-left no_pad">
                        <h2 class="fb_dis_head pt5">
                            EVENT SETTING
                        </h2>
                    </div>
                    <div class="evnt_tile_bg_r evnt_tile_bg_r_call"></div>
                </div>
                <div class="evnt_details_body">
                    <div class="form-group">
                        <div class="col-sm-12 no_pad">
                            <label class="Pubpage label-control ev_tickt_lebel pl0">
                                <input type="radio" checked="checked" name="rdPr" id="rdPublic" />
                                Public
                            </label>
                        </div>
                        <div class="clearfix"></div>
                        <div class="col-sm-12 no_pad">
                            <label class="Prvpage label-control ev_tickt_lebel pl0">
                                <input type="radio" name="rdPr" id="rdPrivate" />
                                Private
                            </label>
                        </div>
                        <div class="clearfix"></div>
                        <div class="priv_cont">
                            <label class="label-control label_private ev_tickt_lebel">
                                <input type="checkbox" id="chkShareOnFB">
                                Attendees can share this event on Facebook, Twitter, and LinkedIn
                            </label>
                            <div class="clearfix"></div>
                            <label class="label-control label_private ev_tickt_lebel">
                                <input type="checkbox" id="chkGuestonly">
                                This event is by Invite-Only
                            </label>
                            <div class="clearfix"></div>
                            <label class="label-control label_private ev_tickt_lebel">
                                <input type="checkbox" id="chkReqPassword">
                                Require a password to view the event page
                            </label>
                            <input type="password" id="txtReqPassword" readonly="readonly" value="" class="form-control evnt_inp_cont mb10 wd500 chkvalidation" placeholder="Enter Password" />
                        </div>
                    </div>


                </div>
                <div class="clearfix"></div>
                <div class="col-sm-12 text-right mb10 make_live_btn">
                    <button type="button" id="btSave" class="cbtSave btn ev_live_sub_btn mb5 cdisable"  disabled="disabled">
                        SAVE
                        <span> > </span>
                    </button>
                    
                    <button  class="cbtPreview btn ev_live_sub_btn cdisable mb5" type="button"  disabled="disabled">
                        PREVIEW &#10;
                        <span> > </span>
                    </button>

                    <button type="button" id="btMakeLive" class="cbtMakeLive btn ev_live_sub_btn mb5 grn_live_btn cdisable"  disabled="disabled">
                        MAKE YOUR EVENT LIVE
                        <span> > </span>
                    </button>

                    <input type="hidden" id="hidAddSno" value="" />
                    <input type="hidden" id="hidSchLastState" value="" />
                    <input type="hidden" id="hidOrgnizer" value="" />
                    <input type="hidden" id="hidAddressStatus" value="" />
                    <input type="hidden" id="hdEventId" value="" />

                    <input id="imageeror" type="hidden" value="0" />
                    <input id="image_count" type="hidden" />
                    <input type="hidden" id="hdUniqueguid" value="" />
                    <input type="hidden" id="hddiscount" value="0" />
                    <input type="hidden" id="hdSchType" value="" />
                    <input type="hidden" id="hdMonthlyType" value="DW" />


                </div>
            </div>

        </div>
    </div>
    //----------Model Starts Here------------------
}

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title ev_modal_header_title" id="myModalLabel">Add Venue</h4>
                </div>
                <div  id="diverrorvenue" style="display:none;">
                    <div class="er_UI_main">
                        <div class="er_UI_img"></div>
                        <div class="er_suc" id="erraccmsgvenue">

                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    
                    <div class="col-sm-6">
                        <div class="form-group">
                            <input id="VenueName" class="form-control evnt_inp_cont" placeholder="Enter the Venue Name" />
                        </div>
                        <div class="form-group">
                            <input id="Address1" class="form-control evnt_inp_cont" placeholder="Address 1" />
                        </div>
                        <div class="form-group">
                            <input id="Address2" class="form-control evnt_inp_cont" placeholder="Address 2" />
                        </div>
                        <div class="form-group">
                            <input id="City" class="form-control evnt_inp_cont" placeholder="City" />
                        </div>

                        <div class="col-sm-6 row">
                            <div class="form-group">
                                <input id="State" class="form-control evnt_inp_cont" placeholder="State" />
                            </div>
                        </div>
                        <div class="col-sm-6 row pull-right">
                            <div class="form-group">
                                <input id="Zip" class="form-control evnt_inp_cont" placeholder="Zip Code" />
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="form-group mb5 ">
                            @Html.DropDownList("CountryID", ViewBag.Countries as List<SelectListItem>, new { @class = "form-control evnt_inp_cont" })
                        </div>

                    </div>
                    <div class="col-sm-6">
                        <div class="col-sm-12 no_pad location_map_div loc_map map_canvas" id="map_canvas"> <i class="fa fa-map-marker"></i> </div>
                    </div>
                    <div class="clearfix"></div>
                    <div id="dvAddFooter">
                        <div class="col-sm-12 mt10">
                            <button type="button" id="btAddMore" class="btn btn-primary ev_add_sub_btn">Add More</button>
                            <button type="button" id="btReset" class="btn btn-primary ev_add_sub_btn">Reset</button>
                        </div>
                        <div class="clearfix"></div>
                        <div class="col-sm-12">
                            <div class="col-sm-12 no_pad ">
                                <div class="list-group ev_add_venue_group mb0">
                                    <div class="col-sm-10 no_pad mt5 ev_add_venue_addres">
                                        <table id="tblAddress" class="table table-responsive">
                                            <tbody>
                                                @*<tr class="event_add_table">
                                                    <th>Address</th>
                                                </tr>*@
                                            </tbody>
                                        </table>
                                    </div>
                                    @*<div class="ev_add_venue_list">
                            <div  class="col-sm-10 no_pad mt5 ev_add_venue_addres">

                            USA, Aghapur Road, Sector 41, Noida, Uttar Pradesh, India </div>
                            <div class="col-sm-2 no_pad text-right ev_add_venue_action">
                                <a href="#"><div class="ev_ven_act"><i class="fa fa-pencil"></i>  </div></a>
                                <a href="#"><div class="ev_ven_act ev_ven_blue"><i class="fa fa-trash"></i> </div></a>
                            </div>
                        </div>
                        <div class="ev_add_venue_list">
                            <div class="col-sm-10 no_pad mt5 ev_add_venue_addres">USA, Aghapur Road, Sector 41, Noida, Uttar Pradesh, India</div>
                            <div class="col-sm-2 no_pad text-right ev_add_venue_action">
                                <a href="#"><div class="ev_ven_act"><i class="fa fa-pencil"></i>  </div></a>
                                <a href="#"><div class="ev_ven_act ev_ven_blue"><i class="fa fa-trash"></i> </div></a>
                            </div>
                        </div>*@




                                </div>

                            </div>
                        </div>
                        <div class="clearfix"></div>
                </div>
                </div>
                <div class="modal-footer no_pad">
                    <button type="button" id="btSaveAddress" data-dismiss="modal" aria-label="Close" class="btn btn-primary col-sm-12 ev_add_sub_btn ad_ven_mod_btn">SAVE</button>
                </div>

            </div>
        </div>
    </div>
    <a class="td-btn" id="btdeOrg" type="button" href="#confirm-deleteorg-ok" data-toggle="modal" style="display:none"></a>
    <div class="modal fade" id="confirm-deleteorg-ok" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm confirm-msg ok-msg custom">
            <div class="modal-content">

                <form id="contactForm" class="fullw1 add">
                    <div class="modal-body text-center pv50 txt-msg">

                        <h4 class="msg" id="hId"></h4>
                    </div>
                    <div class="modal-footer msg-action-btn ok">
                        <button type="button" id="btnYes" onclick="DeleteOrgnizer();" class="btn btn-primary no" data-dismiss="modal">Yes</button>
                        <button type="button" id="btnNo" class="btn btn-primary no" data-dismiss="modal">No</button>
                    </div>
                </form>
                <input type="hidden" id="hdUserId" value="" />
            </div>
        </div><!-- confirm-msg -->
    </div>
       <!-- Confirm Msg OK Modal Box -->
    @*<div class="modal fade" id="confirm-delete-ok" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm confirm-msg ok-msg custom">
            <div class="modal-content">
                <!-- <div class="modal-header custom">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div> -->
                <form id="contactForm" class="fullw1 add">
                    <div class="modal-body text-center pv50 txt-msg">
                        <h4 class="msg">Are you sure you want to delete?</h4>
                    </div>
                    <div class="modal-footer msg-action-btn ok">
                        <button type="button" class="btn btn-primary yes ok">Yes</button>
                         <button type="button" class="btn btn-primary no" data-dismiss="modal">No</button> 
                        
                    </div>
                </form>
            </div>
        </div><!-- confirm-msg -->
    </div>*@
        <!-- Confirm Msg OK Modal Box -->

<div class="modal fade" id="AccessDenied" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm confirm-msg ok-msg custom">
        <div class="modal-content">
            <!-- <div class="modal-header custom">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div> -->
            <form id="contactForm" class="fullw1 add">
                <div class="modal-body text-center pv50 txt-msg">
                    <h4>Access Denied !!! </h4>
                </div>
                <div class="modal-footer msg-action-btn ok">
                    <button type="button" id="btOKAccess" class="btn btn-primary yes ok">OK</button>
                </div>
            </form>
        </div>
    </div><!-- confirm-msg -->
</div>
<div>
    <input type="hidden" id="hdMaxerr" value="0"/>
    <a class="td-btn" id="btOkAc"  type="button" href="#AccessDenied" data-toggle="modal" style="display:none">

    </a>
    @*<div id='map-canvas-event'></div>*@
</div>


    @*---------------------Event Creation Script -------------------*@


    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
    @*<script src="~/Content/gmap.js"></script>*@



    <script type="text/javascript">




        var lastmodulecalled = "";
        var map_canvas ;
        var mapProp;
        google.maps.event.addDomListener(window, 'load', initialize);
        function initialize() {
            var autocomplete = new google.maps.places.Autocomplete(document.getElementById('VenueName'));
            mapProp = {
                center: new google.maps.LatLng(41.06000, 28.98700),
                zoom: 17,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            google.maps.event.addListener(autocomplete, 'place_changed', function () {
                    var mapOptions = {
                        center: new google.maps.LatLng(6.9167, 79.8473),
                        zoom: 10,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };

                    var map = new google.maps.Map(document.getElementById("map_canvas"),
                      mapOptions);
                    // create a marker
                    var latlng = new google.maps.LatLng(6.9167, 79.8473);
                    var marker = new google.maps.Marker({
                        position: latlng,
                        map: map,
                        title: 'My Place'

                    });
                    var place = autocomplete.getPlace();
                    if (place.geometry.viewport) {
                        map.fitBounds(place.geometry.viewport);
                    }
                    else {
                        map.setCenter(place.geometry.location);
                        map.setZoom(17);

                    }
                    marker.setIcon(({
                        url: place.icon,
                        size: new google.maps.Size(71, 71),
                        origin: new google.maps.Point(0, 0),
                        anchor: new google.maps.Point(17, 34),
                        scaledSize: new google.maps.Size(35, 35)
                    }));
                    marker.setPosition(place.geometry.location);
                    marker.setVisible(true);

                    var address = '';
                    if (place.address_components) {
                        address = [
                          (place.address_components[0] && place.address_components[0].short_name || ''),
                          (place.address_components[1] && place.address_components[1].short_name || ''),
                          (place.address_components[2] && place.address_components[2].short_name || '')
                        ].join(' ');
                    }

                $("#VenueName").val(place.address_components[0].long_name);

                $("#City").val(place.address_components[1].long_name);
                $("#State").val(place.address_components[3].long_name);
                $("#Zip").val(place.address_components[5].long_name);
                $("#CountryID").val(place.address_components[4].long_name);

                $("#VenueName").val(address.toString());
                $("#Address1").val(address[1].toString());
                $("#Address2").val(address[2].toString());
                 });



        //});
    }


    var pacContainerInitialized = false;
    $('#VenueName').keypress(function () {
        if (!pacContainerInitialized) {
            $('.pac-container').css('z-index', '9999');
            pacContainerInitialized = true;
            $(".js-location-cant-find").slice(1).remove();
            //js-location-cant-find
        }
    });
    function moveMarker(placeName, latlng) {
        marker.setIcon(image);
        marker.setPosition(latlng);
        infowindow.setContent(placeName);
        infowindow.open(map, marker);
    }

    $(function () {
        $("body").click(function (e) {

            if (e.target.id == "aCantFind" || e.target.id == "divCNF" || e.target.id == "txtEventLocation") {
            }
            else {
                $(".pac-container").removeClass('map-drop-block');
            }
        });
    })
    function txtEventLocation_KeyPress(e) {
        if (e.keyCode === 13) {
            $(".pac-container").removeClass('map-drop-block');
        }
        return false;
    }






        $(".chkvalidation").blur(function () {

            var msg = disablebutton();
            if(msg=="")
            {

                $(".cdisable").removeAttr("disabled");

            }


            $(this).removeClass("err-bor");

        });



        var specialKeys = new Array();
        specialKeys.push(8); //Backspace
        specialKeys.push(9); //Tab
        specialKeys.push(46); //Delete
        specialKeys.push(36); //Home
        specialKeys.push(35); //End
        specialKeys.push(37); //Left
        specialKeys.push(39); //Right
        function IsAlphaNumeric(e) {
            var keyCode = e.keyCode == 0 ? e.charCode : e.keyCode;
            var ret = ((keyCode >= 48 && keyCode <= 57) || (keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122) || (specialKeys.indexOf(e.keyCode) != -1 && e.charCode != e.keyCode));

            return ret;
        }
        $(window).load(function () {

            var numbers = ajaxsetup('CreateEvent', 'CreateEventEnternumberUI');
            var deletemsg = ajaxsetup('CreateEvent', 'CreateEventDeleteUI');
            $('#id_lblprice-n').html(numbers);
            $('#id_lblmax-n').html(numbers);
            $('.msg').html(deletemsg);


        });

        function ValEventdate(e) {
            if (e.trim() == "txtDateFrom") {

                var enddate = $('#txtDateTo').val();
                var startdate = $('#txtDateFrom').val();
                var errorMsg = checkDate(e);

                if (errorMsg != "") {



                    $('#txtDateFrom').focus();
                    $('#txtDateFrom').val("");
                    $('#txtDateTo').val("");

                } else {

                    $('#txtDateTo').val($('#' + e).val());
                }


            }
            if (e.trim() == "txtDateTo") {
                var enddate = $('#txtDateTo').val();
                var startdate = $('#txtDateFrom').val();

                var errorMsg = checkDate(e);
                ValEventTime(e,event);
                if (errorMsg != "") {



                    $('#' + e).focus();
                    $('#txtDateTo').val(startdate);


                }

                errorMsg = compare(startdate, enddate);

                if (errorMsg != "") {



                    $('#' + e).focus();
                    $('#txtDateTo').val(startdate);
                    // field.value = "";


                }

            }
            if (e.trim() == "txtStartDate") {

                var enddate = $('#txtEndDate').val();
                var startdate = $('#txtStartDate').val();

                var errorMsg = checkDate(e);

                if (errorMsg != "") {



                    $('#txtStartDate').focus();
                    $('#txtStartDate').val("");
                    $('#txtEndDate').val("");

                } else {

                    $('#txtEndDate').val($('#' + e).val());
                }



            }
            if (e == "txtEndDate") {
                var enddate = $('#txtEndDate').val();
                var startdate = $('#txtStartDate').val();
                var errorMsg = checkDate(e);
                ValEventTime(e, event); // checking if endDate !> startDate
                if (errorMsg != "") {



                    $('#' + e).focus();
                    $('#txtEndDate').val(startdate);


                }

                errorMsg = compare(startdate, enddate);

                if (errorMsg != "") {



                    $('#' + e).focus();
                    $('#txtEndDate').val(startdate);
                    // field.value = "";


                }

            }
        }
        // For parsing time 7:00pm to dateTime
        function parseTime(timeString) {
            if (timeString == '') return null;

            var time = timeString.match(/(\d+)(:(\d\d))?\s*(p?)/i);
            if (time == null) return null;

            var hours = parseInt(time[1], 10);
            if (hours == 12 && !time[4]) {
                hours = 0;
            }
            else {
                hours += (hours < 12 && time[4]) ? 12 : 0;
            }
            var d = new Date();
            d.setHours(hours);
            d.setMinutes(parseInt(time[3], 10) || 0);
            d.setSeconds(0, 0);
            return d;
        }

        function ValEventTime(e, event) {
            debugger;
            if ($("#txtStartDate").val() == $("#txtEndDate").val() && (e == "txtEndTime" || e == "txtEndDate")) {
                var formattedEndTime = parseTime($("#txtEndTime").val());
                var formattedStartTime = parseTime($("#txtStartTime").val());

                if (formattedEndTime.getTime() < formattedStartTime.getTime()) {
                    $("#txtEndTime").val($("#txtStartTime").val());
                }
            }

            else if ($("#txtStartDate").val() == $("#txtEndDate").val() && (e == "txtDateTo")) {
                var formattedEndTime = parseTime($("#txtTimeEnd").val());
                var formattedStartTime = parseTime($("#txtTimeStart").val());

                if (formattedEndTime.getTime() < formattedStartTime.getTime()) {
                    $("#txtTimeEnd").val($("#txtTimeStart").val());
                }
            }
            var errorMsg = "";
            if (e == "txtStartTime") {
                errorMsg = checkTime(e);
                if (errorMsg != "") {

                    $('#txtStartTime').focus();
                    $('#txtStartTime').val("7:00pm");
                    $('#txtEndTime').val("7:00pm");

                } else {

                    $('#txtEndTime').val($('#' + e).val());
                  
                    
                }

               

            }
            if (e == "txtEndTime") {
                errorMsg = checkTime(e);
                if (errorMsg != "") {

                    $('#txtEndTime').val($('#txtStartTime').val());

                    $('#txtEndTime').focus();


                }

            }
            if (e == "txtTimeStart") {

                errorMsg = checkTime(e);
                if (errorMsg != "") {



                    $('#txtTimeStart').focus();
                    $('#txtTimeStart').val("7:00pm");
                    $('#txtTimeEnd').val("7:00pm");

                } else {

                    $('#txtTimeEnd').val($('#' + e).val());
                }

                $(".StartDatemodal").show();
            }
            if (e == "txtTimeEnd") {
                errorMsg = checkTime(e);
                if (errorMsg != "") {

                    $('#txtTimeEnd').val($('#txtTimeStart').val());

                    $('#txtTimeEnd').focus();


                }

            }

            //$(document).unbind("click");
            //setTimeout(function () { $(document).unbind("click") }, 0000);
            //$(".StartDatemodal").css("display", "block");

        }
        function DeleteTableRow(Sno) {

            $('#tblAddress tr').each(function () {
                if (Sno == $(this).find("td:first").html())
                    $(this).remove();
            });

            $("#VenueName").val("");
            $("#Address1").val("");
            $("#Address2").val("");
            $("#City").val("");
            $("#State").val("");
            $("#Zip").val("");
            $("#hidAddSno").val("");
            $("#CountryID").val('1');


        }


        function DeleteOrgnizer() {

            var Sno = $("#ddlOrgnizers").val();
            var id = $("#OrgId_" + Sno).html();
            if (id != 0)
            {
                $.ajax({
                    url: '@Url.Action("deleteOrg", "EditEvent")',
                    data: { id: id },
                    type: "Post",
                    success: function (data) {


                        if (data.Message == "O") {
                            window.location.href = '@Url.Action("Index", "Home")';

                        }
                    }




                });
            } else
            {
               
            }

        
            $('#tblOrgnizer tr').each(function () {
              
                if (Sno.trim() == $(this).find("td:first").html().trim()) {
                   
                    $(this).remove();
                    
                }
            });
           
            //$("#dllOrganizer")
            $("#ddlOrgnizers option").each(function (i) {
                if (Sno == $(this).val()) {
                    $(this).remove();
                }
            });

            var length = $('#ddlOrgnizers option').length;
            if (length == 0)
            {
                $("#btneditorg").attr('disabled', true);
                $("#btndeleteorg").attr('disabled', true);
            }

            $("#hidOrgnizer").val('');
            $("#txtOrgnizer").val('');
            $("#edOrgDes").code('');
            $("#txtOrgFBlink").val('');
            $("#txtOrgTWlink").val('');
            $("#txtOrgLNlink").val('')
            $("#Incsocial").prop("checked", false);
            $("#dvOrgnizerFBTw").hide();

        }

        function editRow(Sno) {
            //alert(ColumnValue);
            $("#hidAddSno").val(Sno);
            $("#VenueName").val($("#VenueName" + Sno).val());
            $("#Address1").val($("#Address1" + Sno).val());
            $("#Address2").val($("#Address2" + Sno).val());
            $("#City").val($("#City" + Sno).val());
            $("#State").val($("#State" + Sno).val());
            $("#Zip").val($("#Zip" + Sno).val());
            $("#CountryID").val($("#CID" + Sno).val());
            //   var row_index = $(this).parent().index('tr');


            // var i = 1;
            //var myTr = [];
            //$('#tblAddress tr').each(function () {
            //    $(this).find('td').each(function () {
            //    });
            //    alert(myTr);
            //});

            //$('#tblAddress tr').each(function () {
            //    $(this).find('td').each(function () {
            //        i =parseInt($(this).text());
            //        if (parseInt(Sno) == )
            //        {
            //            myTr.push($(this).text());
            //        }
            //    });
            //    alert(myTr);
            //});

        }
        function editOrgnizer() {
            var Sno = $("#ddlOrgnizers").val();
            //alert(Sno);
            $("#hidOrgnizer").val(Sno);
            var vOrgName = $("#OrgName_" + Sno).text();
            var vOrgDes = $("#OrgDes_" + Sno).text();
            var vOrgFB = $("#OrgFB_" + Sno).text();
            var vOrgTw = $("#OrgTw_" + Sno).text();
            var vOrgLn = $("#OrgLn_" + Sno).text();


            $("#txtOrgnizer").val(vOrgName);
            $("#edOrgDes").code(vOrgDes);
            $("#txtOrgFBlink").val(vOrgFB);
            $("#txtOrgTWlink").val(vOrgTw);
            $("#txtOrgLNlink").val(vOrgLn);

            if (vOrgFB != '' || vOrgTw != '' || vOrgLn!='') {
                $("#Incsocial").prop("checked", true);
                $("#dvOrgnizerFBTw").show();
            }
            else {
                $("#Incsocial").prop("checked", false);
                $("#dvOrgnizerFBTw").hide();
            }

        }

        function AddOrgnizer() {
            $("#hidOrgnizer").val('');
            var Sno = $("#tblOrgnizer tr").length + 1;
          
            var vOrgName = $("#txtOrgnizer").val();
            var vOrgDes = $("#edOrgDes").code();
            var vOrgFB = $("#txtOrgFBlink").val();
            var vOrgTw = $("#txtOrgTWlink").val();
            var vOrgLn = $("#txtOrgLNlink").val();

            var strHTML = '<tr>';
            strHTML = strHTML + '<td style="display:none" width="92%"> ' + Sno + ' </td>';
            strHTML = strHTML + '<td width="92%"><label id=OrgName_'+Sno+'>' + vOrgName + '</label></td>';
            strHTML = strHTML + '<td style="display:none"><label id=OrgId_' + Sno + '>0</label><label id=OrgEdit_' + Sno + '>0</label> <label id=OrgDes_' + Sno + '>' + vOrgDes + '</label></td>';
            strHTML = strHTML + '<td style="display:none"><label id=OrgFB_' + Sno + '>' + vOrgFB + '</label></td>';
            strHTML = strHTML + '<td style="display:none"><label id=OrgTw_' + Sno + '>' + vOrgTw + '</label></td>';
            strHTML = strHTML + '<td style="display:none"><label id=OrgLn_' + Sno + '>' + vOrgLn + '</label></td>';
            //strHTML = strHTML + '<td align="right"><a href="#" onclick="editOrgnizer(' + Sno + ');"><i class="fa fa-pencil"></i> </a> | <a href="#"  onclick="DeleteOrgnizer(' + Sno + ');"><i class="fa fa-trash"></i> </a></td>';
            strHTML = strHTML + '<td align="right"><i onclick="editOrgnizer(' + Sno + ')"; class="fa fa-pencil"></i> | <i onclick="DeleteOrgnizer(' + Sno + ');" class="fa fa-trash"></i></td>';

            strHTML = strHTML + '</tr>';
            //                strHTML = strHTML + '<td><div class="trigger mt5 ent_add"><a href="#" onclick="editRow(' + Sno + ');"><i class="fa fa-map-marker"></i> Edit</a>  <a href="#" id="btAddDelete" onclick="DeleteTableRow(' + Sno + ')">Delete</a> </div> </td>';


            $("#tblOrgnizer").append(strHTML);
            strHTML = '<option value="' + Sno + '" id="' + Sno + '">' + vOrgName + '</option>';

            $("#ddlOrgnizers").append(strHTML);
            
        }

        function UpdateOrgnizer() {
            var Sno = $("#ddlOrgnizers").val();

            vOrgName = $("#txtOrgnizer").val();
            vOrgDes = $("#edOrgDes").code();
            vOrgFB = $("#txtOrgFBlink").val();
            vOrgTw = $("#txtOrgTWlink").val();
            vOrgLn = $("#txtOrgLNlink").val();

            var id = $("#OrgId_" + Sno);
            $("#OrgName_" + Sno).text(vOrgName);
            $("#OrgDes_" + Sno).text(vOrgDes);
            $("#OrgFB_" + Sno).text(vOrgFB);
            $("#OrgTw_" + Sno).text(vOrgTw);
            $("#OrgLn_" + Sno).text(vOrgLn);
            if (id != 0) {
                $("#OrgEdit_" + Sno).text(1);
            }

            $("#ddlOrgnizers option").each(function (i) {
                if (Sno == $(this).val()) {
                    $(this).remove();
                }
            });
            var addOption = '<option value="' + Sno + '" id="' + Sno + '" >' + $("#txtOrgnizer").val() + '</option>';
            $("#ddlOrgnizers").append(addOption);




        }

        $(document).ready(function () {


            var lastmodulecalled = "";
            $("#btndeleteorg").click(function () {
                $("#hId").html(ajaxsetup('OrganizerMaster', 'OrgDeleteMessage'));
                $("#btdeOrg").click();
            });

            var input = document.getElementById('txtEventLocation');
            var Eloc = new google.maps.places.Autocomplete(input);


            $('#txtEventLocation').on('click', function () {
                $(".pac-container").addClass('map-drop-block');
                $("#divCNF").addClass('map-drop-block');
                $(".pac-container").slice(1).removeClass('map-drop-block');

            });
            $('#txtEventLocation').on('focus', function () {
                $(".pac-container").addClass('map-drop-block');
                $("#divCNF").addClass('map-drop-block');
                $(".pac-container").slice(1).removeClass('map-drop-block');
                setTimeout(function () {
                    $(".pac-container").append("<div class='pac-item location-places-autocomplete-cant-find ' id='divCNF'><i class='ico-search'></i><b><span class='pac-item-query'><a id='aCantFind' data-target='#myModal' class='js-location-cant-find' onclick='CannotFindLocation();' href='javascript:void(0);'   style='cursor: pointer; cursor: hand; margin-left:7px; color:#3cf;' data-toggle='modal' draggable='false'>Can't find your location?</a></span></b></div>");
                    $(".pac-container").on("click", function (event) {
                        $(this).removeClass('map-drop-block');
                        $("#divCNF").removeClass('map-drop-block'); 
                        $(this).hide();
                        $(".pac-container").slice(1).removeClass('map-drop-block');
                    });
                }, 100);

            });




            $(".cbtPreview").click(function () {
                var msg = validatemain();
                if (msg != "") {
                    $('#erraccmsg').html(msg);
                    $('#diverroacc').css('display', 'block');
                    //$(document).scrollTo('#diverroacc');

                    $('html,body').animate({ scrollTop: 0 });

                    return false;

                }
                save("Preview");
            });

            $(".cbtMakeLive").click(function () {

                var msg = validatemain();
                if (msg != "") {
                    $('#erraccmsg').html(msg);
                    $('#diverroacc').css('display', 'block');
                    $('html,body').animate({ scrollTop: 0 });
                    $('#diverroacc').focus();

                    return false;

                }


                save("Live");
            });

            $('.cbtSave').click(function () {
                var msg = validatemain();
                if (msg != "") {
                    $('#diverroacc').css('display', 'block');
                    $('#diverroacc').focus();
                    $('#erraccmsg').html(msg);
                    $('html,body').animate({ scrollTop: 0 });
                    return false;

                }

                save("Save");


            });

            $("#btOKAccess").click(function () {
                history.back();
            });
            $.ajax({
                url: '@Url.Action("GetPermission", "Permission")',
                data: { iPermissionId: 1 },
                async: false,
                datatype: "Text",
                type: "Post",
                success: function (response) {
                    if (response != "Y") {
                        $("#btOkAc").click();
                    }
                }
            });



            $("#btSaveAddress").click(function () {
                var vCols = '';
                if ($("#tblAddress tr").length <= 0) {
                    if ($("#VenueName").val().trim() != '')
                        vCols = $("#VenueName").val().trim() + ",";
                    if ($("#Address1").val().trim() != '')
                        vCols = vCols + $("#Address1").val().trim() + ",";
                    if ($("#Address2").val().trim() != '')
                        vCols = vCols + $("#Address2").val().trim() + ",";
                    if ($("#City").val().trim() != '')
                        vCols = vCols + $("#City").val().trim() + ",";
                    if ($("#State").val().trim() != '')
                        vCols = vCols + $("#State").val().trim() + ",";
                    if ($("#Zip").val().trim() != '')
                        vCols = vCols + $("#Zip").val().trim();
                    if ($("#CountryID").val().trim() != '')
                        vCols = vCols + $("#CountryID option:selected").text();

                    $('#hidAddressStatus').val('Single');
                    $("#txtEventLocation").val(vCols);

                }
                else {
                    $("#tblAddress tr").each(function (i) {
                        //var Sno = $(this).find("td:first").html();
                        //if (Sno != '' && Sno != undefined && Sno != null && (Sno == 1 || Sno == 0)) {
                        //    $("#txtEventLocation").val($("#consolidate" + Sno).text());
                        //}
                        if (i == 0) {

                            //if (Sno != '' && Sno != undefined && Sno != null ) {
                            $("#txtEventLocation").val($("#consolidate" + i).text());
                            //}
                        }
                    });
                }
            });

          




            $("#btSchMultipleEv").click(function () {
                //$("#hdSchType").val('Multiple');
            });

            $("#btSchSingleEv").click(function () {
                //$("#hdSchType").val('Single');
            });


            $('#chkReqPassword').change(function () {

                if ($('#chkReqPassword').is(":checked") == true) {

                    $('#txtReqPassword').attr('readonly', false);

                } else {
                    $('#txtReqPassword').attr('readonly', true);
                    $('#txtReqPassword').val('');
                }

            })

            $("#btDayofMonth").click(function () {
                $("#hdMonthlyType").val('DM');
            });

            $("#btDayofWeek").click(function () {
                $("#hdMonthlyType").val('DW');
            });




            function save(type)
            {

                
                var status = "";
                if (type == "Preview")
                {

                    status = "Save";
                }
                else {
                    status = type;

                }

                // Address Entry
                var SubmitAddress = [];
                var SingleTiming = [];
                var MultipleSchedule = [];
                var Orgnizer = [];
                var EventImage = [];
                var EventVariable = [];
                //var table = $("#tblAddress");


                //Variable charges
                var varlength = $("#id_Mainvariable> div").size();
                if (varlength > 0) {
                    for (var i = 0; i < varlength; i++) {
                        var varprice = $('#id_varsubprice-' + i).val().replace(',', '')

                        EventVariable.push({
                            VariableDesc: $('#id_varsubdesc-' + i).val(),
                            Price: varprice,

                        });
                    }


                }

                //Image Section

                if ($("#image_count").val() > 0) {
                    var count = ($("#image_count").val());
                    for (var i = 0; i < count; i++) {

                        var image = $("#image_hidden_" + i).val();
                        var res = image.split("####");

                        var imagename = res[0];
                        var imagetype = res[1];

                        EventImage.push({
                            EventImageUrl: imagename,
                            ImageType: imagetype,
                        });
                    }

                }


                // Ticket
                var Ticket = [];
                var divlength = $("#MasterDiv> div").size();
                if (divlength > 0) {
                    var TicketPrice = 0;
                    var Auto_Schedule = 0;
                    var AutoSechduleType = 0;
                    var TicketTypeID = 0;
                    var ecfee = 0;
                    var customerfee = 0;
                    var total = 0;
                    for (var i = 0; i < divlength; i++) {

                        if ($('#id_cost-' + i).css('display') == "block") {
                            TicketPrice = $('#id_cost-' + i).val().replace(',', '');

                        } else { TicketPrice = 0; }
                        if ($('#id_CusdateCont-' + i).css('display') == "block") {

                            Auto_Schedule = 1;

                            if ($('#id_auto_hide_type_0-' + i).is(":checked") == true) {
                                AutoSechduleType = 0;

                            }
                            if ($('#id_auto_hide_type_1-' + i).is(":checked") == true) {
                                AutoSechduleType = 1;

                            }

                        } else {
                            Auto_Schedule = 0;
                        }
                        customerfee = $('#id_fee-' + i).val();
                        ecfee = $('#id_fee-' + i).val();
                        //if ($('#id_include_ticket_fees-' + i).val() == 0) {
                          

                        //}
                        //if ($('#id_include_ticket_fees-' + i).val() == 1) {
                          

                        //}
                        total = $('#id_total-' + i).val();
                        if ($('#id_Tickettype-' + i).val() == "Free") {
                            TicketTypeID = 1

                        } else if ($('#id_Tickettype-' + i).val() == "Paid") {
                            TicketTypeID = 2

                        } else {

                            TicketTypeID = 3
                        }

                        var Discount = $('#id_Discount-' + i).val().replace(',', '');
                        var showdesc = ($('#id_show_description-' + i).is(":checked") == true ? '1' : '0');

                        Ticket.push({
                            T_name: $('#id_ticket_type-' + i).val(),
                            Qty_Available: $('#id_quantity_total-' + i).val(),
                            T_Type: $('#id_Tickettype-' + i).val(),
                            Price: TicketPrice,
                            'T_Desc': $('#id_descriptionclass-' + i).val(),
                            'Show_T_Desc': parseInt(showdesc),
                            Sale_Start_Date: $('#id_salestart-' + i).val(),
                            Sale_Start_Time: $('#id_saletimestart-' + i).val(),
                            Sale_End_Date: $('#id_saleend-' + i).val(),
                            Sale_End_Time: $('#id_saletimeend-' + i).val(),
                            'Hide_Ticket': parseInt(($("#id_ticketshidden-" + i).is(":checked") == true ? '1' : '0')),
                            Auto_Hide_Sche: parseInt(Auto_Schedule),
                            Hide_Untill_Date: $('#id_auto_hide_until_Date-' + i).val(),
                            Hide_Untill_Time: $('#id_auto_hide_until_time-' + i).val(),
                            Hide_After_Date: $('#id_auto_hide_after_Date-' + i).val(),
                            Hide_After_Time: $('#id_auto_hide_after_Time-' + i).val(),
                            Min_T_Qty: $('#id_min_ticket-' + i).val(),
                            Max_T_Qty: $('#id_max_ticket-' + i).val(),
                            T_Disable: (($('#id_disableticket-' + i).is(":checked") == true ? '1' : '0')),
                            T_Mark_SoldOut: parseInt(($('#id_marksoldout-' + i).is(":checked") == true ? '1' : '0')),
                            T_Displayremaining: ($('#id_displayremaining-' + i).is(":checked") == true ? '1' : '0'),
                            Fees_Type: $('#id_include_ticket_fees-' + i).val(),
                            'T_Discount': Discount,
                            T_order: $('#id_order-' + i).val(),
                            TicketTypeID: TicketTypeID,
                            T_AutoSechduleType: AutoSechduleType,
                            EC_Fee: ecfee,
                            Customer_Fee: customerfee,
                            TotalPrice: total

                        });

                    }

                }


                if ($("#tblAddress tr").length <= 1) {
                    if ($("#btOnlineEvent").is(":checked") == false && $("#UsepastLoc").is(":checked") == false) {
                        if ($("#txtEventLocation").val() != "") {
                            SubmitAddress.push({
                                VenueName: ' ',
                                Address1: ' ',
                                Address2: ' ',
                                City: ' ',
                                State: ' ',
                                Zip: ' ',
                                CountryID: ' ',
                                ConsolidateAddress: $("#txtEventLocation").val()
                            })
                            $('#hidAddressStatus').val('Single');
                        }
                    }
                }
                else {
                    $('#hidAddressStatus').val('Multiple');
                    $("#tblAddress tr").each(function () {

                        var Sno = $(this).find("td:first").html().trim();
                        //  alert(Sno);
                        // Multiple Address
                        if (Sno != '' && Sno != undefined && Sno != null) {
                            SubmitAddress.push({
                                VenueName: $("#VenueName" + Sno).val(),
                                Address1: ($("#Address1" + Sno).val() != null ? $("#Address1" + Sno).val() : ''),
                                Address2: ($("#Address2" + Sno).val() != null ? $("#Address2" + Sno).val() : ''),
                                City: ($("#City" + Sno).val() != null ? $("#City" + Sno).val() : ''),
                                State: ($("#State" + Sno).val() != null ? $("#State" + Sno).val() : ''),
                                Zip: ($("#Zip" + Sno).val() != null ? $("#Zip" + Sno).val() : ''),
                                CountryID: ($("#CID" + Sno).val() != null ? $("#CID" + Sno).val() : ''),
                                ConsolidateAddress: $("#consolidate" + Sno).text()
                            });
                        }

                    });

                }



                // Single Timing
                if ($("#hdSchType").val() == 'Single') {
                    SingleTiming.push({
                        'EventStartDate': $("#txtStartDate").val(),
                        'EventEndDate': $("#txtEndDate").val(),
                        'EventStartTime': $("#txtStartTime").val(),
                        'EventEndTime': $("#txtEndTime").val()
                    });
                }

                // Multiple Schedule


                if ($("#hdSchType").val() == 'Multiple') {


                    var SchOption = $("#dlSchOption").val();
                    var vWeeklyDayAry = ($("#dllWeeklyDayChk").val() == null ? '' : $("#dllWeeklyDayChk").val());
                    var vMonthlyDay = ($("#dllMonth").val() == null ? '' : $("#dllMonth").val());
                    var vMonthlyWeek = ($("#dllMonthlyWeek").val() == null ? '' : $("#dllMonthlyWeek").val());
                    var vMonthlyWeekDaysAry = ($("#dllMonthlyWeekDay").val() == null ? '' : $("#dllMonthlyWeekDay").val());

                    var vStartingFrom = $("#txtDateFrom").val();
                    var vStartingTo = $("#txtDateTo").val();
                    var vStartTime = $("#txtTimeStart").val();
                    var vEndTime = $("#txtTimeEnd").val();
                    var vMonthlyWeekDays = '';
                    var vWeeklyDay = '';

                    if (SchOption == "Daily") {
                        vWeeklyDay = '';
                        vMonthlyDay = '';
                        vMonthlyWeek = '';
                        vMonthlyWeekDays = '';
                        $("#hidSchLastState").val("Daily");
                    }
                    else if (SchOption == "Weekly") {
                        vMonthlyDay = '';
                        vMonthlyWeek = '';
                        vMonthlyWeekDays = '';
                        $("#hidSchLastState").val("Weekly");
                        for (i = 0; i < vWeeklyDayAry.length; i++) {
                            if (vWeeklyDay == '') vWeeklyDay = vWeeklyDayAry[i].toString();
                            else vWeeklyDay = vWeeklyDay + ',' + vWeeklyDayAry[i].toString();
                        }
                    }
                    else if (SchOption == "Monthly") {
                        vWeeklyDay = '';
                        if ($("#hdMonthlyType").val() == "DM") vMonthlyWeek = ''; vMonthlyWeekDays = '';
                        if ($("#hdMonthlyType").val() == "DW") {
                            vMonthlyDay = '';
                            for (i = 0; i < vMonthlyWeekDaysAry.length; i++) {
                                if (vMonthlyWeekDays == '') vMonthlyWeekDays = vMonthlyWeekDaysAry[i].toString();
                                else vMonthlyWeekDays = vMonthlyWeekDays + ',' + vMonthlyWeekDaysAry[i].toString();
                            }
                        }

                        $("#hidSchLastState").val("Monthly");
                    }
                    else if (SchOption == "Custom") {
                        vWeeklyDay = '';
                        vMonthlyDay = '';
                        vMonthlyWeek = '';
                        vMonthlyWeekDays = '';
                        $("#hidSchLastState").val("Custom");
                    }

                    MultipleSchedule.push({
                        'Frequency': SchOption,
                        'WeeklyDay': vWeeklyDay,
                        'MonthlyDay': vMonthlyDay,
                        'MonthlyWeek': vMonthlyWeek,
                        'MonthlyWeekDays': vMonthlyWeekDays,
                        'StartingFrom': vStartingFrom,
                        'StartingTo': vStartingTo,
                        'StartTime': vStartTime,
                        'EndTime': vEndTime
                    });

                }
                debugger;

                var vDefaultOrg = $("#ddlOrgnizers").val();
                
                $("#tblOrgnizer tr").each(function () {
                    var Sno = $(this).find("td:first").html().trim();
                  
                    // Multiple Address
                    if (Sno != '') {
                        Orgnizer.push({
                            Orgnizer_Id: $("#OrgId_"+Sno).text(),
                            Orgnizer_Name: $("#OrgName_"+Sno).html(),
                            Organizer_Desc: escape($("#OrgDes_" + Sno).text()),
                            Organizer_FBLink: $("#OrgFB_" + Sno).text(),
                            Organizer_Twitter: $("#OrgTw_" + Sno).text(),
                            Organizer_Linkedin: $("#OrgLn_" + Sno).text(),
                            DefaultOrg: (vDefaultOrg == Sno ? 'Y' : 'N'),
                            EditOrg: $("#OrgEdit_" + Sno).text()

                        });
                    }
                });



                // Basic Event Info

                var vEdesc = ''; //$("#edEventDesc").code();

                var varDescritpion = '';
                var optionalvariable = '';
                if ($("#id_variablecharge").is(":checked")) {
                    varDescritpion = $('#id_vardesc').val();
                    optionalvariable = $('#variabletype').val();

                }
                //$("#edEventDesc").code().replace(/<\/p>/gi, "\n").replace(/<br\/?>/gi, "\n").replace(/<\/?[^>]+(>|$)/g, "");
                var evDec = escape($("#edEventDesc").code());

                var model = {
                    'EventTypeID': $("#EventType").val(),
                    'EventCategoryID': $("#ddlEventCategory").val(),
                    'EventSubCategoryID': $("#ddlEventSubCategory").val(),
                    'UserID': '',
                    'EventTitle': $("#txtEventTitle").val(),
                    'EventDescription': evDec,
                    'EventPrivacy': ($("#rdPublic").is(":checked") == true ? 'Public' : 'Private'),
                    'Private_ShareOnFB': ($("#chkShareOnFB").is(":checked") == true ? 'Y' : 'N'),
                    'Private_GuestOnly': ($("#chkGuestonly").is(":checked") == true ? 'Y' : 'N'),
                    'Private_Password': $("#txtReqPassword").val(),
                    'EventUrl': $("#txtEventUrl").val().trim(),
                    'PublishOnFB': ($("#chkPublishEventOnFB").is(":checked") == true ? 'Y' : 'N'),
                    'EventStatus': status,
                    'AddressDetail': SubmitAddress,
                    'EventVenue': SingleTiming,
                    'TimeZone': $("#dllTimeZone").val(),
                    'DisplayStartTime': ($("#chkDisplayStartTime").is(":checked") == true ? "Y" : "N"),
                    'DisplayEndTime': ($("#chkDisplayEndTime").is(":checked") == true ? "Y" : "N"),
                    'DisplayTimeZone': ($("#chkTimeZone").is(":checked") == true ? "Y" : "N"),
                    'FBUrl': '',
                    'TwitterUrl': '',
                    'MultipleEvents': MultipleSchedule,
                    'Orgnizer': Orgnizer,
                    'AddressStatus': $("#hidAddressStatus").val(),
                    'LastLocationAddress': ($("#hidAddressStatus").val() == "PastLocation" ? $("#dllPastLocation").val() : 0),
                    'EnableFBDiscussion': ($("#chkAllowFBDis").is(":checked") == true ? 'Y' : 'N'),
                    'Ticket': Ticket,
                    'EventImage': EventImage,
                    'EventVariable': EventVariable,
                    'Ticket_DAdress': ($("#id_ticketdeliveryaddr").is(":checked") == true ? 'Y' : 'N'),
                    'Ticket_showremain': ($("#id_showremaningticket").is(":checked") == true ? 'Y' : 'N'),
                    'Ticket_showvariable': ($("#id_variablecharge").is(":checked") == true ? 'Y' : 'N'),
                    'Ticket_variabledesc': varDescritpion,
                    'Ticket_variabletype': optionalvariable,
                    'ShowMap': ($("#chkShowMap").is(":checked") == true ? 'Y' : 'N'),
                    'DuplicateEvent': ($("#chkDuplicateEvent").is(":checked") == true ? 'Y' : 'N')
                };
                    $.ajax({
                        url: '@Url.Action("SaveEvent", "CreateEvent")',
                        data: { model: model},
                        type: "Post",
                        success: function (response) {
                            $("#hdEventId").val(response);

                            $("#hdEventId").val(response);
                            if (type == "Save") {
                                $('#dvdraft').css('display', 'block');
                                window.location.href = '@Url.Action("ModifyEvent", "EditEvent", new { })' + '?Eventid=' + response;
                            }
                            if(type=="Preview")
                            {
                                var vTitle = $('#txtEventTitle').val().split(' ').join('-');
                                vTitle = vTitle.replace("[^a-zA-Z0-9_-]+", "");
                                var vUrl = '@Url.RouteUrl("ViewEvent",new { strEventDs= "ß", strEventId ="~" })';
                                vUrl = vUrl.replace("%c3%9f", vTitle);
                                vUrl = vUrl.replace("~", response);
                                @*var vUrl = '@Url.Action("ViewEvent", "ViewEvent", new { })?strEventDs=' + vTitle.replace("[^a-zA-Z0-9_]+", "") + '&strEventId=' + response;*@
                                @*/var vUrl = '@Url.Action("ViewEvent", "ViewEvent", new { strEventDs = " ", strEventId = " " })';*@
                                //vUrl = vUrl + "/" + vTitle.replace("[^a-zA-Z0-9_]+", "") + "/" + response;
                                //alert(vTitle);
                                //alert(vUrl);
                                @*window.open('@Url.Action("ViewCreateEvent", "CreateEvent",new { })?strUrlData=' + vUrl, "_blank");*@
                                window.open(vUrl.toLowerCase());
                                window.location.href = '@Url.Action("ModifyEvent", "EditEvent", new { })' + '?Eventid=' + response;
                            }
                            if(type=="Live")
                            {
                                window.location.href = '@Url.Action("EventConfirmation", "EventConfirmation",new { })?EventId=' + response + '';
                            }
                        }
                    });








            }
            $("#btMultiVenue").click(function () {
                $("#dvAddFooter").show();
                //$("#txtEventLocation").val('');
                if ($("#tblAddress tr").length <= 0) {
                    if ($("#txtEventLocation").val().trim() != '') {
                        $("#VenueName").val($("#txtEventLocation").val());
                        var vCols = $("#VenueName").val() + "¶" + $("#Address1").val() + "¶" + $("#Address2").val() + "¶" + $("#City").val() + "¶" + $("#State").val() + "¶" + $("#Zip").val() + "¶" + '' + "¶" + '';
                        var vColName = "VenueName¶Address1¶Address2¶City¶State¶Zip¶CountryID¶CID";
                        AddRow("tblAddress", vCols, vColName, "Y");
                        $("#VenueName").val("");
                        $("#hidAddSno").val("");
                    }
                }
                $("#VenueName").val("");
                $("#Address1").val("");
                $("#Address2").val("");
                $("#City").val("");
                $("#State").val("");
                $("#Zip").val("");
                $("#hidAddSno").val("");
                $("#CountryID").val('1');
                //var inputVenu = document.getElementById('VenueName');
                //var autocomplete = new google.maps.places.Autocomplete(inputVenu);
            });

            $("#btOnlineEvent").click(function () {
                if ($("#btOnlineEvent").is(":checked") == true) {
                    $("#dvAddress").hide();
                    //$("#txtEventLocation").prop('disabled', true);
                    //$("#dllPastLocation").prop('disabled', true);
                    //$("#FindNewVen").prop('disabled', true);
                    //$("#btMultiVenue").prop('disabled', true);
                    //$("#UsepastLoc").prop('disabled', true);
                    $("#hidAddressStatus").val('Online');
                }
                else {
                    $("#dvAddress").show();
                    //$("#txtEventLocation").prop('disabled', false);
                    //$("#dllPastLocation").prop('disabled', false);
                    //$("#FindNewVen").prop('disabled', false);
                    //$("#btMultiVenue").prop('disabled', false);
                    //$("#UsepastLoc").prop('disabled', false);
                    $("#hidAddressStatus").val('');
                }

                //$("#dvAddress").children().attr("disabled", "disabled");
                //$("#dvAddress").prop('disabled', true);
            });




            $("#btAddOrg").click(function () {
                @*var vTitle = $('#txtEventTitle').val().split(' ').join('-');
                vTitle = vTitle.replace("[^a-zA-Z0-9_-]+", "");
                alert(vTitle);
                var vUrl = '@Url.RouteUrl("ViewEvent",new { strEventDs= "ß", strEventId ="~" })';
                vUrl = vUrl.replace("%c3%9f", vTitle);
                alert(vUrl)*@
                if ($("#txtOrgnizer").val().trim() == '') {

                    //alert("Please enter valid organizer.");

                    var msg = ajaxsetup('CreateEvent', 'CreateEventOrganizerUI');
                    $('#divaccsuc').css('display', 'none');
                    $('#diverroacc').css('display', 'block');

                    $('#diverroacc').focus();
                    $('#erraccmsg').html(msg);
                    $('html,body').animate({ scrollTop: 0 });
                    return false;
                }



                if ($("#hidOrgnizer").val() == '') {
                    //if (parseInt($("#ddlOrgnizers option").length) > 24) {
                    //    var msg = ajaxsetup('CreateEvent', 'CreateEventOrganizercountUI');
                    //    $('#divaccsuc').css('display', 'none');
                    //    $('#diverroacc').css('display', 'block');

                    //    $('#diverroacc').focus();
                    //    $('#erraccmsg').html(msg);
                    //    $('html,body').animate({ scrollTop: 0 });
                    //    return false;
                    //}
                    AddOrgnizer();
                }
                else
                    UpdateOrgnizer($("#hidOrgnizer").val());


                $("#hidOrgnizer").val('');
                $("#txtOrgnizer").val('');
                $("#edOrgDes").code('');
                $("#txtOrgFBlink").val('');
                $("#txtOrgTWlink").val('');
                $("#Incsocial").prop("checked", false);
                $("#dvOrgnizerFBTw").hide();
                $("#btneditorg").attr('disabled',false);
                $("#btndeleteorg").attr('disabled', false);

                var msg = disablebutton();
              
                if (msg == " ") {
                    $(".cdisable").removeAttr("disabled");
                }
                $("#txtOrgnizer").removeClass("err-bor");
              

            });


         

            $('#txtEventUrl').bind('cut copy paste', function (event) {
                event.preventDefault();
                return false;
            });

            $("#txtEventUrl").focusout(function () {
                var vval = $("#txtEventUrl").val().trim();
                if (vval != '') {
                    $.ajax({
                        url: '@Url.Action("CheckEventUrl", "CreateEvent")',
                        data: { strUserUrl: $("#txtEventUrl").val().trim() },
                        type: "Post",
                        success: function (data) {
                            if (data == "Y") {
                                $("#txtEventUrl").addClass('err-bor');
                                $('#diverroacc').css('display', 'block');

                                $('#diverroacc').focus();
                                var msg = ajaxsetup('CreateEvent', 'CreateEventurlexistUI');
                                $('#erraccmsg').html(msg);
                                $('html,body').animate({ scrollTop: 0 });
                                $("#txtEventUrl").val('');
                                $("#txtEventUrl").focus();

                            
                        }else
                    {
                                $('#diverroacc').css('display', 'none');
                    $("#txtEventUrl").removeClass('err-bor');
                }
                        },
                        error: function (data) {

                            $('#divaccsuc').css('display', 'none');
                            $('#diverroacc').css('display', 'block');
                            //$(document).scrollTo('#diverroacc');

                            $('#erraccmsg').html(ajaxsetup('CreateEvent', 'CreateEventProbleminApllUI'));
                            $('html,body').animate({ scrollTop: 0 });
                            $('#btndiverrsuc').focus();
                            //alert("Sorry there is some problem.");
                        }
                    });
                }
            });
            $("#EventType").change(function () {

                var msg = disablebutton();
              
                if (msg.trim()=='') {
                    $(".cdisable").removeAttr("disabled");
                }
            });

            $("#ddlEventCategory").change(function () {
                //alert("change Fires");
                var vCatId = $("#ddlEventCategory").val();
                $.ajax({
                    url: '@Url.Action("GetSubCat", "CreateEvent")',
                    data: { lECatId: vCatId },
                    type: "Post",
                    success: function (data) {
                        //$.each(data, function () {
                        // debugger;
                        //                   alert(data.length);
                        $("#ddlEventSubCategory").html(data);
                        // items.push("<option value=" + this.Value + ">" + this.Text + "</option>");
                        //});
                    },
                    error: function (data) {
                        $('#divaccsuc').css('display', 'none');
                        $('#diverroacc').css('display', 'block');


                        $('#erraccmsg').html(ajaxsetup('CreateEvent', 'CreateEventProbleminApllUI'));
                        $('#diverroacc').focus();
                        $('html,body').animate({ scrollTop: 0 });
                    }
                });

                var msg = disablebutton();
              
                if (msg.trim() == '') {
                   
                    $(".cdisable").removeAttr("disabled");
                }
            });



            // ------------------------------------Multiple schedule-----------------------------------
            $("#txtStartTime").val("7:00pm");
            $("#txtEndTime").val("7:00pm");
            $("#txtTimeStart").val("7:00pm");
            $("#txtTimeEnd").val("7:00pm");

            $("#dlSchOption").change(function () {
                if ($("#dlSchOption").val() == "Daily") {
                    $("#dvWeeklyDayChk").hide();
                    $("#dvMonthly").hide();

                }
                else if ($("#dlSchOption").val() == "Weekly") {
                    $("#dvWeeklyDayChk").show();
                    $("#dvMonthly").hide();
                }
                else if ($("#dlSchOption").val() == "Monthly") {
                    $("#dvWeeklyDayChk").hide();
                    $("#dvMonthly").show();
                }
                else if ($("#dlSchOption").val() == "Custom") {
                    $("#dvWeeklyDayChk").hide();
                    $("#dvMonthly").hide();
                }


            });

            $("#btEnterDates").click(function () {
               
                if ($("#hdSchType").val() == 'Multiple') {
                   
                    $(".SchmultiDetail").show();
                    $(".SchDivtop").hide();
                    $(".Schmultisingle").show();
                }
                else {
                    $(".SchDivtop").show();
                    $(".SchmultiDetail").hide();
                    $(".Schmultisingle").hide();
                }
                lastmodulecalled = "Startmodel";
            });

         


          

            if ($("#hidSchLastState").val() == "") {
                $("#dlSchOption").val("Daily");
                $("#hidSchLastState").val("Daily");
                $("#dvWeeklyDayChk").hide();
                $("#dvMonthly").hide();
            }



            // ------------------------------------End Multiple schedule-----------------------------------
            $.ajax({
                url: '@Url.Action("GetPreviousAddress", "CreateEvent")',
                type: "Post",
                success: function (data) {
                    if (data != "")
                        $("#dllPastLocation").html(data);
                    else {
                        $("#UsepastLoc").hide();
                        $("#lblusePast").hide();
                    }
                },
                error: function (data) {
                    $('#divaccsuc').css('display', 'none');
                    $('#diverroacc').css('display', 'block');


                    $('#erraccmsg').html(ajaxsetup('CreateEvent', 'CreateEventProbleminApllUI'));
                    $('#diverroacc').focus();
                    $('html,body').animate({ scrollTop: 0 });
                }
            });

            $("#UsepastLoc").click(function () {
                if ($("#UsepastLoc").is(":checked") == true)
                    $("#hidAddressStatus").val('PastLocation');
                else
                    $("#hidAddressStatus").val('');

                //$("#dllPastLocation")
            });

            // ---------------------------------Map Implemetation--------------------------------------------

            //$('#txtEventLocation').focusout(function () {
            //    $(".pac-container").removeClass('map-drop-block');
            //});
            //var Vname = document.getElementById('VenueName');
            //var autocomplete = new google.maps.places.Autocomplete(Vname);



            //$('#VenueName').on('click', function () {



            //    $('.pac-container').each(function (i) {
            //        $(this).attr('id', 'idpac_' + (i + 1));
            //    });
            //    var div =$(".location-places-autocomplete-cant-find");
            //    console.log(div.parent());


            //    $('#idpac_2 div:first').remove();

            //    $("#idpac_2").addClass("zindex");

            //});




            //google.maps.event.addListener(autocomplete, 'place_changed', function () {
            //    var mapOptions = {
            //        center: new google.maps.LatLng(6.9167, 79.8473),
            //        zoom: 10,
            //        mapTypeId: google.maps.MapTypeId.ROADMAP
            //    };

            //    var map = new google.maps.Map(document.getElementById("map_canvas"),
            //      mapOptions);
            //    // create a marker
            //    var latlng = new google.maps.LatLng(6.9167, 79.8473);
            //    var marker = new google.maps.Marker({
            //        position: latlng,
            //        map: map,
            //        title: 'My Place'

            //    });
            //    var place = autocomplete.getPlace();
            //    if (place.geometry.viewport) {
            //        map.fitBounds(place.geometry.viewport);
            //    }
            //    else {
            //        map.setCenter(place.geometry.location);
            //        map.setZoom(17);

            //    }
            //    marker.setIcon(({
            //        url: place.icon,
            //        size: new google.maps.Size(71, 71),
            //        origin: new google.maps.Point(0, 0),
            //        anchor: new google.maps.Point(17, 34),
            //        scaledSize: new google.maps.Size(35, 35)
            //    }));
            //    marker.setPosition(place.geometry.location);
            //    marker.setVisible(true);

            //    var address = '';
            //    if (place.address_components) {
            //        address = [
            //          (place.address_components[0] && place.address_components[0].short_name || ''),
            //          (place.address_components[1] && place.address_components[1].short_name || ''),
            //          (place.address_components[2] && place.address_components[2].short_name || '')
            //        ].join(' ');
            //    }

                //$("#VenueName").val(place.address_components[0].long_name);

                //$("#City").val(place.address_components[1].long_name);
                //$("#State").val(place.address_components[3].long_name);
                //$("#Zip").val(place.address_components[5].long_name);
                //$("#CountryID").val(place.address_components[4].long_name);

                //$("#VenueName").val(address.toString());
                //$("#Address1").val(address[1].toString());
                //$("#Address2").val(address[2].toString());
           // });
            // --------------------Multiple Venue---------------------------

            function AddRow(TableId, ColumnValue, ColumnName, IncludeSNo) {
                var ColAry = ColumnValue.split('¶');
                var ColName = ColumnName.split('¶');
                var Sno = $("#" + TableId + " tr").length;
                var cval = ColumnValue;
                var strHTML = '<tr>';
                strHTML = strHTML + '<td style="display:none">' + Sno + '</td>';

                var ConsolidateValue = '';
                for (i = 0; i <= ColAry.length - 1; i++) {
                    CellId = ColName[i] + Sno.toString();
                    strHTML = strHTML + '<td style="display:none"> <input type="text" name=" " id="' + CellId + '" style="width:100px;" value="' + ColAry[i] + '" /></td>';
                    if (ColAry[i] != '') {
                        if (i != ColAry.length - 1) {
                            if (ConsolidateValue == '')
                                ConsolidateValue = ColAry[i];
                            else
                                ConsolidateValue = ConsolidateValue + ',' + ColAry[i];
                        }
                    }
                    //if (ColName[i].toString() == "CID" || ColName[i].toString() == "CountryID")
                    //    strHTML = strHTML + '<td style="display:none"> <input type="text" name=" " id="' + CellId + '" style="width:100px;" value="' + ColAry[i] + '" /></td>';
                    //else
                    //    strHTML = strHTML + '<td> <input type="text" name=" " id="' + CellId + '" style="width:100px;" value="' + ColAry[i] + '" /></td>';
                }

                strHTML = strHTML + '<td align="left"><label id=consolidate' + Sno + '>' + ConsolidateValue + ' </label>';

                strHTML = strHTML + '<td><div class="trigger mt5 ent_add"><a href="#" onclick="editRow(' + Sno + ');"><i class="fa fa-map-marker"></i> Edit</a>  <a href="#" id="btAddDelete" onclick="DeleteTableRow(' + Sno + ')">Delete</a> </div> </td>';
                //strHTML = strHTML + '<td><div class="trigger mt5 ent_add"><a href="#" onclick="editRow(' + Sno + ');" data-toggle="modal" data-target="#myModal"><i class="fa fa-map-marker"></i> Edit</a>  <input type="button" name="Delete" id="btAddDelete" onclick="DeleteTableRow(' + Sno + ')" value="Delete" /> </div> </td>';
                //strHTML = strHTML + '<td><input type="button" onclick="editRow();" id="btnEdit" value="Edit" /></td>';
                strHTML = strHTML + '</tr>';
                $("#" + TableId).append(strHTML);
            }

            function EditRow(TableId, ColumnValue, ColumnName, Sno) {
                var ColAry = ColumnValue.split('¶');
                var ColName = ColumnName.split('¶');
                var ConsolidateValue = '';
                for (i = 0; i <= ColName.length - 1; i++) {

                    CtrlId = ColName[i] + Sno.toString();
                    if (ColAry[i] != '') {
                        if (i != ColAry.length - 1) {
                            if (ConsolidateValue == '')
                                ConsolidateValue = ColAry[i];
                            else
                                ConsolidateValue = ConsolidateValue + ',' + ColAry[i];
                        }
                    }

                    //alert(CtrlId);
                    //if (ColName[i] == "CID")
                    //{
                    //    CtrlId = "CountryID" + Sno.toString();
                    //    alert("In country");
                    //}
                    //else
                    //    CtrlId = ColName[i] + Sno.toString();


                    $("#" + CtrlId).val(ColAry[i]);
                }
                //   alert(ConsolidateValue);
                $("#consolidate" + Sno).text(ConsolidateValue);

            }
            $(document).click(function () {
                $('#diverrorvenue').css('display', 'none');
                if ($('#diverrorvenue').css('display') == 'block') {
                    $("input").removeClass('err-bor');
                }

            });
            function validateAddress() {
                if ($("#VenueName").val().trim() == '') {
                    $('#diverrorvenue').css('display', 'block');
                    $("#VenueName").addClass('err-bor');
                    var msg = ajaxsetup('CreateEvent', 'CreateEventValidatevenueUI');
                    $('#erraccmsgvenue').html(msg);
                    $('#diverrorvenue').focus();
                    //alert("Please enter valid venue name");
                    //$(document).scrollTo('#diverroacc');
                    return false;
                }
                //if ($("#Address1").val().trim() == '') {
                //    alert("Please enter valid address");
                //    $("#Address1").focus();
                //    return false;
                //}
            }

            $("#btReset").click(function () {
                $("#VenueName").val("");
                $("#Address1").val("");
                $("#Address2").val("");
                $("#City").val("");
                $("#State").val("");
                $("#Zip").val("");
                $("#hidAddSno").val("");
                $("#CountryID").val('1');
                $("#VenueName").focus();

            });

            $("#btAddMore").click(function () {

                if (validateAddress() == false) return false;

                var vCols = $("#VenueName").val() + "¶" + $("#Address1").val() + "¶" + $("#Address2").val() + "¶" + $("#City").val() + "¶" + $("#State").val() + "¶" + $("#Zip").val() + "¶" + $("#CountryID option:selected").text() + "¶" + $("#CountryID").val();
                var vColName = "VenueName¶Address1¶Address2¶City¶State¶Zip¶CountryID¶CID";
                if ($("#hidAddSno").val().trim() != "")
                    EditRow("tblAddress", vCols, vColName, $("#hidAddSno").val().trim());
                else
                    AddRow("tblAddress", vCols, vColName, "Y");


                $("#VenueName").val("");
                $("#Address1").val("");
                $("#Address2").val("");
                $("#City").val("");
                $("#State").val("");
                $("#Zip").val("");
                $("#hidAddSno").val("");
                $("#CountryID").val('1');
            });




            // ------Designer Code-----------















        });
   


    //Ticket Section Starts
   
        function CannotFindLocation() {
            $("#dvAddFooter").hide();
            $("#VenueName").val('');
            $("#Address1").val('');
            $("#Address2").val('');
            $("#City").val('');
            $("#State").val('');
            $("#Zip").val('');
            $("#tblAddress").empty();
            $("#CountryID").val('1');
            $(".pac-container").removeClass('map-drop-block');
            $(".js-location-cant-find").slice(1).remove();
        }
        
        function changetext(e) {
         
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var al = e.substr(0, e.indexOf('-'));

            var errorMsg = checkDate(e);

            if (al == "id_auto_hide_until_Date") {

                if (errorMsg != "") {



                    $('#id_auto_hide_until_Date-' + el).focus();
                    $('#id_auto_hide_until_Date-' + el).val("");
                  
                }

                //} else {
                //    $('#id_auto_hide_after_Date-' + el).val($('#' + e).val());
                //}

            }
            if (al == "id_salestart") {
                if (errorMsg != "") {



                    $('#id_salestart-' + el).focus();
                    $('#id_salestart-' + el).val("");
                    $('#id_saleend-' + el).val("");

                }
                else
                {
                    var starttimetime1 = convertTo24Hour($("#id_saletimestart-" + el).val());
                    var todayDate = new Date($('#id_salestart-' + el).val() + " " + starttimetime1);
                    var enddate = convertTo24Hour($('#id_saletimeend-' + el).val());

                    var dateOne = new Date($('#id_saleend-' + el).val() + " " + enddate);

                    if (todayDate > dateOne)
                    {
                        $('#id_saleend-' + el).val($("#id_salestart-" + el).val());
                        $('#id_saletimeend-' + el).val($("#id_saletimestart-" + el).val());
                    } else
                    {

                        if ($("#hdSchType").val() == '') {
                            $('#id_saleend-' + el).val($('#' + e).val());
                        }

                        if ($("#hdSchType").val() == 'Single') {
                            $('#id_saleend-' + el).val($("#txtEndDate").val());
                            $('#id_saletimeend-' + el).val($("#txtEndTime").val());

                        }
                        if ($("#hdSchType").val() == 'Multiple') {
                            $('#id_saleend-' + el).val($("#txtDateTo").val());
                            $('#id_saletimeend-' + el).val($("#txtTimeEnd").val());
                        }
                    }

                   
                }

            }






        }

      
        function enablehideafteruntil(e)
        {
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var al = e.substr(0, e.indexOf('-'));
            if (al == "id_hideafter") {
                if ($('#' + e).is(":checked") == true) {
                    $("#id_auto_hide_after_Date-" + el).removeAttr("readonly");
                    $("#id_auto_hide_after_Time-" + el).removeAttr("readonly");
                    $("#id_auto_hide_after_Date-" + el).datepicker({
                        format: "mm/dd/yyyy",
                        minDate: "0",
                        onSelect: function () {

                            this.fireEvent && this.fireEvent('onchange') || $(this).change();
                        }
                    }).on('changeDate', function (ev) {
                        $("#id_auto_hide_after_Date-" + el).datepicker('hide');
                    });
                    $("#id_auto_hide_after_Time-" + el).timepicker();
                    $("#id_auto_hide_after_Time-" + el).val("7:00pm");
                    $("#id_auto_hide_after_Date-" + el).datepicker("option", "minDate", 0);
                    $("#id_auto_hide_after_Date-" + el).datepicker("option", "maxDate", null);
                } else {
                    $("#id_auto_hide_after_Date-" + el).val("");
                    $("#id_auto_hide_after_Time-" + el).val("");
                    $("#id_auto_hide_after_Date-" + el).attr("readonly", "readonly");
                    $("#id_auto_hide_after_Time-" + el).attr("readonly", "readonly");
                    $("#id_auto_hide_after_Date-" + el).datepicker("option", "minDate", -1);
                    $("#id_auto_hide_after_Date-" + el).datepicker("option", "maxDate", -2);
                }
            }

            if (al == "id_hideuntil")
            {
                var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
                var al = e.substr(0, e.indexOf('-'));
                if ($('#' + e).is(":checked") == true) {
                    $("#id_auto_hide_until_Date-" + el).removeAttr("readonly");
                    $("#id_auto_hide_until_time-" + el).removeAttr("readonly");
                    $("#id_auto_hide_until_time-" + el).val("7:00pm");
                    $("#id_auto_hide_until_Date-" + el).datepicker({
                        format: "mm/dd/yyyy",
                        minDate: "0",
                        onSelect: function () {

                            this.fireEvent && this.fireEvent('onchange') || $(this).change();
                        }
                    }).on('changeDate', function (ev) {
                        $("#id_auto_hide_until_Date-" + el).datepicker('hide');
                    });
                    $("#id_auto_hide_until_time-" + el).timepicker();
                    $("#id_auto_hide_until_Date-" + el).datepicker("option", "minDate", 0);
                    $("#id_auto_hide_until_Date-" + el).datepicker("option", "maxDate", null);
                } else {
                    $("#id_auto_hide_until_Date-" + el).val("");
                    $("#id_auto_hide_until_time-" + el).val("");
                    $("#id_auto_hide_until_Date-" + el).attr("readonly", "readonly");
                    $("#id_auto_hide_until_time-" + el).attr("readonly", "readonly");
                    $("#id_auto_hide_until_Date-" + el).datepicker("option", "minDate", -1);
                    $("#id_auto_hide_until_Date-" + el).datepicker("option", "maxDate", -2);
                }
            }

        }
     

        $(document).ready(function () {
            $("#txtOrgnizer").blur(function () {

                var isValid = false;
                var sno = $("#hidOrgnizer").val();
                var name = $('#txtOrgnizer').val();
                
                var regex = /^[a-zA-Z ]*$/; 
                isValid = regex.test(name);
                if (isValid) {
                    var orgid = 0;

                    orgid = $('#OrgId_' + sno).html();
                 
                    if (typeof orgid === "undefined") {
                        orgid = 0;
                    }

                    $.ajax({
                        url: '@Url.Action("chkOrganizerName", "Account")',
                        data: { Name: name, id: orgid },
                        type: "Post",
                        success: function (data) {

                            if (data == "True") {
                              
                                $('#erraccmsg').html("Organizer name already exist!");
                                $('#diverroacc').css('display', 'block');
                                $('#txtOrgnizer').addClass('err-bor');
                                $('#txtOrgnizer').val('');
                                $('html,body').animate({ scrollTop: 0 });
                              
                                return false;
                            } else {
                                $('#txtOrgnizer').removeClass('err-bor');
                               
                            }

                        }
                    });
                } else {
                    $('#txtOrgnizer').val('');
                }



            });

            $('#txtOrgnizer').bind("cut copy paste", function (e) {
                e.preventDefault();
            });
            $('#id_variablecharge').change(function () {
                if ($(this).is(":checked")) {
                    $('.TicketFees').show();
                    $('#id_Mainvariable').show();
                    var divlength = $("#id_Mainvariable> div").size();
                    if (divlength <= 0) {
                        var data = $('#id_clonevariable-n').clone();
                        data.attr('id', 'id_clonevariable-' + divlength);
                        data.removeAttr("style")
                        data.find('*[id]').andSelf().each(function () {
                            //console.log($(this));

                            var id = $(this).attr('id');
                            //console.log(id);
                            id1 = id.substr(0, id.indexOf('-'));
                            ////console.log(id);
                            var idn = id1 + "-" + divlength;
                            $(this).attr("id", idn);
                            $(this).val('');
                            if(id1=="id_varsubdesc")
                            {
                                $(this).attr("placeholder", "Variable Charges Description " + parseInt(divlength + 1));
                            }


                        });


                        $('#id_Mainvariable').append(data);
                        $('#btn_vardelete-' + divlength).attr('href', '#cnfrmdeletevariable-' + divlength);
                        $("input[id^='id_varsubprice']").mask('000,000.00', { reverse: true });
                    }
                } else {
                    $('.TicketFees').hide();
                    $('#id_Mainvariable').hide();
                    var myNode = document.getElementById("id_Mainvariable");
                    while (myNode.firstChild) {
                        myNode.removeChild(myNode.firstChild);
                    }
                }
            });

            $.ajax({
                url: '@Url.Action("GetOrgnizerDetailbyUser", "CreateEvent")',
                type: "Get",
                success: function (data) {
                    var getHtml = data.split('¶');
                  
                    $("#tblOrgnizer").append(getHtml[0]);
                    $("#ddlOrgnizers").append(getHtml[1]);
                    if( getHtml[1].trim()=="")
                    {
                        $("#btneditorg").attr('disabled', true);
                        $("#btndeleteorg").attr('disabled', true);
                    }
                },
                error: function (data) {
                }
            });

            $.ajax({
                url: '@Url.Action("returnfees", "Event")',
                success: function (data) {

                    for (var i = 0; i < data.length; ++i) {
                        //if (data[i].FeeType == "Customer Fee") {

                        //    $('#id_cc').val(data[i].FS_Percentage);



                        //}

                        //if (data[i].FeeType == "EC Fee") {

                        $('#id_percentage').val(data[i].FS_Percentage);

                        //}
                        $('#id_value').val(data[i].FS_Amount);

                    }
                }
            });
            $(".txtsum").each(function () {

                $(this).keyup(function () {
                    calculateSum();
                });
            });
            $('#id_totalqty').html(0);

            calculateSum();

        });
        $(".ticket_panel").hide();
        //$(".save_btn").click(function () {
        //    $(".ticket_panel").slideDown();

        //});
        function checkvalidatetkt(e)
        {
            var msg = disablebutton();
            if (msg == "") {
                $(".cdisable").removeAttr("disabled");
            }
            $('#' + e).removeClass('err-bor');

        }
        function changeqty(e) {
            var dropval = $('#' + e).val();
            var numbermsg = ajaxsetup('CreateEvent', 'CreateEventEnternumberUI');
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            if (dropval != '') {
                if ($.isNumeric(dropval) === false) {

                    $('#' + e).addClass('err-bor');
                    $('#id_lbl_quantity-' + el).css('display', 'block');
                    $('#id_lbl_quantity-' + el).html(numbermsg);
                } else {
                    var qty = $('#id_totalqty').html();

                    $('#id_lbl_quantity-' + el).css('display', 'none');
                    calculateSum();

                    // var total = parseInt(qty) + parseInt(dropval);

                    // $('#id_totalqty').html(total);
                    var msg = disablebutton();
                    if (msg == "")
                    {
                        $(".cdisable").removeAttr("disabled");
                    }
                    $('#' + e).removeClass('err-bor');

                }
            } else { calculateSum(); }




        }
        function checkminum(e) {

            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));

          
            var minamt = parseInt($('#id_min_ticket-' + el).val());
            var maxamt = parseInt($('#id_max_ticket-' + el).val());
            if (isNaN(maxamt) && !isNaN(minamt))
            {
                
                $('#hdMaxerr').val('1');
                $('#id_min_ticket-' + el).addClass('err-bor');
                $('#id_max_ticket-' + el).addClass('err-bor');
                $('#id_lblmax-' + el).css('display', 'block');

            }else if(maxamt==0 && minamt==0)
            {
                $('#hdMaxerr').val('0');
                $('#id_min_ticket-' + el).removeClass('err-bor');
                $('#id_max_ticket-' + el).removeClass('err-bor');
                $('#id_lblmax-' + el).css('display', 'none');
            }
            else if (maxamt <= minamt) {
                    $('#hdMaxerr').val('1');
                    $('#id_min_ticket-' + el).addClass('err-bor');
                    $('#id_max_ticket-' + el).addClass('err-bor');
                    $('#id_lblmax-' + el).css('display', 'block');


                } else {
                    $('#hdMaxerr').val('0');
                    $('#id_min_ticket-' + el).removeClass('err-bor');
                    $('#id_max_ticket-' + el).removeClass('err-bor');
                    $('#id_lblmax-' + el).css('display', 'none');
                }
          
        }
        function calculateSum() {

            var sum = 0;
            //iterate through each textboxes and add the values
            $(".txtsum").each(function () {

                //add only if the value is number
                if (!isNaN(this.value) && this.value.length != 0) {
                    sum += parseFloat(this.value);
                }

            });
            //.toFixed() method will roundoff the final sum to 2 decimal places
            $("#id_totalqty").html(sum);
        }
        function feechange(e) {
            var fee = 0;
            var total = 0;
            var dropval = $('#' + e).val();
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var amount = parseFloat($('#id_cost-' + el).val().replace(',', ''));
            if (amount > 999999.99) {


            }
            if (dropval.trim() == '0') {

                var ccp = $('#id_percentage').val();
                var ccpamount = (((amount * ccp) / 100) + parseFloat($('#id_value').val())).toFixed(2);
                //var ccpamount = ((amount * ccp) / 100).toFixed(2)+;

                var ccpfinal = (parseFloat(ccpamount) + parseFloat(amount)).toFixed(2);

                var msg = "Ticket Price  &nbsp; &nbsp; &nbsp;     $" + amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + "<br />" + "Fee      &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp;       $" + ccpamount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + "<br />" + "Buyer(s) Total    &nbsp;&nbsp; &nbsp;      $" + ccpfinal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                $('#id_buyerprice-' + el).html("$" + ccpfinal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","));

                $('#id_tooltip-' + el).html(msg);
                $('#id_feetype-' + el).val(0);
                fee = ccpamount;
                total = ccpfinal;

            }
            if (dropval.trim() == '1') {

                var ccp = $('#id_percentage').val();
                var ccpamount = (((amount * ccp) / 100) + parseFloat($('#id_value').val())).toFixed(2);
                var ccpfinal = parseFloat(amount).toFixed(2);
                $('#id_buyerprice-' + el).html("$" + ccpfinal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","));
                var msg = "Ticket Price  &nbsp; &nbsp; &nbsp;     $" + amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + "<br />" + "Fee     &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp;    $" + ccpamount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + "<br />" + "Buyer(s) Total    &nbsp;&nbsp; &nbsp;      $" + ccpfinal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                $('#id_tooltip-' + el).html(msg);
                //$('#id_tooltip-' + el).html(msg);
                $('#id_feetype-' + el).val(1);
                fee = ccpamount;
                total = ccpfinal;

            }

            $("#id_fee-" + el).val(fee);
            $("#id_total-" + el).val(total);

        }
        function checkprice(el, evt, id) {



            var charCode = (evt.which) ? evt.which : event.keyCode;

            var number = el.value.split('.');
            if (charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57) && charCode != 44) {
                evt.preventDefault();
                return false;

            }

            if (number.length > 1 && charCode == 46) {
                evt.preventDefault();
                return false;
            }

        }
        function tofixed(id) {
            var price = $('#' + id).val().replace(',', '');
            var num = id.substr(id.indexOf('-') + 1, id.length - id.indexOf('-'));
            if (id == "") {

            } else {

                var price = parseFloat(price).toFixed(2);

                if (!isNaN(price)) {

                    price = price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    document.getElementById(id).value = price;
                }

            }


        }
        function changefee(id, evt) {
            debugger;
            var price = parseFloat(parseFloat($('#' + id).val().replace(',', '')).toFixed(2));
            var num = id.substr(id.indexOf('-') + 1, id.length - id.indexOf('-'));
            var discount =parseFloat(parseFloat($('#id_Discount-' + num).val().replace(',', '')).toFixed(2));
            if (price == 0) {

                $('#id_cost-' + num).addClass('err-bor');
                $('#id_lblprice-' + num).css('display', 'block');
                $('#id_buyerprice-' + num).html("$0.00");
                $('#id_tooltip-' + num).html("Ticket Price &nbsp; &nbsp; &nbsp; $0.00 <br/> Fee &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp;$0.00 <br /> Buyer(s) Total $0.00 ");
                total = 0;
                fee = 0;
                return false;

            } else {

                $('#id_cost-' + num).removeClass('err-bor');
                $('#id_lblprice-' + num).css('display', 'none');

            }
            if (price > 999999.99) {

                $('#id_cost-' + num).addClass('err-bor');
                $('#id_lblprice-' + num).css('display', 'block');
                $('#id_buyerprice-' + num).html("$0.00");
                $('#id_tooltip-' + num).html("Ticket Price &nbsp; &nbsp; &nbsp; $0.00 <br/> Fee &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp;$0.00 <br /> Buyer(s) Total $0.00 ");
                total = 0;
                fee = 0;
                return false;
            } else {

                $('#id_cost-' + num).removeClass('err-bor');
                $('#id_lblprice-' + num).css('display', 'none');

            }


            ////Discount section
            //if (!isNaN(price) && !isNaN(discount)) {
            //    if (price != 0 && discount != 0) {

            //        if (parseFloat(discount) >= parseFloat(price)) {

            //            $('#id_Discount-' + num).addClass('err-bor');

            //            $('#hddiscount').val('1');

            //        }
            //        else {

            //            $('#hddiscount').val('0');
            //            $('#id_Discount-' + num).removeClass('err-bor');

            //        }

            //    }
            //    else if (price == 0 && discount != 0) {

            //        $('#hddiscount').val('1');
            //        $('#id_Discount-' + num).addClass('err-bor');
            //    }

            //}
            //else if (isNaN(price) && !isNaN(discount)) {

            //    $('#hddiscount').val('1');
            //    $('#id_Discount-' + num).addClass('err-bor');
            //}

            if (isNaN(price)) {

                $('#id_buyerprice-' + num).html("$0.00");
                $('#id_tooltip-' + num).html("Ticket Price  &nbsp; &nbsp;&nbsp; &nbsp; $0.00 <br/> Fee &nbsp;&nbsp; &nbsp; &nbsp;  &nbsp;&nbsp; &nbsp;  &nbsp;&nbsp; $0.00 <br /> Buyer(s) Total $0.00 ");
                total = 0;
                fee = 0;

            }
            else if (price > 0) {
                var ccpamount = 0;
                var ccpfinal = 0;
                $('#id_feestruct-' + num).css('display', 'block');
                var val = $("#id_feetype-0").val();
                var fee = 0;

                if (val == 0) {
                    ccp = parseFloat($('#id_percentage').val()).toFixed(2);

                    ccpamount = (((price * ccp) / 100) + parseFloat($('#id_value').val())).toFixed(2);
                    ccpamount = ccpamount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    ccpfinal = (parseFloat(ccpamount) + parseFloat(price)).toFixed(2);
                    ccpfinal = ccpfinal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    price = price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    var msg = "Ticket Price  &nbsp; &nbsp; &nbsp;     $" + price + "<br/>" + "Fee    &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  &nbsp;  &nbsp;&nbsp;    $" + ccpamount + "<br/>" + "Buyer(s) Total   &nbsp;&nbsp; &nbsp;       $" + ccpfinal;
                    $('#id_buyerprice-' + num).html("$" + ccpfinal);
                    $('#id_tooltip-' + num).html(msg);
                    total = ccpfinal;
                    fee = ccpamount;
                }
                if (val == 1) {
                    ccp = $('#id_percentage').val();
                    ccpamount = (((price * ccp) / 100) + parseFloat($('#id_value').val())).toFixed(2);
                    ccpamount = ccpamount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    ccpfinal = price;
                    ccpfinal = ccpfinal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    $('#id_buyerprice-' + num).html("$" + ccpfinal);
                    var msg = "Ticket Price  &nbsp; &nbsp; &nbsp;     $" + price + "<br/>" + "Fee    &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  &nbsp;  &nbsp;&nbsp;     $" + ccpamount + "<br/>" + "Buyer(s) Total    &nbsp;&nbsp; &nbsp;      $" + ccpfinal;

                    $('#id_tooltip-' + num).html(msg);
                    total = ccpfinal;
                    fee = ccpamount;
                }

                console.log(ccpamount);
                console.log(ccpfinal);
                $("#id_fee-" + num).val(ccpamount.replace(',', ''));
                $("#id_total-" + num).val(ccpfinal.replace(',', ''));
                //$('#' + id).val(price)
            }


        }

        function validatenumdec(el, evt, id) {
            var fee = 0;
            var total = 0;

            var charCode = (evt.which) ? evt.which : event.keyCode;

            var number = el.value.split('.');
            if (charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57) && charCode != 44) {
                evt.preventDefault();
                return false;

            }

            if (number.length > 1 && charCode == 46) {
                evt.preventDefault();
                return false;
            }



        }
        function minimize(e) {

            var id = e;
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));

            $('#evnt_set-' + el).slideToggle("fast");

        }
        $('.var_chg_btn').click(function () {
            $("#id_Mainvariable").css('display', 'block');
            var divlength = $("#id_Mainvariable> div").size();
            var data = $('#id_clonevariable-n').clone();
            data.attr('id', 'id_clonevariable-' + divlength);
            data.removeAttr("style")
            data.find('*[id]').andSelf().each(function () {
                //console.log($(this));

                var id = $(this).attr('id');
                //console.log(id);
                id1 = id.substr(0, id.indexOf('-'));
                ////console.log(id);
                var idn = id1 + "-" + divlength;
                $(this).attr("id", idn);
                $(this).val('');
                if (id1 == "id_varsubdesc") {
                    $(this).attr("placeholder", "Variable Charges Description " + parseInt(divlength + 1));
                }


            });


            $('#id_Mainvariable').append(data);
            $('#btn_vardelete-' + divlength).attr('href', '#cnfrmdeletevariable-' + divlength);
            $("input[id^='id_varsubprice']").mask('000,000.00', { reverse: true });
        });
        $('.save_btnpaid ').click(function () {

            $(".ticket_panel").show();
            $("#id_ticket_footer").css('display', 'block');
            var divlength = $("#MasterDiv> div").size();
            var data = $('#clonediv-n').clone();
            data.attr('id', 'clonediv-' + divlength);
            data.removeAttr("style")

            data.find('*[id]').andSelf().each(function () {
              

                var id = $(this).attr('id');
               
                id1 = id.substr(0, id.indexOf('-'));
               
                var idn = id1 + "-" + divlength;
                $(this).attr("id", idn);
                $(this).val('');

                if ($(this).hasClass("paidticket-n")) {
                    $(this).removeClass('paidticket-n');
                    $(this).addClass('paidticket-' + divlength + '');
                }
                if ($(this).hasClass("normalticket-n")) {
                    $(this).removeClass('normalticket-n');
                    $(this).addClass('normalticket-' + divlength + '');
                }
                if ($(this).hasClass("donateshow-n")) {
                    $(this).removeClass('donateshow-n');
                    $(this).addClass('donateshow-' + divlength + '');
                }

            });


            $('#MasterDiv').append(data);
            $(".donateshow-" + divlength).css('display', 'block');
            $(".normalticket-" + divlength).css('display', 'none');
            $(".paidticket-" + divlength).css('display', 'block');
            $("#id_ticket_type-" + divlength).attr("placeholder", "Early Bird, RSVP...");
            $("#id_ticket_type-" + divlength).attr("title", "Give your ticket a name, like General Admission, Early Bird, RSVP, etc.");
          
            $("#id_Discount-" + divlength).prop("readonly", false);
            var randomValue = randomString(4);
            $("#id_ticket_id-" + divlength).val(randomValue);
            $("#id_order-" + divlength).val(divlength);
            $("#id_feetype-" + divlength).css('display', 'block');
            $("#id_Tickettype-" + divlength).val("Paid");
            $("#id_buyerprice-" + divlength).html('$0.00');
            $('#id_tooltip-' + divlength).html('Ticket Price &nbsp; &nbsp; &nbsp; $0.00 <br /> Fee &nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &nbsp;  &nbsp;  &nbsp;&nbsp;   $0.00 <br /> Buyer(s) Total $0.00');
          
            $("#id_feemethod").val(0);
            $("#id_salestart-" + divlength).datepicker({
                format: "mm/dd/yyyy",
                minDate: "0",
                onSelect: function () {

                    this.fireEvent && this.fireEvent('onchange') || $(this).change();
                }
            }).on('changeDate', function (ev) {
                $("#id_salestart-" + divlength).datepicker('hide');
            });
            $("#id_saleend-" + divlength).datepicker({
                format: "mm/dd/yyyy",
                minDate: "0",
                onSelect: function () {

                    this.fireEvent && this.fireEvent('onchange') || $(this).change();
                }
            }).on('changeDate', function (ev) {
                $("#id_saleend-" + divlength).datepicker('hide');
            });

        

            $("#id_saletimestart-" + divlength).timepicker();
            $("#btndelete-" + divlength).attr('href', '#cnfrmdelete-' + divlength);
            $("#id_saletimeend-" + divlength).timepicker();
           
      
            $("input[id^='id_cost']").mask('000,000.00', { reverse: true });
            $("input[id^='id_Discount']").mask('000,000.00', { reverse: true });
         

            $("#clonediv-" + divlength).focus();
            var msg = disablebutton();
            if (msg == "") {

                $(".cdisable").removeAttr("disabled");

            }

        });

        $('.save_btndonation').click(function () {
            $(".ticket_panel").show();
            $("#id_ticket_footer").css('display', 'block');
            var divlength = $("#MasterDiv> div").size();

            var data = $('#clonediv-n').clone();
            data.attr('id', 'clonediv-' + divlength);
            data.removeAttr("style")
            console.log(data.find('input[type=text]'));
            data.find('*[id]').andSelf().each(function () {
                //console.log($(this));

                var id = $(this).attr('id');
                //console.log(id);
                id1 = id.substr(0, id.indexOf('-'));
                ////console.log(id);
                var idn = id1 + "-" + divlength;
                $(this).attr("id", idn);
                $(this).val('');

                if ($(this).hasClass("paidticket-n")) {
                    $(this).removeClass('paidticket-n');
                    $(this).addClass('paidticket-' + divlength + '');
                }
                if ($(this).hasClass("normalticket-n")) {
                    $(this).removeClass('normalticket-n');
                    $(this).addClass('normalticket-' + divlength + '');
                }
                if ($(this).hasClass("donateshow-n")) {
                    $(this).removeClass('donateshow-n');
                    $(this).addClass('donateshow-' + divlength + '');
                }
            });


            $(data).appendTo('#MasterDiv');
            $(".donateshow-" + divlength).css('display', 'none');
            $(".normalticket-" + divlength).css('display', 'block');
            $(".paidticket-" + divlength).css('display', 'none');
            $("#id_feetype-" + divlength).css('display', 'block');
            $("#id_paymenttype-" + divlength).text("Donation");
            $("#id_ticket_type-" + divlength).attr("placeholder", "Donation");
            $("#id_ticket_type-" + divlength).attr("title", "Donation");
            $("#id_Discount-" + divlength).prop("readonly", true);
            var randomValue = randomString(4);
            $("#id_ticket_id-" + divlength).val(randomValue);

            $("#id_order-" + divlength).val(divlength);
            $("#id_Tickettype-" + divlength).val("Donation");

            $("#id_feemethod").val(0);
            $("#id_salestart-" + divlength).datepicker({
                format: "mm/dd/yyyy",
                minDate: "0",
                onSelect: function () {

                    this.fireEvent && this.fireEvent('onchange') || $(this).change();
                }
            }).on('changeDate', function (ev) {
                $("#id_salestart-" + divlength).datepicker('hide');
            });
            $("#id_saleend-" + divlength).datepicker({
                format: "mm/dd/yyyy",
                minDate: "0",
                onSelect: function () {

                    this.fireEvent && this.fireEvent('onchange') || $(this).change();
                }
            }).on('changeDate', function (ev) {
                $("#id_saleend-" + divlength).datepicker('hide');
            });


           

            $("#id_saletimestart-" + divlength).timepicker();
           
            $("#id_saletimeend-" + divlength).timepicker();
         
          
            $("#btndelete-" + divlength).attr('href', '#cnfrmdelete-' + divlength);
            $("#clonediv-" + divlength).focus();
          
            var msg = disablebutton();
            if (msg == "") {

                $(".cdisable").removeAttr("disabled");

            }
        });
     
        $('.save_btnfree').click(function () {

            $(".ticket_panel").show();
            $("#id_ticket_footer").css('display', 'block');
            var divlength = $("#MasterDiv> div").size();
            var data = $('#clonediv-n').clone();
            data.attr('id', 'clonediv-' + divlength);
            data.removeAttr("style");
            data.find('*[id]').andSelf().each(function () {


                var id = $(this).attr('id');
                //console.log(id);
                id1 = id.substr(0, id.indexOf('-'));
                ////console.log(id);
                var idn = id1 + "-" + divlength;
                $(this).attr("id", idn);
                $(this).val('');

                if ($(this).hasClass("paidticket-n")) {
                    $(this).removeClass('paidticket-n');
                    $(this).addClass('paidticket-' + divlength + '');
                }
                if ($(this).hasClass("normalticket-n")) {
                    $(this).removeClass('normalticket-n');
                    $(this).addClass('normalticket-' + divlength + '');
                }
                if ($(this).hasClass("donateshow-n")) {
                    $(this).removeClass('donateshow-n');
                    $(this).addClass('donateshow-' + divlength + '');
                }

            });

            //data.append('<span class="RemoveMoreHub" style="width:80%;"><a href="javascript:void(0);" style="float:right;color:#CE0009;font-size:13px;text-decoration:none;margin-right:5%;" >- Remove</a></span>');
            $('#MasterDiv').append(data);
            $(".donateshow-" + divlength).css('display', 'block');
            $("#btndelete-" + divlength).attr('href', '#cnfrmdelete-' + divlength);
            $(".normalticket-" + divlength).css('display', 'block');
            $(".paidticket-" + divlength).css('display', 'none');

            $("#id_paymenttype-" + divlength).text("Free");
            $("#id_ticket_type-" + divlength).attr("title", "Give your ticket a name, like General Admission, Early Bird, RSVP, etc.");
            $("#id_ticket_type-" + divlength).attr("placeholder", "Early Bird, RSVP...");
            $("#id_Discount-" + divlength).prop("readonly", true);
            var randomValue = randomString(4);
            $("#id_ticket_id-" + divlength).val(randomValue);
            $("#id_order-" + divlength).val(divlength);
          
            $("#id_Tickettype-" + divlength).val("Free");
           

            $("#id_feemethod").val(0);
            $("#id_salestart-" + divlength).datepicker({
                format: "mm/dd/yyyy",
                minDate: "0",
                onSelect: function () {

                    this.fireEvent && this.fireEvent('onchange') || $(this).change();
                }
            }).on('changeDate', function (ev) {
                $("#id_salestart-" + divlength).datepicker('hide');
            });
            $("#id_saleend-" + divlength).datepicker({
                format: "mm/dd/yyyy",
                minDate: "0",
                onSelect: function () {

                    this.fireEvent && this.fireEvent('onchange') || $(this).change();
                }
            }).on('changeDate', function (ev) {
                $("#id_saleend-" + divlength).datepicker('hide');
            });

           
           

            $("#id_saletimestart-" + divlength).timepicker();

            $("#id_saletimeend-" + divlength).timepicker();
         
          
            $("#clonediv-" + divlength).focus();
            var msg = disablebutton();
            if (msg == "") {

                $(".cdisable").removeAttr("disabled");

            }

        });

        function randomString(len, charSet) {
            charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            var randomString = '';
            for (var i = 0; i < len; i++) {
                var randomPoz = Math.floor(Math.random() * charSet.length);
                randomString += charSet.substring(randomPoz, randomPoz + 1);
            }
            return randomString;
        }
        function deletevariable(e) {

            var divlength = $("#id_Mainvariable> div").size();
            if (divlength == 1) {

            } else {
                var id = e;
                var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));

                var div = document.getElementById("id_clonevariable-" + el);



                div.parentNode.removeChild(div);
                divlength = $("#id_Mainvariable> div").size();

                var count = 0;
                $('#id_Mainvariable').children('div').each(function () {

                    var id = $(this).attr('id');

                    id1 = id.substr(0, id.indexOf('-'));
                    ////console.log(id);
                    var idn = id1 + "-" + (count);
                    $(this).attr("id", idn);
                    $(this).find('*[id]').andSelf().each(function () {


                        var id = $(this).attr('id');
                        //console.log(id);
                        id1 = id.substr(0, id.indexOf('-'));
                        console.log(id1);
                        var idn = id1 + "-" + (count);
                        $(this).attr("id", idn);

                        if (id1 == "btn_vardelete") {
                            $(this).attr("href", "#cnfrmdeletevariable-" + count);
                        }
                        if (id1 == "id_varsubdesc") {
                            $(this).attr("placeholder", "Variable Charges Description " + parseInt(count+1));
                        }

                    });
                    count = count + 1;

                });

                if (divlength == 0) {
                    $('#id_Mainvariable').css('display', 'none');

                }
            }




        }
        function formatdate()
        {
            var today = new Date();
            var dd = today.getDate();
            var mm = today.getMonth() + 1; //January is 0!
            var yyyy = today.getFullYear();

            if (dd < 10) {
                dd = '0' + dd
            }

            if (mm < 10) {
                mm = '0' + mm
            }

            today = mm + '/' + dd + '/' + yyyy;
            return today;
        }
        function formatAMPM() {
            var date = new Date();
            var hours = date.getHours();
            var minutes = date.getMinutes();
            var ampm = hours >= 12 ? 'pm' : 'am';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            minutes = minutes < 10 ? '0' + minutes : minutes;
            var strTime = hours + ':' + minutes +ampm;
            return strTime;
        }
        function deletediv(e) {

            {

                var divlength = $("#MasterDiv> div").size();

                var id = e;
                var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));

                var div = document.getElementById("clonediv-" + el);
                // var div = document.getElementById("clonediv-0");
                var toatlqty = $("#id_totalqty").html();
                var qty = $("#id_quantity_total-" + el).val();
                var leftqty = parseInt(toatlqty) - parseInt(qty);
                if (!isNaN(leftqty)) {
                    $("#id_totalqty").html(leftqty);
                } else {

                    $("#id_totalqty").html(0);
                }


                div.parentNode.removeChild(div);
                divlength = $("#MasterDiv> div").size();

                var count = 0;
                $('#MasterDiv').children('div').each(function () {

                    var id = $(this).attr('id');

                    id1 = id.substr(0, id.indexOf('-'));
                    ////console.log(id);
                    var idn = id1 + "-" + (count);
                    $(this).attr("id", idn);
                    $(this).find('*[id]').andSelf().each(function () {


                        var id = $(this).attr('id');
                        //console.log(id);
                        id1 = id.substr(0, id.indexOf('-'));
                        // console.log(id);
                        var idn = id1 + "-" + (count);
                        $(this).attr("id", idn);
                        var al = $(this).attr("id").substr(0, id.indexOf('-'));
                        console.log(al);
                        if (al == "id_order") {

                            $(this).val(count);
                        }

                        if (al == "btndelete") {

                            $(this).attr('href', '#cnfrmdelete-' + (count));

                        }
                        if ($(this).hasClass("paidticket-" + (count + 1))) {
                            $(this).removeClass('paidticket-' + (count + 1));
                            $(this).addClass('paidticket-' + (count) + '');
                        }
                        if ($(this).hasClass("normalticket-" + (count + 1))) {
                            $(this).removeClass('normalticket-' + (count + 1));
                            $(this).addClass('normalticket-' + (count) + '');
                        }

                    });
                    count = count + 1;

                });

                if (divlength == 0) {
                    $('#id_ticket_footer').css('display', 'none');

                }
                calculateSum();

                return true;
            }


        }
        $(".tab-content").hide();
        function showsettingdiv(e) {
            var id = e;
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));

            $('#evnt_set-' + el).slideToggle("fast");
            //if ($('#evnt_set-' + el).css('display') == 'none') {
            //    $('#evnt_set-' + el).slideToggle("fast");

            //} else {

            //    $('#evnt_set-' + el).css('display', 'none');

            //}


        }



        $(".evnt_doll_amnt").hide();
        $(".ev_tic_end").click(function () {
            $(".evt_time").css("display", "none");
            $(".evnt_doll_amnt").css("display", "block");
        });
        $(".ev_by_date").click(function () {
            $(".evnt_doll_amnt").css("display", "none");
            $(".evt_time").css("display", "block");
        });
        function checkdiscount(e) {
            debugger;
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var price =parseFloat( parseFloat($('#id_cost-' + el).val().replace(',', '')).toFixed(2));
            var discount =parseFloat( parseFloat($('#' + e).val().replace(',', '')).toFixed(2));

            if (!isNaN(price) && !isNaN(discount)) {
                if (price != 0 && discount != 0) {

                    if (discount >= price) {
                        $('#' + e).addClass('err-bor');

                        $('#hddiscount').val('1');
                        return false;

                    } else {
                        //$('#' + e).val(discount);
                        $('#hddiscount').val('0');
                        $('#' + e).removeClass('err-bor');

                    }
                }
                else if (price == 0 && discount != 0) {
                    $('#' + e).addClass('err-bor');

                    $('#hddiscount').val('1');
                    return false;
                }

            } else if (isNaN(price) && !isNaN(discount)) {
                $('#' + e).addClass('err-bor');

                $('#hddiscount').val('1');
                return false;

            } else if (isNaN(discount)) {
                $('#hddiscount').val('0');
                $('#' + e).removeClass('err-bor');
            }




        }
        function checkvalidtime(e) {
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var al = e.substr(0, e.indexOf('-'));

            if (al == "id_saletimestart") {
                errorMsg = checkTime(e);
                if (errorMsg != "") {



                    $('#id_saletimestart-' + el).focus();
                    $('#id_saletimestart-' + el).val("7:00pm");
                

                }
                else
                {
                    var starttimetime1 = convertTo24Hour($("#id_saletimestart-" + el).val());
                    var todayDate = new Date($('#id_salestart-' + el).val() + " " + starttimetime1);
                    var enddate = convertTo24Hour($('#id_saletimeend-' + el).val());

                    var dateOne = new Date($('#id_saleend-' + el).val() + " " + enddate);
                 
                    if (todayDate > dateOne) {
                        $('#id_saleend-' + el).val($("#id_salestart-" + el).val());
                        $('#id_saletimeend-' + el).val($("#id_saletimestart-" + el).val());
                    } else
                    {

                        var txt = $('#' + e).val();

                        if ($("#hdSchType").val() == '') {
                            $('#id_saletimeend-' + el).val($('#' + e).val());
                        }

                        if ($("#hdSchType").val() == 'Single') {

                            $('#id_saletimeend-' + el).val($("#txtEndTime").val());

                        }
                        if ($("#hdSchType").val() == 'Multiple') {

                            $('#id_saletimeend-' + el).val($("#txtTimeEnd").val());
                        }
                    }
                   
                   

                }
            }
            if (al == "id_saletimeend") {
                errorMsg = checkTime(e);
                if (errorMsg != "") {

                    
                  
                   
                    if ($("#hdSchType").val() == '') {
                        $('#id_saletimeend-' + el).val($('#id_saletimestart-' + el).val());
                    }

                    if ($("#hdSchType").val() == 'Single') {
                      
                        $('#id_saletimeend-' + el).val($("#txtEndTime").val());

                    }
                    if ($("#hdSchType").val() == 'Multiple') {
                       
                        $('#id_saletimeend-' + el).val($("#txtTimeEnd").val());
                    }

                } else
                {
                   
                    var starttimetime1 = convertTo24Hour($("#id_saletimestart-" + el).val());
                    var todayDate = new Date($('#id_salestart-' + el).val() + " " + starttimetime1);
                    var enddate = convertTo24Hour($('#id_saletimeend-' + el).val());
             
                    var dateOne = new Date($('#id_saleend-' + el).val() + " " + enddate);
                 
                    if (todayDate > dateOne) {
                        $('#id_saleend-' + e).val($("#id_salestart-" + el).val());
                        $('#id_saletimeend-' + e).val($("#id_saletimestart-" + el).val());
                    }
                }
            }
            if (al == "id_auto_hide_until_time") {
                errorMsg = checkTime(e);
                if (errorMsg != "") {



                    //$('#id_auto_hide_until_time-' + el).focus();
                    $('#id_auto_hide_until_time-' + el).val("");
                    //$('#id_auto_hide_after_Time-' + el).val("7:00pm");

                } else {
                
                    $('#id_hdautohideuntil-' + el).val($('#' + e).val());
                    //$('#id_hdautohideafter-' + el).val($('#' + e).val());
                    //$('#id_auto_hide_after_Time-' + el).val($('#' + e).val());

                }

            }
            if (al == "id_auto_hide_after_Time") {
                errorMsg = checkTime(e);
                if (errorMsg != "") {
                    $("#id_auto_hide_after_Time-" + el).val("");
                    //$('#id_auto_hide_after_Time-' + el).val($('#id_auto_hide_until_time-' + el).val());
                  
                    //$('#id_auto_hide_after_Time-' + el).focus();

                    $('#id_hdautohideafter-' + el).val("");

                } else {
                    $('#id_hdautohideafter-' + el).val($('#' + e).val());
                    
                }
            }


        }

        function convertTo24Hour(time) {
            var hours = parseInt(time.substr(0, 2));
            if (time.indexOf('am') != -1 && hours == 12) {
                time = time.replace('12', '0');
            }
            if (time.indexOf('pm') != -1 && hours < 12) {
                time = time.replace(hours, (hours + 12));
            }
            return time.replace(/(am|pm)/, '');
        }
        function checkvalidDate(e) {

            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var al = e.substr(0, e.indexOf('-'));

            var errorMsg = checkDate(e);
            if (al == "id_saleend") {
                var enddate = $('#id_saleend-' + el).val();
                var startdate = $('#id_salestart-' + el).val();
                if (errorMsg != "") {

                    if ($("#hdSchType").val() == '') {
                        $('#id_saleend-' + el).val(startdate);
                    }

                    if ($("#hdSchType").val() == 'Single') {
                        $('#id_saleend-' + el).val($("#txtEndDate").val());
                        $('#id_saletimeend-' + el).val($("#txtEndTime").val());

                    }
                    if ($("#hdSchType").val() == 'Multiple') {
                        $('#id_saleend-' + el).val($("#txtDateTo").val());
                        $('#id_saletimeend-' + el).val($("#txtTimeEnd").val());
                    }

                    


              


                }
                var starttimetime1 = convertTo24Hour($("#id_saletimestart-" + el).val());
                var todayDate = new Date(startdate + " " + starttimetime1);
                var enddatetime = convertTo24Hour($('#id_saletimeend-' + el).val());

                var dateOne = new Date(enddate + " " + enddatetime);

                if (todayDate > dateOne) {
                    $('#id_saleend-' + el).val(startdate);
                }
              

               
            }
            if (al == "id_auto_hide_after_Date") {
                var startdate = $('#id_auto_hide_until_Date-' + el).val();
                var enddate = $('#id_auto_hide_after_Date-' + el).val();
                if (errorMsg != "") {



                    $('#id_auto_hide_after_Date-' + el).focus();
                    $('#id_auto_hide_after_Date-' + el).val("");


                }

              


            }
            return true;

        }
        function checkstartdate(e)
        {
            var count=0;
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            
            var al = e.substr(0, e.indexOf('-'));
            if($("#txtStartDate").val() != "" && $("#txtEndDate").val()!="") 
            {
                count=1;
            }
            if (count == 1)
            {

            } else
            {
                if ( $("#txtDateFrom").val() != "" && $("#txtDateTo").val()!="")
                {
                    count = 1;
                }
            }

            if (count == 1)
            {
              
               
               
            }else
            {
            }
           
        }
        function allownumber(el, evt, id) {



            var charCode = (evt.which) ? evt.which : event.keyCode;

            if ((charCode < 48 || charCode > 57) && charCode > 31 && charCode != 44) {

                evt.preventDefault();
                return false;
            }
            //if (charCode == 46 && charCode > 31 && (charCode < 48 || charCode > 57) && charCode != 188) {
            //    evt.preventDefault();
            //    return false;

            //}

            //if (number.length > 1 && charCode == 46) {
            //    evt.preventDefault();
            //    return false;
            //}

            //var code = event.charCode ? event.charCode : event.keyCode;

            ////  if (charCode == 46 && charCode > 31 && (charCode < 48 || charCode > 57) && charcode!=188) {
            ////      evt.preventDefault();
            ////    return false;

            ////}
            //if ((!event.shiftKey && !event.ctrlKey && !event.altKey) && ((code >= 48 && code <= 57) || (code >= 96 && code <= 105))) // 0-9 or numpad 0-9, disallow shift, ctrl, and alt
            //{

            //}
            //else if (code != 8 && code != 46 && code != 37 && code != 39 && code != 9) // not esc, del, left or right
            //{
            //    event.preventDefault();
            //    return false;
            //}



        }

        function showdiv(e)
        {

            var id = e;
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var al = e.substr(0, e.indexOf('-'));
            if ($('#id_ticketshidden-' + el).is(":checked") == true) {
                $("#id_CusdateCont-" + el).css("display", "block");
                $("#id_RemvTkt-" + el).css("display", "block");
                $("#id_EvaddTkt-" + el).css("display", "none");
            } else {
                $("#id_CusdateCont-" + el).css("display", "none");
                $("#id_RemvTkt-" + el).css("display", "none");
                $("#id_EvaddTkt-" + el).css("display", "block");
            }
            $("#id_auto_hide_type_0-" + el).prop('checked', true);
            $("#id_auto_hide_type_1-" + el).prop('checked', false);
            $("#id_HideuntDiv-" + el).css("display", "none");
        }
        function hideunhide(e) {


            var id = e;
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var al = e.substr(0, e.indexOf('-'));

            var divlength = $("#MasterDiv> div").size();
            if (al == "id_EvaddTkt") {

                $("#id_RemvTkt-" + el).css("display", "block");
                $("#id_EvaddTkt-" + el).css("display", "none");
                $("#id_CusdateCont-" + el).css("display", "block");
                $("#id_auto_hide_type_0-" + el).prop('checked', true);
                $("#id_auto_hide_type_1-" + el).prop('checked', false);
                $("#id_HideuntDiv-" + el).css("display", "none");
                $("#id_ticketshidden-" + el).prop('checked', true);
                $("#id_auto_hide_until_Date-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_until_time-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_until_Date-" + el).datepicker("option", "minDate", -1);
                $("#id_auto_hide_until_Date-" + el).datepicker("option", "maxDate", -2);
                $("#id_auto_hide_after_Date-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_after_Time-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_after_Date-" + el).datepicker("option", "minDate", -1);
                $("#id_auto_hide_after_Date-" + el).datepicker("option", "maxDate", -2);
            }
            if (al == "id_RemvTkt") {
                $("#id_auto_hide_type_0-" + el).prop('checked', true);
                $("#id_auto_hide_type_1-" + el).prop('checked', false);
                $("#id_RemvTkt-" + el).css("display", "none");
                $("#id_EvaddTkt-" + el).css("display", "block");
                $("#id_CusdateCont-" + el).css("display", "none");
                $("#id_ticketshidden-" + el).prop('checked', false);
                $("#id_auto_hide_until_Date-" + el).val('');
                $("#id_auto_hide_until_time-" + el).val('');
                $("#id_auto_hide_after_Date-" + el).val('');
                $("#id_auto_hide_after_Time-" + el).val('');
                $("#id_hideuntil-" + el).attr("checked", false);
                $("#id_hideafter-" + el).attr("checked", false);
                $("#id_auto_hide_until_Date-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_until_time-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_until_Date-" + el).datepicker("option", "minDate", -1);
                $("#id_auto_hide_until_Date-" + el).datepicker("option", "maxDate", -2);
                $("#id_auto_hide_after_Date-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_after_Time-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_after_Date-" + el).datepicker("option", "minDate", -1);
                $("#id_auto_hide_after_Date-" + el).datepicker("option", "maxDate", -2);

            }
            if (al == "id_CusdateTime") {
                $("#id_HideuntDiv-" + el).css("display", "block");
                $("#id_auto_hide_type_0-" + el).prop('checked', false);
                $("#id_hideuntil-" + el).attr("checked", false);
                $("#id_hideafter-" + el).attr("checked", false);
             
                $("#id_auto_hide_until_Date-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_until_time-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_until_Date-" + el).datepicker("option", "minDate", -1);
                $("#id_auto_hide_until_Date-" + el).datepicker("option", "maxDate", -2);
                $("#id_auto_hide_after_Date-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_after_Time-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_after_Date-" + el).datepicker("option", "minDate", -1);
                $("#id_auto_hide_after_Date-" + el).datepicker("option", "maxDate", -2);
            }
            if (al == "id_TktnotSale") {
                $("#id_HideuntDiv-" + el).css("display", "none");
                $("#id_auto_hide_type_1-" + el).prop('checked', false);
                $("#id_auto_hide_until_Date-" + el).val('');
                $("#id_auto_hide_until_time-" + el).val('');
                $("#id_auto_hide_after_Date-" + el).val('');
                $("#id_auto_hide_after_Time-" + el).val('');
                $("#id_hideuntil-" + el).attr("checked", false);
                $("#id_hideafter-" + el).attr("checked", false);
             
                $("#id_auto_hide_until_Date-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_until_time-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_until_Date-" + el).datepicker("option", "minDate", -1);
                $("#id_auto_hide_until_Date-" + el).datepicker("option", "maxDate", -2);
                $("#id_auto_hide_after_Date-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_after_Time-" + el).attr("readonly", "readonly");
                $("#id_auto_hide_after_Date-" + el).datepicker("option", "minDate", -1);
                $("#id_auto_hide_after_Date-" + el).datepicker("option", "maxDate", -2);

            }

        }
        function randomString(len, charSet) {
            charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            var randomString = '';
            for (var i = 0; i < len; i++) {
                var randomPoz = Math.floor(Math.random() * charSet.length);
                randomString += charSet.substring(randomPoz, randomPoz + 1);
            }
            return randomString;
        }
  

    @*Image Section*@
 


  
        $(document).ready(function () {
          
            function uuid() {
                var chars = '0123456789abcdef'.split('');

                var uuid = [], rnd = Math.random, r;
                uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';
                uuid[14] = '4'; // version 4

                for (var i = 0; i < 36; i++) {
                    if (!uuid[i]) {
                        r = 0 | rnd() * 16;

                        uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r & 0xf];
                    }
                }

                return uuid.join('');
            }

            $(function () {
                $("#MasterDiv").sortable({
                    update: function () {
                        var strItems = "";

                        $("#MasterDiv").children().each(function (i) {
                            var li = $(this).attr("id");
                            var el = li.substr(li.indexOf('-') + 1, li.length - li.indexOf('-'));
                            //alert(li);
                            $('#id_order-' + el).val(i);

                        });
                    }
                });
                //$("#MasterDiv").disableSelection();
            });
            $('#hdUniqueguid').val(uuid());
            //$('#input2').change(function () {
                
             
              
              
            //    if (this.files[0].size > 2097152) {
            //        $("#imageeror").val(1);
            //            alert("The file must be less than " + (2097152 / 1024 / 1024) + "MB");
                      
            //            return false;
            //        }
                

            //});
           
        });
 

    //DateTime
 
        function ajaxsetup(strname, strFormTag) {
            var msgnew = "";

            var request = $.ajax({
                url:'@Url.Action("Index", "ValidationMessage")',
                async: false,
                data: { strFormName: strname, strFormTag: strFormTag },
                type: 'Post'
            });
            request.done(function (msg) {
                msgnew += msg;
            });

            request.fail(function (jqXHR, textStatus) {
                msgnew += "Some Error occur!!";
            });
            return msgnew;
        }
        function disablebutton() {
           
            var msg = "";
            var count = 0;
            var countqty = 0;
            var countdesc = 0;
            var countvardesc = 0;
            var countvarqty = 0;
            var countprice = 0;
            var title = $('#txtEventTitle').val();

            if (title == "") {
               

                msg += ajaxsetup("CreateEvent", "CreateEventTitileUI") + "<br/>";

            }

            if ($('#ddlOrgnizers option').length <= 0) {
              
                msg += ajaxsetup("CreateEvent", "CreateEventOrganizerUI") + "<br/>";;


            }
            var type = $("#EventType").val();
            var cat = $("#ddlEventCategory").val();
            if (type <= 0) {
               
                msg += ajaxsetup("CreateEvent", "CreateEventtypeUI") + "<br/>";;
            }
            if (cat <= 0) {
              
                msg += ajaxsetup("CreateEvent", "CreateEventCategoryUI") + "<br/>";;
            }



            var divlength = $("#MasterDiv> div").size();
            if (divlength <= 0) {
                msg += "Please Enter atleast one ticket";

            }
            var weekcnt = 0;
            var weekdaily = 0;
            var weekmnth = 0;
            var custom = 0;
            var days;
            var single = 0;
            var type = $("#dlSchOption").val();
            if ($("#hdSchType").val() == 'Multiple') {

                if ($("#dlSchOption").val() == "Weekly") {
                    days = $("#dllWeeklyDayChk").val();

                    if (days == null) {
                        weekcnt++;
                       
                    } 
                    if ($("#txtTimeStart").val() == "") {
                        weekcnt++;
                       
                    }
                    if ($("#txtTimeEnd").val() == "") {
                        weekcnt++;
                       
                    }
                    if ($("#txtTimeEnd").val() == "") {
                        weekcnt++;
                      
                    }
                    if ($("#txtDateFrom").val() == "") {
                        weekcnt++;
                      
                    }
                    if ($("#txtDateTo").val() == "") {
                        weekcnt++;
                        
                    }
                }

                if ($("#dlSchOption").val() == "Daily") {
                    $("#txtDateFrom").length;
                    if ($("#txtDateFrom").val() == "") {
                        weekdaily++;
                       
                    }
                    $("#txtDateTo").length;
                    if ($("#txtDateTo").val() == "") {
                        weekdaily++;
                       
                    }
                    $("#txtTimeStart").length;
                    if ($("#txtTimeStart").val() == "") {
                        weekdaily++;
                       
                    }
                    $("#txtTimeEnd").length;
                    if ($("#txtTimeEnd").val() == "") {
                        weekdaily++;
                        
                    }

                }
                if ($("#dlSchOption").val() == "Monthly") {
                    days = $("#dllMonthlyWeekDay").val();
                    if (days == null) {

                        weekmnth++;
                       
                    }
                    if ($("#txtDateFrom").val() == "") {
                        weekmnth++;
                        
                    }
                    if ($("#txtDateFrom").val() == "") {
                        weekmnth++;
                       
                    }
                    if ($("#txtTimeStart").val() == "") {
                        weekmnth++;
                       
                    }
                    if ($("#txtDateTo").val() == "") {
                        weekmnth++;
                       
                    }

                }
                if ($("#dlSchOption").val() == "Custom") {

                    if ($("#txtTimeStart").val() == "") {
                        custom++;
                       
                    }
                    if ($("#txtTimeEnd").val() == "") {
                        custom++;
                        
                    }
                    if ($("#txtDateFrom").val() == "") {
                        custom++;
                       
                    }
                    if ($("#txtDateTo").val() == "") {
                        custom++;
                        
                    }

                }

            } else {

                var str = $("#txtStartDate").val();
                if ($("#txtStartDate").val() == "") {
                    single++;
                    
                }
                str = $("#txtStartTime").val();
                if ($("#txtStartTime").val() == "") {
                    single++;
                   
                }
                str = $("#txtEndDate").val();
                if ($("#txtEndDate").val() == "") {
                    single++;
                   
                }
                str = $("#txtEndTime").val();
                if ($("#txtEndTime").val() == "") {
                    single++;
                  
                }

            }

            if (weekcnt > 0) {
                $("#btEnterDates").click();
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";

            }
            if (weekdaily > 0) {
                $("#btEnterDates").click();
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";

            }
            if (weekmnth > 0) {
               
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";

            }
            if (custom > 0) {
               
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";
            }
            if (single > 0) {
               
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";
            }
            return msg;



        }
        function validatemain() {

            debugger;
            var msg = "";
            var count = 0;
            var countqty = 0;
            var countdesc = 0;
            var countvardesc = 0;
            var countvarqty = 0;
            var countprice = 0;
            var countmax = 0;
            var countdiscount = 0;

            var hidecount = 0;
            var title = $('#txtEventTitle').val();

            if (title == "") {
                $('#txtEventTitle').addClass('err-bor');
                
                msg += ajaxsetup("CreateEvent", "CreateEventTitileUI")+"<br/>";

            }

            if ($('#ddlOrgnizers option').length <= 0) {
                $('#txtOrgnizer').addClass('err-bor');
                msg += ajaxsetup("CreateEvent", "CreateEventOrganizerUI") + "<br/>";;


            }
            var type = $("#EventType").val();
            var cat = $("#ddlEventCategory").val();
            if (type <= 0) {
                $('#EventType').addClass('err-bor');
                msg += ajaxsetup("CreateEvent", "CreateEventtypeUI") + "<br/>";;
            }
            if (cat <= 0) {
                $('#ddlEventCategory').addClass('err-bor');
                msg += ajaxsetup("CreateEvent", "CreateEventCategoryUI") + "<br/>";;
            }



            var divlength = $("#MasterDiv> div").size();
            if (divlength <= 0) {
                msg += "Please Enter atleast one ticket";

            }
            if (divlength > 0) {

                for (var i = 0; i < divlength; i++) {

                    var ticket_name = $('#id_ticket_type-' + i).val();
                    var ticket_Qty = $('#id_quantity_total-' + i).val();
                    if (ticket_name == "") {
                        $('#id_ticket_type-' + i).addClass('err-bor');

                        countdesc++;
                    } else {
                        $('#id_ticket_type-' + i).removeClass('err-bor');

                    }
                    if (ticket_Qty == "") {

                        $('#id_quantity_total-' + i).addClass('err-bor');
                        countqty++;
                    } else {
                        if (ticket_Qty <= 0) {
                            $('#id_quantity_total-' + i).addClass('err-bor');
                            countqty++;

                        } else {
                            $('#id_quantity_total-' + i).removeClass('err-bor');
                        }
                    }

                    if ($('#id_paid-' + i).css('display') == "block") {

                        var price = parseFloat($('#id_cost-' + i).val());
                        if (isNaN(price)) {
                            $('#id_cost-' + i).addClass('err-bor');
                            countprice++;
                        }
                        if (price <= 0) {
                            $('#id_cost-' + i).addClass('err-bor');
                            countprice++;
                        }
                        if (price > 999999.99) {
                            $('#id_cost-' + i).addClass('err-bor');
                            countprice++;
                        } 
                    }

                    if ($('#id_ticketshidden-' + i).is(":checked"))
                    {
                        if($('#id_hideuntil-'+i).is(":checked"))
                        {
                            if($('#id_auto_hide_until_Date-'+i).val()=="" || $("#id_auto_hide_until_time-"+i).val()=="")
                            {
                                $('#id_auto_hide_until_Date-' + i).addClass('err-bor');
                                $("#id_auto_hide_until_time-" + i).addClass('err-bor');
                                hidecount++;
                            }else
                            {
                                $('#id_auto_hide_until_Date-' + i).removeClass('err-bor');
                                $("#id_auto_hide_until_time-" + i).removeClass('err-bor');
                            }

                        }
                       
                        if ($('#id_hideafter-' + i).is(":checked")) {
                            if ($('#id_auto_hide_after_Date-' + i).val() == "" || $("#id_auto_hide_after_Time-" + i).val() == "") {
                                $('#id_auto_hide_after_Date-' + i).addClass('err-bor');
                                $("#id_auto_hide_after_Time-" + i).addClass('err-bor');
                                hidecount++;
                            }else
                            {
                                $('#id_auto_hide_after_Date-' + i).removeClass('err-bor');
                                $("#id_auto_hide_after_Time-" + i).removeClass('err-bor');
                            }
                        }
                    }
                    var min =parseFloat( $('#id_min_ticket-' + i).val());
                    var max =parseFloat( $('#id_max_ticket-' + i).val());
                    var discount = parseFloat($('#id_Discount-' + i).val().replace(',', ''));
                    var cost = parseFloat($('#id_cost-' + i).val().replace(',', ''));
                    if(!isNaN(min) && !isNaN(max) && min!=0 && max!=0 )
                    {
                        if(min>max)
                        {
                            $('#id_min_ticket-' + i).addClass('err-bor');
                            $('#evnt_set-' + i).css('display', 'block');
                            countmax++;
                        }
                        else {
                            $('#id_min_ticket-' + i).removeClass('err-bor');
                        }

                    }
                    if (!isNaN(max) && max != 0)
                    {
                        if(max>ticket_Qty)
                        {
                            $('#id_max_ticket-' + i).addClass('err-bor');
                            $('#evnt_set-' + i).css('display', 'block');
                            countmax++;
                        }
                    }
                    if (!isNaN(min) && min != 0) {
                        if (min > ticket_Qty) {
                            $('#id_min_ticket-' + i).addClass('err-bor');
                            $('#evnt_set-' + i).css('display', 'block');
                            countmax++;
                        }
                    }
                    if (!isNaN(cost) && !isNaN(discount) && cost != 0 && discount != 0) {
                        if (cost <= discount) {
                            $('#id_Discount-' + i).addClass('err-bor');
                            countdiscount++;
                        }
                       

                    }
                    if(isNaN(cost)&& !isNaN(discount))
                    {
                        $('#id_Discount-' + i).addClass('err-bor');
                        countdiscount++;
                    }
                    
                }


            }
            if ($('#hddiscount').val() == 1) {
                count++;

            }
            if (parseInt($('#hdMaxerr').val()) == 1)
            {
                count++;
            }
            if (countdiscount > 0)
            {
                msg += "Please Enter valid discount price <br/>";
            }
            if (countmax > 0)
            {
                msg+="Please Enter valid qty <br/>";
            }
            if (countprice > 0) {
                msg += ajaxsetup("CreateEvent", "PriceNotzeroUI") + "<br/>";
            }
            if (countqty > 0) {
                msg += ajaxsetup("CreateEvent", "CreateEventQtyValidateUI") + "<br/>";
            }
            if (countdesc > 0 || hidecount > 0)
            {
                msg += ajaxsetup("CreateEvent", "CreateEventHighlightFieldsUI") + "<br/>";

            }
          
            if ($('#id_variablecharge').is(":checked") == true) {
                if ($('#id_vardesc').val() == "") {
                    $('#id_vardesc').addClass('err-bor');
                    msg += ajaxsetup("CreateEvent", "CreateEventvariabledescUI") + "<br/>";;



                } else {
                    $('#id_vardesc').removeClass('err-bor');

                }
                var divvar = $("#id_Mainvariable>div").size();
                if(divvar<=0)
                {
                    msg += "Please enter Variable valid charges by clicking on Add button"+ "<br/>";;

                }
                if (divvar > 0) {

                    for (var i = 0; i < divvar; i++) {
                        var subdesc_name = $('#id_varsubdesc-' + i).val();
                        var subprice_Qty = $('#id_varsubprice-' + i).val();

                        if (subdesc_name == "") {

                            $('#id_varsubdesc-' + i).addClass('err-bor');

                            countvardesc++;
                        } else {
                            $('#id_varsubdesc-' + i).removeClass('err-bor');

                        }
                        if (subprice_Qty == "") {

                            $('#id_varsubprice-' + i).addClass('err-bor');
                            countvarqty++;
                        } else {
                            if (subprice_Qty <= 0) {
                                $('#id_varsubprice-' + i).addClass('err-bor');
                                countvarqty++;

                            } else {
                                $('#id_varsubprice-' + i).removeClass('err-bor');
                            }


                        }

                    }

                }
            }
           

         
            if (count > 0)
            {

                msg += ajaxsetup("CreateEvent", "CreateEventHighlightFieldsUI") + "<br/>";
            }
            if (countvardesc > 0)
            {
                msg += ajaxsetup("CreateEvent", "CreateEventSubDescUI") + "<br/>";

            }
            if (countvarqty > 0) {
                msg += ajaxsetup("CreateEvent", "CreateEventSubQtyUI") + "<br/>";

            }
            if ($('#chkReqPassword').is(":checked") == true) {
                if ($('#txtReqPassword').val() == "") {
                    $('#txtReqPassword').addClass('err-bor');
                    msg += ajaxsetup("CreateEvent", "CreateEventPwdUI") + "<br/>";;

                } else {
                    $('#txtReqPassword').removeClass('err-bor');
                }

            }
            var weekcnt = 0;
            var weekdaily = 0;
            var weekmnth = 0;
            var custom = 0;
            var days;
            var single = 0;
          var type=  $("#dlSchOption").val();
            if ($("#hdSchType").val() == 'Multiple') {

                if ($("#dlSchOption").val() == "Weekly") {
                    days = $("#dllWeeklyDayChk").val();

                    if (days == null) {
                        weekcnt++;
                        $("#dvWeeklyDayChk button").addClass('err-bor');
                    } else {
                        $("#dvWeeklyDayChk button").removeClass('err-bor');
                    }
                    if ($("#txtTimeStart").val() == "") {
                        weekcnt++;
                        $("#txtTimeStart").addClass('err-bor');
                    } else {
                        $("#txtTimeStart").removeClass('err-bor');
                    }
                    if ($("#txtTimeEnd").val() == "") {
                        weekcnt++;
                        $("#txtTimeEnd").addClass('err-bor');
                    }
                    if ($("#txtTimeEnd").val() == "") {
                        weekcnt++;
                        $("#txtTimeEnd").addClass('err-bor');
                    }
                    if ($("#txtDateFrom").val() == "") {
                        weekcnt++;
                        $("#txtDateFrom").addClass('err-bor');
                    }
                    if ($("#txtDateTo").val() == "") {
                        weekcnt++;
                        $("#txtDateTo").addClass('err-bor');
                    }
                }

                if ($("#dlSchOption").val() == "Daily") {
                    $("#txtDateFrom").length;
                    if ($("#txtDateFrom").val() == "") {
                        weekdaily++;
                        $("#txtDateFrom").addClass('err-bor');
                    }
                    $("#txtDateTo").length;
                    if ($("#txtDateTo").val() == "") {
                        weekdaily++;
                        $("#txtDateTo").addClass('err-bor');
                    }
                    $("#txtTimeStart").length;
                    if ($("#txtTimeStart").val() == "") {
                        weekdaily++;
                        $("#txtTimeStart").addClass('err-bor');
                    }
                    $("#txtTimeEnd").length;
                    if ($("#txtTimeEnd").val() == "") {
                        weekdaily++;
                        $("#txtTimeEnd").addClass('err-bor');
                    }

                }
                if ($("#dlSchOption").val() == "Monthly") {
                    days = $("#dllMonthlyWeekDay").val();
                    if (days == null) {

                        weekmnth++;
                        $("#dvmonthchk button").addClass('err-bor');
                    }
                    if ($("#txtDateFrom").val() == "") {
                        weekmnth++;
                        $("#txtDateFrom").addClass('err-bor');
                    }
                    if ($("#txtDateFrom").val() == "") {
                        weekmnth++;
                        $("#txtDateFrom").addClass('err-bor');
                    }
                    if ($("#txtTimeStart").val() == "") {
                        weekmnth++;
                        $("#txtTimeStart").addClass('err-bor');
                    }
                    if ($("#txtDateTo").val() == "") {
                        weekmnth++;
                        $("#txtDateTo").addClass('err-bor');
                    }

                }
                if ($("#dlSchOption").val() == "Custom") {

                    if ($("#txtTimeStart").val() == "") {
                        custom++;
                        $("#txtTimeStart").addClass('err-bor');
                    }
                    if ($("#txtTimeEnd").val() == "") {
                        custom++;
                        $("#txtTimeEnd").addClass('err-bor');
                    }
                    if ($("#txtDateFrom").val() == "") {
                        custom++;
                        $("#txtDateFrom").addClass('err-bor');
                    }
                    if ($("#txtDateTo").val() == "") {
                        custom++;
                        $("#txtDateTo").addClass('err-bor');
                    }

                }

            } else {

             var str=   $("#txtStartDate").val();
                if ($("#txtStartDate").val()=="") {
                    single++;
                    $("#txtStartDate").addClass('err-bor');
                }
                str = $("#txtStartTime").val();
                if ($("#txtStartTime").val() == "") {
                    single++;
                    $("#txtStartTime").addClass('err-bor');
                }
                str=$("#txtEndDate").val();
                if ($("#txtEndDate").val() == "") {
                    single++;
                    $("#txtEndDate").addClass('err-bor');
                }
                str=  $("#txtEndTime").val();
                if ($("#txtEndTime").val() == "") {
                    single++;
                    $("#txtEndTime").addClass('err-bor');
                }

            }

            if (weekcnt > 0) {
                $("#btEnterDates").click();
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";

            }
            if (weekdaily > 0) {
                $("#btEnterDates").click();
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";

            }
            if (weekmnth > 0) {
                $("#btEnterDates").click();
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";

            }
            if (custom > 0) {
                $("#btEnterDates").click();
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";
            }
            if (single > 0) {
                $("#btEnterDates").click();
                msg += ajaxsetup("CreateEvent", "Validdate") + "<br/>";
            }
            return msg;
        }
        function compare(DateA, DateB) {
            var errorMsg = "";
            var a = new Date(DateA);
            var b = new Date(DateB);

            var msDateA = Date.UTC(a.getFullYear(), a.getMonth() + 1, a.getDate());
            var msDateB = Date.UTC(b.getFullYear(), b.getMonth() + 1, b.getDate());

            if (parseFloat(msDateA) < parseFloat(msDateB))
                return errorMsg = "";  // less than
            else if (parseFloat(msDateA) == parseFloat(msDateB))
                return errorMsg = "";  // equal
            else if (parseFloat(msDateA) > parseFloat(msDateB))
                return errorMsg =  ajaxsetup("CreateEvent", "CreateEventCompareDateUI") +"<br/>"; // greater than
            else
                return null;  // error


        }
        function checkTime(field) {
            var errorMsg = "";

            // regular expression to match required time format
            re = /^(\d{1,2}):(\d{2})(:00)?([ap]m)?$/;
            var value = $("#" + field).val();
            if (value != '') {
                if (regs = value.match(re)) {
                    if (regs[4]) {
                        // 12-hour time format with am/pm
                        if (regs[1] < 1 || regs[1] > 12) {
                            errorMsg = ajaxsetup("CreateEvent", "CreateEventInvalidTimeUI") +"<br/>";;
                        }
                    } else {
                        // 24-hour time format
                        if (regs[1] > 23) {
                            errorMsg = ajaxsetup("CreateEvent", "CreateEventInvalidTimeUI")+"<br/>";;
                        }
                    }
                    if (!errorMsg && regs[2] > 59) {
                        errorMsg = ajaxsetup("CreateEvent", "CreateEventInvalidTimeUI")+"<br/>";;
                    }
                } else {
                    errorMsg = ajaxsetup("CreateEvent", "CreateEventInvalidTimeUI")+"<br/>";;
                }
            }

            return errorMsg;
        }
        function checkDate(field) {
            var allowBlank = true;
            var minYear = (new Date()).getFullYear();
            var maxYear = (new Date()).getFullYear() + 10;
            var d = new Date();

            var errorMsg = "";
            var value = $("#" + field).val();
            var datelast = new Date(value);

            var msDateA = Date.UTC(d.getFullYear(), d.getMonth() + 1, d.getDate());
            var msDateB = Date.UTC(datelast.getFullYear(), datelast.getMonth() + 1, datelast.getDate());



            // regular expression to match required date format
            re = /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/;

            if (value != '') {
                if (regs = value.match(re)) {
                    if (regs[2] != '' && regs[2] != '' && regs[3] != '') {
                        if (regs[2] < 1 || regs[2] > 31) {
                            errorMsg = "<br/>" + ajaxsetup("CreateEvent", "CreateEventInvalidDateUI");
                        } else if (regs[1] < 1 || regs[1] > 12) {
                            errorMsg = "<br/>" + ajaxsetup("CreateEvent", "CreateEventInvalidDateUI");
                        } else if (regs[3] < minYear || regs[3] > maxYear) {
                            errorMsg = "<br/>" + ajaxsetup("CreateEvent", "CreateEventInvalidDateUI");
                        }
                    }
                } else {
                    errorMsg = ajaxsetup("CreateEvent", "CreateEventInvalidDateUI")+"<br/>" ;
                }
            } else if (!allowBlank) {
                errorMsg = ajaxsetup("CreateEvent", "CreateEventInvalidDateUI") + "<br/>";
            }

            if (parseFloat(msDateB) < parseFloat(msDateA)) {

                errorMsg = ajaxsetup("CreateEvent", "CreateEventInvalidDateUI") + "<br/>";
            }
            return errorMsg;

            //if (errorMsg != "") {
            //    return errorMsg;


            //    field.focus();
            //    field.value = "";

            //}

            //return true;
        }

        $(document).ready(function () {
            $('input.number').keyup(function (event) {

                // skip for arrow keys
             

                // format number
                $(this).val(function (index, value) {
                    return value
                    .replace(/\D/g, "")
                    .replace(/\B(?=(\d{3})+(?!\d))/g, ",")
                    ;
                });
            });
            $('.close-model').on('click', function (e) {
                $.modal.close();
            });
            //$(document).click(function () {

            //    $('#diverroacc').css('display', 'none');
            //    $('#divaccsuc').css('display', 'none');
            //    $("input").removeClass('err-bor');
            //});
            $('#drag-drop').on('click', function (e) {
           
                $('#input2').unbind('click');

            });
        });

 

        function AddDates() {
            var savedaddress = "";
            $("#hidSchLastState").val($("#dlSchOption").val());
            if ($(".SchmultiDetail").css('display') == 'block') {
                $("#hdSchType").val('Multiple');
                vSelecttextDates = "Click here to enter the start and end date";
                if ($("#txtDateFrom").val() != '' && $("#txtDateFrom").val() != null) {
                    if ($("#dlSchOption").val() == "Daily") {
                        vSelecttextDates = "Daily : " + $("#txtDateFrom").val() + " " + $("#txtTimeStart").val() + " To " + $("#txtDateTo").val() + " " + $("#txtTimeEnd").val();
                        savedaddress = vSelecttextDates;
                    }
                    else if ($("#dlSchOption").val() == "Weekly") {
                        vSelecttextDates = "Weekly : " + $("#txtDateFrom").val() + " " + $("#txtTimeStart").val() + " To " + $("#txtDateTo").val() + " " + $("#txtTimeEnd").val();
                        savedaddress = vSelecttextDates;
                    }
                    else if ($("#dlSchOption").val() == "Monthly") {
                        vSelecttextDates = "Monthly : " + $("#txtDateFrom").val() + " " + $("#txtTimeStart").val() + " To " + $("#txtDateTo").val() + " " + $("#txtTimeEnd").val();
                        savedaddress = vSelecttextDates;
                    }
                    else if ($("#dlSchOption").val() == "Custom") {
                        vSelecttextDates = "Custom : " + $("#txtDateFrom").val() + " " + $("#txtTimeStart").val() + " To " + $("#txtDateTo").val() + " " + $("#txtTimeEnd").val();
                        savedaddress = vSelecttextDates;
                    }

                }

                $("#btEnterDates").text(vSelecttextDates);
            }
            else {
                vSelecttextDates = "Click here to enter the start and end date";
                if ($("#txtStartDate").val() != '' && $("#txtStartDate").val() != null) {
                    vSelecttextDates = $("#txtStartDate").val() + " " + $("#txtStartTime").val() + " To " + $("#txtEndDate").val() + " " + $("#txtEndTime").val()
                    savedaddress = vSelecttextDates;
                }
                $("#btEnterDates").text(vSelecttextDates);
               
                $("#hdSchType").val('Single');
            }
           
            if (savedaddress != '')
            {
           $("input[id^='id_salestart']").attr("disabled", false);
            $("input[id^='id_saletimestart']").attr("disabled", false);
            $("input[id^='id_saleend']").attr("disabled", false);
            $("input[id^='id_saletimeend']").attr("disabled", false);
            $(".upload_help_icn").css('display', 'none');
            } else {
                $("input[id^='id_salestart']").val("");;
                $("input[id^='id_saletimestart']").val("");;
                $("input[id^='id_saleend']").val("");;
                $("input[id^='id_saletimeend']").val("");;
                $("input[id^='id_salestart']").attr("disabled", true);
                $("input[id^='id_saletimestart']").attr("disabled", true);
                $("input[id^='id_saleend']").attr("disabled", true);
                $("input[id^='id_saletimeend']").attr("disabled", true);
                $(".upload_help_icn").css('display', 'block');
            }

            var msg = disablebutton();
            //alert(msg);
            if (msg == "") {
                $(".cdisable").removeAttr("disabled");
            }

        };
        function AddTimeZone()
        {

            var vval = $("#dllTimeZone option:selected").text();



            if (vval == null || vval == '')
                vval = "Timezone & date setting";

            $("#lblTimeZone").text(vval);

        }
        $(document).ready(function () {

           $(".upload_help_icn_inner").css({ "display": "none" });
            $(".help_icon_hov").mouseover(function (e) {
                var $target = $(e.currentTarget);
                $target.closest("div").find(".upload_help_icn_inner").css({ "display": "block" });
            });
            $(".help_icon_hov").mouseout(function (e) {
                var $target = $(e.currentTarget);
                $target.parent("div").find(".upload_help_icn_inner").css({ "display": "none" });
            });

            $('.summernote').summernote({
                height: 70,   //set editable area's height
                disableDragAndDrop: true
            });

            $(".ticket_panel").hide();
            $(".save_btn").click(function () {
                $(".ticket_panel").slideDown();

            });

            $(".ShowdateList").hide();
            $(".DateList").click(function () {
                $(".ShowdateList").toggle(500);
            });


            $('#AddMore').click(function () {
                var data = $('#CloneDiv').clone();
                data.attr('id', '');
                //data.append('<span class="RemoveMoreHub" style="width:80%;"><a href="javascript:void(0);" style="float:right;color:#CE0009;font-size:13px;text-decoration:none;margin-right:5%;" >- Remove</a></span>');
                $('#MasterDiv').append(data);
            });

            $(".tab-content").hide();
            $(".evnt_set").click(function () {

                $(".tab-content").slideToggle("fast");
            });


            // $('.date_picker').datepicker({
            //     format: "MM/DD/YYYY",

            // });

            $('.date_picker').datepicker({
                format: "MM/DD/YYYY",
                minDate: "0"
            })
            .on('changeDate', function (ev) {
                $('.date_picker').datepicker('hide');
            });

            $(function () {
                $('.time_picker').timepicker();
            });

            $(".evnt_doll_amnt").hide();
            $(".ev_tic_end").click(function () {
                $(".evt_time").css("display", "none");
                $(".evnt_doll_amnt").css("display", "block");
            });
            $(".ev_by_date").click(function () {
                $(".evnt_doll_amnt").css("display", "none");
                $(".evt_time").css("display", "block");
            });

            $(".CusdateCont").hide();
            $(".EvaddTkt").click(function () {
                $(".CusdateCont").css("display", "block");
            });

            $(".RemvTkt").hide();
            $(".EvaddTkt").click(function () {
                $(".RemvTkt").css("display", "block");
                $(".EvaddTkt").css("display", "none");
            });
            $(".RemvTkt").click(function () {
                $(".EvaddTkt").css("display", "block");
                $(".CusdateCont").css("display", "none");
                $(".RemvTkt").css("display", "none");
            });

            $(".HideuntDiv").hide();
            $(".CusdateTime").click(function () {
                $(".HideuntDiv").css("display", "block");
            });
            $(".TktnotSale").click(function () {
                $(".HideuntDiv").css("display", "none");
            });
            // $('#multiselect2').multiselect({
            // includeSelectAllOption: true
            // });
            $('.checkboxName').multiselect({
                checkboxName: 'multiselect[]'
            });

            $(".can_org_cont").hide();
            $(".EditOrg").click(function () {
                $(".can_org_cont").css("display", "block");
                $(".edit_org_cont").css("display", "none");
                $(".Moderor").css("display", "block");

            });
            $(".AddOrg").click(function () {
                $(".can_org_cont").css("display", "block");
                $(".edit_org_cont").css("display", "none");
                $(".Moderor").css("display", "none");

            });
            $(".CanOrg").click(function () {
                $(".edit_org_cont").css("display", "block");
                $(".can_org_cont").css("display", "none");

            });


            $(".AddSocial").css("display", "none");
            $('#Incsocial').change(function () {
                if ($(this).is(":checked")) {
                    $('.AddSocial').show();
                } else {
                    $('.AddSocial').hide();
                }
            });

            $(".priv_cont").hide();
            $(".Prvpage").click(function () {
                $(".priv_cont").css("display", "block");
            });
            $(".Pubpage").click(function () {
                $(".priv_cont").css("display", "none");
            });

            $(".online_main_cont").hide();
            $(".OnlineEvent").click(function () {
                $(".online_main_cont").css("display", "block");
                $(".EnterAdd").css("display", "none");
            });

            $(".AddLocatondiv").click(function () {
                $(".EnterAdd").css("display", "block");
                $(".online_main_cont").css("display", "none");

            });


            $(".PastLocatMain").hide();
            $(".UsePast").click(function () {
                $(".PastLocatMain").css("display", "block");
                $(".EvntLocatTitle").css("display", "none");
                $(".EnterAdd").css("display", "none");
            });

            $(".RetunEvent").click(function () {
                $(".EnterAdd").css("display", "block");
                $(".EvntLocatTitle").css("display", "block");
                $(".PastLocatMain").css("display", "none");

            });

            $(".OrglistShow").hide();
            $(".OrgIcn").click(function () {

                $(".OrglistShow").slideToggle("fast");
            });

            $('#btndiverrsuc').click(function () {

                $('#diverroacc').css('display', 'none');
                $('#divaccsuc').css('display', 'none');
                $('select').removeClass('err-bor');
                $('input').removeClass('err-bor');

            });
            $('#btndivaccsuc').click(function () {

                $('#diverroacc').css('display', 'none');
                $('select').removeClass('err-bor');
                $('#divaccsuc').css('display', 'none');
                $('input').removeClass('err-bor');


            });

            $(".StartDatemodal").hide();
            $(".StartDate").click(function () {
                $(".StartDatemodal").slideToggle("fast");
               // $(".TmezoneSet").hide();

            });




            $(".PastLocat").css("display", "none");
            $('#UsepastLoc').change(function () {
                if ($(this).is(":checked")) {
                    $('.PastLocat').show();
                    $('.EntVenAdd').hide();
                } else {
                    $('.PastLocat').hide();
                    $('.EntVenAdd').show();
                }
            });

            $(".FindNewVen").click(function () {
                $(".EntVenAdd").show();
                $(".PastLocat").hide();

            });

            $(".TicketFees").css("display", "none");
            $('#VarCharg').change(function () {
                if ($(this).is(":checked")) {
                    $('.TicketFees').show();
                } else {
                    $('.TicketFees').hide();
                }
            });



            $(".SchmultiDetail").hide();
            $(".Schmultisingle").hide();
            $(".SchmultiEvnt").click(function () {
                $(".SchmultiDetail").slideToggle("slow");
                $(".SchDivtop").hide();
            });


            $(".SchmultiEvnt").click(function () {
                $(".SchDivtop").hide();
                $(".Schmultisingle").show();
            });


            $(".Schmultisingle").click(function () {
                $(".SchDivtop").show();
                $(".SchmultiDetail").hide();
                $(".Schmultisingle").hide();
            });

            $(".TmezoneSet").hide();
            $(".Timezone").click(function () {
                $("#lastmodelcalled").val("TmezoneSet");
                $(".TmezoneSet").slideToggle("fast");

            });

            $(".closemodal").click(function () {
                AddDates();
                $(".StartDatemodal").hide();
                $("input[id^='id_salestart']").attr("disabled", false);
                $("input[id^='id_saletimestart']").attr("disabled", false);
                $("input[id^='id_saleend']").attr("disabled", false);
                $("input[id^='id_saletimeend']").attr("disabled", false);

            });

            $(".closetimemodal").click(function () {
                AddTimeZone();
                $(".TmezoneSet").hide();

            });

        });


        //$(document).on('click', function () {
        //    $('.StartDatemodal').hide();
        //});
        //$('.StartDatemodal, .StartDate').on('click', function (e) {
        //    e.stopPropagation();
        //});


        //$(document).on('click', function () {
        //    $('.TmezoneSet').hide();
        //});
        //$('.TmezoneSet, .Timezone').on('click', function (e) {
        //    e.stopPropagation();
        //});
        //$("#datemodel").on('click', function (e) {
        //    e.stopPropagation();
           
        //});
        //$("#txtStartTime .ui-timepicker-input").change(function (e) {
        //    e.stopPropagation();

        //});

       

        $(document).on('click', function (e) {

         

            var $target = $(e.target);

            var id = $(e.target)[0].id;
            //alert($($(e.target)[0]).attr("class"));
         
            var uiclasstimepicker = $($(e.target)[0]).attr("class");
            var uiclassdatepicker=$($(e.target)[0]).parent().parents("div").attr("class") 
            var uidatepickerheader = $($(e.target)[0]).parent().parents("div").attr("class");
            if (typeof uiclasstimepicker === "undefined" && typeof uiclassdatepicker === "undefined" && typeof uidatepickerheader === "undefined")
            {
                AddDates();
              
                $(".StartDatemodal").hide();
            } else {
                if ((uiclasstimepicker != "ui-timepicker-selected") && ($($(e.target)[0]).parent().parents("div").attr("class").indexOf("ui-datepicker-header") < 0) && ($($(e.target)[0]).parent().parents("div").attr("class").indexOf("ui-datepicker") < 0)) {

                    if ($target.closest(".StartDate").get(0) == null && $target.closest(".StartDatemodal").get(0) == null) {
                        AddDates();

                        $(".StartDatemodal").hide();

                    }


                }
            }
           
           if ($target.closest(".Timezone").get(0) == null && $target.closest(".TmezoneSet").get(0) == null) {
               AddTimeZone();
               $(".TmezoneSet").hide();
           }


              

        });


        function onlyAlphabets(e, t) {



            if (window.event) {

                var charCode = window.event.keyCode;

            }

            else if (e) {

                var charCode = e.which;

            }

            else { return true; }

            if ((charCode > 64 && charCode < 91) || (charCode > 96 && charCode < 123) || charCode == 32)

                return true;

            else

                return false;

        }

      
        $(document).prop('title', 'Eventcombo - Create a new event');

        $(".upload_help_icn_inner").css({ "display": "none" });

     
        function showhover(e)
        {
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var al = e.substr(0, e.indexOf('-'));
            if (al == "hovstart") {
                $("#help_start_inner-" + el).css({ "display": "block" });
            }
            if(al=="hovend")
            {
                $("#help_end_inner-" + el).css({ "display": "block" });
            }
        }

        function showhoverout(e)
        {
            var el = e.substr(e.indexOf('-') + 1, e.length - e.indexOf('-'));
            var al = e.substr(0, e.indexOf('-'));
            if (al == "hovstart") {
                $("#help_start_inner-" + el).css({ "display": "none" });
            }
            if (al == "hovend") {
                $("#help_end_inner-" + el).css({ "display": "none" });
            }

        }
      

    </script>


